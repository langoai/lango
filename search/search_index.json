{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Lango","text":"<p>A high-performance AI agent framework built with Go.</p> <p>Single binary. Multi-provider AI. Self-learning knowledge system.</p> <p>Experimental</p> <p>Lango is under active development. APIs and configuration formats may change between releases. Use in production at your own risk.</p>"},{"location":"#quick-install","title":"Quick Install","text":"<pre><code>git clone https://github.com/langoai/lango.git\ncd lango\nmake build\n./bin/lango onboard\n</code></pre> <p>See the Installation Guide for detailed instructions.</p>"},{"location":"#features","title":"Features","text":"<ul> <li> <p> Fast</p> <p>Single binary, &lt;100ms startup, &lt;250MB memory footprint. Built with Go for maximum performance.</p> </li> <li> <p> Multi-Provider AI</p> <p>OpenAI, Anthropic, Gemini, and Ollama with a unified interface. Switch providers without changing code.</p> </li> <li> <p> Multi-Channel</p> <p>Connect to Telegram, Discord, and Slack. Manage conversations across channels from a single agent.</p> </li> <li> <p> Rich Tools</p> <p>Shell execution, file system operations, browser automation, crypto and secrets management tools.</p> </li> <li> <p> Self-Learning</p> <p>Knowledge store, learning engine, skill system, observational memory, and a proactive librarian that grows smarter over time.</p> </li> <li> <p> Knowledge Graph &amp; Graph RAG</p> <p>BoltDB-backed triple store with hybrid vector + graph retrieval for deep contextual understanding.</p> </li> <li> <p> Multi-Agent Orchestration</p> <p>Hierarchical sub-agents (Executor, Researcher, Planner, Memory Manager) working together on complex tasks.</p> </li> <li> <p> A2A Protocol</p> <p>Agent-to-Agent protocol for remote agent discovery and inter-agent communication.</p> </li> <li> <p> P2P Network</p> <p>Decentralized agent connectivity via libp2p with DID identity, knowledge firewall, mDNS discovery, and ZK-enhanced handshake.</p> </li> <li> <p> Blockchain Payments</p> <p>USDC payments on Base L2 with X402 V2 auto-pay protocol support.</p> </li> <li> <p> Cron Scheduling</p> <p>Persistent cron jobs with Ent ORM storage and multi-channel delivery.</p> </li> <li> <p> Background Execution</p> <p>Async task manager with concurrency control for long-running operations.</p> </li> <li> <p> Workflow Engine</p> <p>DAG-based YAML workflows with parallel step execution and dependency management.</p> </li> <li> <p> Secure</p> <p>AES-256-GCM encryption, key registry, secret management, PII redaction, hardware keyring (Touch ID / TPM), SQLCipher database encryption, and Cloud KMS integration.</p> </li> <li> <p> Persistent</p> <p>Ent ORM with encrypted SQLite storage for sessions, configuration, and knowledge.</p> </li> <li> <p> Gateway</p> <p>WebSocket and HTTP server with real-time streaming support.</p> </li> <li> <p> Auth</p> <p>OIDC authentication and OAuth login flow for secure access control.</p> </li> </ul>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started -- Install, configure, and run your first agent</li> <li>Architecture -- Understand the system design</li> <li>CLI Reference -- Complete command documentation</li> </ul>"},{"location":"configuration/","title":"Configuration Reference","text":"<p>Complete reference of all configuration keys available in Lango. Configuration is stored in encrypted profiles managed by <code>lango config</code> commands. Use <code>lango onboard</code> for guided setup or <code>lango settings</code> for the full interactive editor.</p> <p>All configuration is managed through the <code>lango settings</code> TUI (interactive terminal editor) or by importing a JSON file with <code>lango config import</code>. Lango does not use YAML configuration files. The JSON examples below show the structure expected by <code>lango config import</code> and reflect what <code>lango settings</code> edits behind the scenes.</p> <p>See Configuration Basics for an introduction to the configuration system.</p>"},{"location":"configuration/#server","title":"Server","text":"<p>Gateway server settings for HTTP API and WebSocket connections.</p> <p>Settings: <code>lango settings</code> \u2192 Server</p> <pre><code>{\n  \"server\": {\n    \"host\": \"localhost\",\n    \"port\": 18789,\n    \"httpEnabled\": true,\n    \"wsEnabled\": true,\n    \"allowedOrigins\": []\n  }\n}\n</code></pre> Key Type Default Description <code>server.host</code> <code>string</code> <code>localhost</code> Host address to bind to <code>server.port</code> <code>int</code> <code>18789</code> Port to listen on <code>server.httpEnabled</code> <code>bool</code> <code>true</code> Enable HTTP API endpoints <code>server.wsEnabled</code> <code>bool</code> <code>true</code> Enable WebSocket server <code>server.allowedOrigins</code> <code>[]string</code> <code>[]</code> Allowed origins for CORS. Empty = same-origin only"},{"location":"configuration/#agent","title":"Agent","text":"<p>LLM agent settings including model selection, prompt configuration, and timeouts.</p> <p>Settings: <code>lango settings</code> \u2192 Agent</p> <pre><code>{\n  \"agent\": {\n    \"provider\": \"anthropic\",\n    \"model\": \"claude-sonnet-4-20250514\",\n    \"fallbackProvider\": \"\",\n    \"fallbackModel\": \"\",\n    \"maxTokens\": 4096,\n    \"temperature\": 0.7,\n    \"systemPromptPath\": \"\",\n    \"promptsDir\": \"\",\n    \"requestTimeout\": \"5m\",\n    \"toolTimeout\": \"2m\",\n    \"multiAgent\": false\n  }\n}\n</code></pre> Key Type Default Description <code>agent.provider</code> <code>string</code> <code>anthropic</code> Primary AI provider ID (references <code>providers.&lt;id&gt;</code>) <code>agent.model</code> <code>string</code> Model ID to use (e.g., <code>claude-sonnet-4-20250514</code>) <code>agent.fallbackProvider</code> <code>string</code> Fallback provider ID when primary fails <code>agent.fallbackModel</code> <code>string</code> Fallback model ID <code>agent.maxTokens</code> <code>int</code> <code>4096</code> Maximum tokens per response <code>agent.temperature</code> <code>float64</code> <code>0.7</code> Sampling temperature (0.0 - 1.0) <code>agent.systemPromptPath</code> <code>string</code> Path to a custom system prompt file <code>agent.promptsDir</code> <code>string</code> Directory containing <code>.md</code> files for system prompts <code>agent.requestTimeout</code> <code>duration</code> <code>5m</code> Maximum duration for a single AI provider request <code>agent.toolTimeout</code> <code>duration</code> <code>2m</code> Maximum duration for a single tool call <code>agent.multiAgent</code> <code>bool</code> <code>false</code> Enable multi-agent orchestration"},{"location":"configuration/#providers","title":"Providers","text":"<p>Named AI provider configurations. Referenced by other sections via provider ID.</p> <p>Settings: <code>lango settings</code> \u2192 Providers</p> <pre><code>{\n  \"providers\": {\n    \"my-anthropic\": {\n      \"type\": \"anthropic\",\n      \"apiKey\": \"${ANTHROPIC_API_KEY}\"\n    },\n    \"my-openai\": {\n      \"type\": \"openai\",\n      \"apiKey\": \"${OPENAI_API_KEY}\",\n      \"baseUrl\": \"https://api.openai.com/v1\"\n    },\n    \"local-ollama\": {\n      \"type\": \"ollama\",\n      \"baseUrl\": \"http://localhost:11434/v1\"\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>providers.&lt;id&gt;.type</code> <code>string</code> Provider type: <code>anthropic</code>, <code>openai</code>, <code>google</code>, <code>gemini</code>, <code>ollama</code> <code>providers.&lt;id&gt;.apiKey</code> <code>string</code> API key (supports <code>${ENV_VAR}</code> substitution) <code>providers.&lt;id&gt;.baseUrl</code> <code>string</code> Base URL for OpenAI-compatible or self-hosted providers"},{"location":"configuration/#logging","title":"Logging","text":"<p>Settings: <code>lango settings</code> \u2192 Logging</p> <pre><code>{\n  \"logging\": {\n    \"level\": \"info\",\n    \"format\": \"console\"\n  }\n}\n</code></pre> Key Type Default Description <code>logging.level</code> <code>string</code> <code>info</code> Log level: <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code> <code>logging.format</code> <code>string</code> <code>console</code> Output format: <code>console</code>, <code>json</code>"},{"location":"configuration/#session","title":"Session","text":"<p>Session storage and lifecycle settings.</p> <p>Settings: <code>lango settings</code> \u2192 Session</p> <pre><code>{\n  \"session\": {\n    \"databasePath\": \"~/.lango/data.db\",\n    \"ttl\": \"24h\",\n    \"maxHistoryTurns\": 100\n  }\n}\n</code></pre> Key Type Default Description <code>session.databasePath</code> <code>string</code> <code>~/.lango/data.db</code> Path to the SQLite session database <code>session.ttl</code> <code>duration</code> Session time-to-live before expiration (empty = no expiration) <code>session.maxHistoryTurns</code> <code>int</code> Maximum conversation turns to retain per session"},{"location":"configuration/#security","title":"Security","text":""},{"location":"configuration/#signer","title":"Signer","text":"Key Type Default Description <code>security.signer.provider</code> <code>string</code> <code>local</code> Signer provider (<code>local</code>)"},{"location":"configuration/#interceptor","title":"Interceptor","text":"<p>The security interceptor controls tool execution approval and PII protection. See Tool Approval and PII Redaction.</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"enabled\": true,\n      \"redactPii\": false,\n      \"approvalPolicy\": \"dangerous\",\n      \"approvalTimeoutSec\": 30,\n      \"notifyChannel\": \"\",\n      \"sensitiveTools\": [],\n      \"exemptTools\": []\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>security.interceptor.enabled</code> <code>bool</code> <code>true</code> Enable the security interceptor <code>security.interceptor.redactPii</code> <code>bool</code> <code>false</code> Enable PII redaction in messages <code>security.interceptor.approvalPolicy</code> <code>string</code> <code>dangerous</code> Tool approval policy: <code>always</code>, <code>dangerous</code>, <code>never</code> <code>security.interceptor.approvalTimeoutSec</code> <code>int</code> <code>30</code> Timeout for approval requests (seconds) <code>security.interceptor.notifyChannel</code> <code>string</code> Channel to send approval notifications <code>security.interceptor.sensitiveTools</code> <code>[]string</code> Tools that always require approval <code>security.interceptor.exemptTools</code> <code>[]string</code> Tools exempt from approval regardless of policy"},{"location":"configuration/#pii-detection","title":"PII Detection","text":"<p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"piiRegexPatterns\": [],\n      \"piiDisabledPatterns\": [],\n      \"piiCustomPatterns\": []\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>security.interceptor.piiRegexPatterns</code> <code>[]string</code> Built-in PII regex pattern names to enable <code>security.interceptor.piiDisabledPatterns</code> <code>[]string</code> Built-in PII patterns to disable <code>security.interceptor.piiCustomPatterns</code> <code>[]object</code> Custom PII regex patterns (name + regex pairs)"},{"location":"configuration/#presidio-integration","title":"Presidio Integration","text":"<p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"presidio\": {\n        \"enabled\": false,\n        \"url\": \"http://localhost:5002\",\n        \"scoreThreshold\": 0.7,\n        \"language\": \"en\"\n      }\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>security.interceptor.presidio.enabled</code> <code>bool</code> <code>false</code> Enable Microsoft Presidio for advanced PII detection <code>security.interceptor.presidio.url</code> <code>string</code> Presidio analyzer service URL <code>security.interceptor.presidio.scoreThreshold</code> <code>float64</code> <code>0.7</code> Minimum confidence score (0.0 - 1.0) <code>security.interceptor.presidio.language</code> <code>string</code> <code>en</code> Language for PII analysis"},{"location":"configuration/#auth","title":"Auth","text":"<p>Configure OAuth2/OIDC authentication providers for the gateway API.</p> <p>Settings: <code>lango settings</code> \u2192 Auth</p> <pre><code>{\n  \"auth\": {\n    \"providers\": {\n      \"google\": {\n        \"issuerUrl\": \"https://accounts.google.com\",\n        \"clientId\": \"${GOOGLE_CLIENT_ID}\",\n        \"clientSecret\": \"${GOOGLE_CLIENT_SECRET}\",\n        \"redirectUrl\": \"http://localhost:18789/auth/callback\",\n        \"scopes\": [\"openid\", \"email\", \"profile\"]\n      }\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>auth.providers.&lt;id&gt;.issuerUrl</code> <code>string</code> OIDC issuer URL <code>auth.providers.&lt;id&gt;.clientId</code> <code>string</code> OAuth2 client ID <code>auth.providers.&lt;id&gt;.clientSecret</code> <code>string</code> OAuth2 client secret <code>auth.providers.&lt;id&gt;.redirectUrl</code> <code>string</code> OAuth2 redirect URL <code>auth.providers.&lt;id&gt;.scopes</code> <code>[]string</code> OAuth2 scopes to request"},{"location":"configuration/#channels","title":"Channels","text":"<p>Communication channel configurations.</p>"},{"location":"configuration/#telegram","title":"Telegram","text":"Key Type Default Description <code>channels.telegram.enabled</code> <code>bool</code> <code>false</code> Enable Telegram channel <code>channels.telegram.botToken</code> <code>string</code> Bot token from BotFather <code>channels.telegram.allowlist</code> <code>[]int64</code> <code>[]</code> Allowed user/group IDs (empty = allow all)"},{"location":"configuration/#discord","title":"Discord","text":"Key Type Default Description <code>channels.discord.enabled</code> <code>bool</code> <code>false</code> Enable Discord channel <code>channels.discord.botToken</code> <code>string</code> Bot token from Discord Developer Portal <code>channels.discord.applicationId</code> <code>string</code> Application ID for slash commands <code>channels.discord.allowedGuilds</code> <code>[]string</code> <code>[]</code> Allowed guild IDs (empty = allow all)"},{"location":"configuration/#slack","title":"Slack","text":"Key Type Default Description <code>channels.slack.enabled</code> <code>bool</code> <code>false</code> Enable Slack channel <code>channels.slack.botToken</code> <code>string</code> Bot OAuth token <code>channels.slack.appToken</code> <code>string</code> App-level token for Socket Mode <code>channels.slack.signingSecret</code> <code>string</code> Signing secret for request verification"},{"location":"configuration/#tools","title":"Tools","text":""},{"location":"configuration/#exec-tool","title":"Exec Tool","text":"Key Type Default Description <code>tools.exec.defaultTimeout</code> <code>duration</code> Default timeout for shell command execution <code>tools.exec.allowBackground</code> <code>bool</code> <code>true</code> Allow background command execution <code>tools.exec.workDir</code> <code>string</code> Working directory for command execution"},{"location":"configuration/#filesystem-tool","title":"Filesystem Tool","text":"Key Type Default Description <code>tools.filesystem.maxReadSize</code> <code>int</code> Maximum file read size in bytes <code>tools.filesystem.allowedPaths</code> <code>[]string</code> Allowed filesystem paths (empty = all)"},{"location":"configuration/#browser-tool","title":"Browser Tool","text":"Key Type Default Description <code>tools.browser.enabled</code> <code>bool</code> <code>false</code> Enable browser automation tool <code>tools.browser.headless</code> <code>bool</code> <code>true</code> Run browser in headless mode <code>tools.browser.sessionTimeout</code> <code>duration</code> <code>5m</code> Browser session timeout"},{"location":"configuration/#knowledge","title":"Knowledge","text":"Key Type Default Description <code>knowledge.enabled</code> <code>bool</code> <code>false</code> Enable the knowledge system <code>knowledge.maxContextPerLayer</code> <code>int</code> <code>5</code> Maximum context items per knowledge layer"},{"location":"configuration/#skill","title":"Skill","text":"Key Type Default Description <code>skill.enabled</code> <code>bool</code> <code>false</code> Enable the skill system <code>skill.skillsDir</code> <code>string</code> <code>~/.lango/skills</code> Directory for skill files <code>skill.allowImport</code> <code>bool</code> <code>false</code> Allow importing skills from external sources <code>skill.maxBulkImport</code> <code>int</code> <code>50</code> Maximum skills per bulk import <code>skill.importConcurrency</code> <code>int</code> <code>5</code> Concurrent import workers <code>skill.importTimeout</code> <code>duration</code> <code>2m</code> Timeout per skill import"},{"location":"configuration/#observational-memory","title":"Observational Memory","text":"<p>Settings: <code>lango settings</code> \u2192 Observational Memory</p> <pre><code>{\n  \"observationalMemory\": {\n    \"enabled\": false,\n    \"provider\": \"\",\n    \"model\": \"\",\n    \"messageTokenThreshold\": 1000,\n    \"observationTokenThreshold\": 2000,\n    \"maxMessageTokenBudget\": 8000,\n    \"maxReflectionsInContext\": 5,\n    \"maxObservationsInContext\": 20\n  }\n}\n</code></pre> Key Type Default Description <code>observationalMemory.enabled</code> <code>bool</code> <code>false</code> Enable observational memory <code>observationalMemory.provider</code> <code>string</code> AI provider for memory extraction (empty = agent default) <code>observationalMemory.model</code> <code>string</code> Model for memory extraction (empty = agent default) <code>observationalMemory.messageTokenThreshold</code> <code>int</code> <code>1000</code> Minimum tokens in recent messages before triggering observation <code>observationalMemory.observationTokenThreshold</code> <code>int</code> <code>2000</code> Token threshold to trigger reflection <code>observationalMemory.maxMessageTokenBudget</code> <code>int</code> <code>8000</code> Max tokens to include from message history <code>observationalMemory.maxReflectionsInContext</code> <code>int</code> <code>5</code> Max reflections injected into LLM context <code>observationalMemory.maxObservationsInContext</code> <code>int</code> <code>20</code> Max observations injected into LLM context"},{"location":"configuration/#embedding-rag","title":"Embedding &amp; RAG","text":"<p>Settings: <code>lango settings</code> \u2192 Embedding &amp; RAG</p> <pre><code>{\n  \"embedding\": {\n    \"providerID\": \"my-openai\",\n    \"provider\": \"\",\n    \"model\": \"text-embedding-3-small\",\n    \"dimensions\": 1536,\n    \"local\": {\n      \"baseUrl\": \"http://localhost:11434/v1\",\n      \"model\": \"\"\n    },\n    \"rag\": {\n      \"enabled\": false,\n      \"maxResults\": 5,\n      \"collections\": []\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>embedding.providerID</code> <code>string</code> References a key in the <code>providers</code> map <code>embedding.provider</code> <code>string</code> Embedding provider type (set to <code>local</code> for Ollama) <code>embedding.model</code> <code>string</code> Embedding model identifier <code>embedding.dimensions</code> <code>int</code> Embedding vector dimensionality <code>embedding.local.baseUrl</code> <code>string</code> Local embedding service URL (e.g., Ollama) <code>embedding.local.model</code> <code>string</code> Model override for local provider <code>embedding.rag.enabled</code> <code>bool</code> <code>false</code> Enable RAG retrieval <code>embedding.rag.maxResults</code> <code>int</code> Maximum results per RAG query <code>embedding.rag.collections</code> <code>[]string</code> Collection names to search (empty = all)"},{"location":"configuration/#graph","title":"Graph","text":"<p>Settings: <code>lango settings</code> \u2192 Graph Store</p> <pre><code>{\n  \"graph\": {\n    \"enabled\": false,\n    \"backend\": \"bolt\",\n    \"databasePath\": \"~/.lango/graph.db\",\n    \"maxTraversalDepth\": 2,\n    \"maxExpansionResults\": 10\n  }\n}\n</code></pre> Key Type Default Description <code>graph.enabled</code> <code>bool</code> <code>false</code> Enable the knowledge graph <code>graph.backend</code> <code>string</code> <code>bolt</code> Graph storage backend (<code>bolt</code>) <code>graph.databasePath</code> <code>string</code> Path to the graph database file <code>graph.maxTraversalDepth</code> <code>int</code> <code>2</code> Max depth for graph traversal in Graph RAG <code>graph.maxExpansionResults</code> <code>int</code> <code>10</code> Max results from graph expansion"},{"location":"configuration/#a2a-protocol","title":"A2A Protocol","text":"<p>Experimental</p> <p>The A2A protocol is experimental. See A2A Protocol.</p> <p>Settings: <code>lango settings</code> \u2192 A2A Protocol</p> <pre><code>{\n  \"a2a\": {\n    \"enabled\": false,\n    \"baseUrl\": \"\",\n    \"agentName\": \"\",\n    \"agentDescription\": \"\",\n    \"remoteAgents\": [\n      {\n        \"name\": \"code-reviewer\",\n        \"agentCardUrl\": \"https://reviewer.example.com/.well-known/agent.json\"\n      }\n    ]\n  }\n}\n</code></pre> Key Type Default Description <code>a2a.enabled</code> <code>bool</code> <code>false</code> Enable A2A protocol support <code>a2a.baseUrl</code> <code>string</code> External URL where this agent is reachable <code>a2a.agentName</code> <code>string</code> Name advertised in the Agent Card <code>a2a.agentDescription</code> <code>string</code> Description in the Agent Card <code>a2a.remoteAgents</code> <code>[]object</code> List of remote agents to connect to <p>Each remote agent entry:</p> Key Type Description <code>a2a.remoteAgents[].name</code> <code>string</code> Display name for the remote agent <code>a2a.remoteAgents[].agentCardUrl</code> <code>string</code> URL to the remote agent's agent card"},{"location":"configuration/#payment","title":"Payment","text":"<p>Experimental</p> <p>The payment system is experimental. See Payments.</p> <p>Settings: <code>lango settings</code> \u2192 Payment</p> <pre><code>{\n  \"payment\": {\n    \"enabled\": false,\n    \"walletProvider\": \"local\",\n    \"network\": {\n      \"chainId\": 84532,\n      \"rpcUrl\": \"https://sepolia.base.org\",\n      \"usdcContract\": \"0x036CbD53842c5426634e7929541eC2318f3dCF7e\"\n    },\n    \"limits\": {\n      \"maxPerTx\": \"1.00\",\n      \"maxDaily\": \"10.00\",\n      \"autoApproveBelow\": \"\"\n    },\n    \"x402\": {\n      \"autoIntercept\": false,\n      \"maxAutoPayAmount\": \"\"\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>payment.enabled</code> <code>bool</code> <code>false</code> Enable blockchain payment features <code>payment.walletProvider</code> <code>string</code> <code>local</code> Wallet backend: <code>local</code>, <code>rpc</code>, <code>composite</code> <code>payment.network.chainId</code> <code>int</code> <code>84532</code> EVM chain ID (84532 = Base Sepolia) <code>payment.network.rpcUrl</code> <code>string</code> JSON-RPC endpoint for the blockchain network <code>payment.network.usdcContract</code> <code>string</code> USDC token contract address <code>payment.limits.maxPerTx</code> <code>string</code> <code>1.00</code> Maximum USDC per transaction <code>payment.limits.maxDaily</code> <code>string</code> <code>10.00</code> Maximum daily USDC spending <code>payment.limits.autoApproveBelow</code> <code>string</code> Auto-approve payments below this amount <code>payment.x402.autoIntercept</code> <code>bool</code> <code>false</code> Enable X402 auto-interception for paid APIs <code>payment.x402.maxAutoPayAmount</code> <code>string</code> Maximum auto-pay amount for X402 requests"},{"location":"configuration/#p2p-network","title":"P2P Network","text":"<p>Experimental</p> <p>The P2P networking system is experimental. See P2P Network.</p> <p>Settings: <code>lango settings</code> \u2192 P2P Network</p> <pre><code>{\n  \"p2p\": {\n    \"enabled\": false,\n    \"listenAddrs\": [\"/ip4/0.0.0.0/tcp/9000\"],\n    \"bootstrapPeers\": [],\n    \"keyDir\": \"~/.lango/p2p\",\n    \"enableRelay\": false,\n    \"enableMdns\": true,\n    \"maxPeers\": 50,\n    \"handshakeTimeout\": \"30s\",\n    \"sessionTokenTtl\": \"1h\",\n    \"autoApproveKnownPeers\": false,\n    \"requireSignedChallenge\": false,\n    \"firewallRules\": [],\n    \"gossipInterval\": \"30s\",\n    \"zkHandshake\": false,\n    \"zkAttestation\": false,\n    \"zkp\": {\n      \"proofCacheDir\": \"~/.lango/zkp\",\n      \"provingScheme\": \"plonk\",\n      \"srsMode\": \"unsafe\",\n      \"srsPath\": \"\",\n      \"maxCredentialAge\": \"24h\"\n    },\n    \"toolIsolation\": {\n      \"enabled\": false,\n      \"timeoutPerTool\": \"30s\",\n      \"maxMemoryMB\": 512,\n      \"container\": {\n        \"enabled\": false,\n        \"runtime\": \"auto\",\n        \"image\": \"lango-sandbox:latest\",\n        \"networkMode\": \"none\",\n        \"readOnlyRootfs\": true,\n        \"poolSize\": 0,\n        \"poolIdleTimeout\": \"5m\"\n      }\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>p2p.enabled</code> <code>bool</code> <code>false</code> Enable P2P networking <code>p2p.listenAddrs</code> <code>[]string</code> <code>[\"/ip4/0.0.0.0/tcp/9000\"]</code> Multiaddrs to listen on <code>p2p.bootstrapPeers</code> <code>[]string</code> <code>[]</code> Initial peers for DHT bootstrapping <code>p2p.keyDir</code> <code>string</code> <code>~/.lango/p2p</code> Directory for node key persistence <code>p2p.enableRelay</code> <code>bool</code> <code>false</code> Act as relay for NAT traversal <code>p2p.enableMdns</code> <code>bool</code> <code>true</code> Enable mDNS for LAN discovery <code>p2p.maxPeers</code> <code>int</code> <code>50</code> Maximum connected peers <code>p2p.handshakeTimeout</code> <code>duration</code> <code>30s</code> Maximum handshake duration <code>p2p.sessionTokenTtl</code> <code>duration</code> <code>1h</code> Session token lifetime <code>p2p.autoApproveKnownPeers</code> <code>bool</code> <code>false</code> Skip approval for known peers <code>p2p.firewallRules</code> <code>[]object</code> <code>[]</code> Static firewall ACL rules <code>p2p.gossipInterval</code> <code>duration</code> <code>30s</code> Agent card gossip interval <code>p2p.zkHandshake</code> <code>bool</code> <code>false</code> Enable ZK-enhanced handshake <code>p2p.zkAttestation</code> <code>bool</code> <code>false</code> Enable ZK attestation on responses <code>p2p.requireSignedChallenge</code> <code>bool</code> <code>false</code> Reject unsigned (v1.0) challenges; require v1.1 signed challenges <code>p2p.zkp.proofCacheDir</code> <code>string</code> <code>~/.lango/zkp</code> ZKP circuit cache directory <code>p2p.zkp.provingScheme</code> <code>string</code> <code>plonk</code> ZKP proving scheme: <code>plonk</code> or <code>groth16</code> <code>p2p.zkp.srsMode</code> <code>string</code> <code>unsafe</code> SRS generation mode: <code>unsafe</code> (deterministic) or <code>file</code> (trusted ceremony) <code>p2p.zkp.srsPath</code> <code>string</code> Path to SRS file (when <code>srsMode = \"file\"</code>) <code>p2p.zkp.maxCredentialAge</code> <code>string</code> <code>24h</code> Maximum age for ZK credentials before rejection <p>Each firewall rule entry:</p> Key Type Description <code>firewallRules[].peerDid</code> <code>string</code> Peer DID (<code>\"*\"</code> for all peers) <code>firewallRules[].action</code> <code>string</code> <code>\"allow\"</code> or <code>\"deny\"</code> <code>firewallRules[].tools</code> <code>[]string</code> Tool name patterns (empty = all) <code>firewallRules[].rateLimit</code> <code>int</code> Max requests/min (0 = unlimited)"},{"location":"configuration/#p2p-pricing","title":"P2P Pricing","text":"Key Type Default Description <code>p2p.pricing.enabled</code> <code>bool</code> <code>false</code> Enable paid P2P tool invocations <code>p2p.pricing.perQuery</code> <code>string</code> Default price per query in USDC (e.g., <code>\"0.10\"</code>) <code>p2p.pricing.toolPrices</code> <code>map[string]string</code> Map of tool names to specific prices in USDC"},{"location":"configuration/#p2p-owner-protection","title":"P2P Owner Protection","text":"Key Type Default Description <code>p2p.ownerProtection.ownerName</code> <code>string</code> Owner name to block from P2P responses <code>p2p.ownerProtection.ownerEmail</code> <code>string</code> Owner email to block from P2P responses <code>p2p.ownerProtection.ownerPhone</code> <code>string</code> Owner phone to block from P2P responses <code>p2p.ownerProtection.extraTerms</code> <code>[]string</code> Additional terms to block from P2P responses <code>p2p.ownerProtection.blockConversations</code> <code>bool</code> <code>true</code> Block conversation data in P2P responses"},{"location":"configuration/#p2p-reputation","title":"P2P Reputation","text":"Key Type Default Description <code>p2p.minTrustScore</code> <code>float64</code> <code>0.3</code> Minimum trust score to accept P2P requests (0.0 - 1.0)"},{"location":"configuration/#p2p-tool-isolation","title":"P2P Tool Isolation","text":"Key Type Default Description <code>p2p.toolIsolation.enabled</code> <code>bool</code> <code>false</code> Enable subprocess isolation for remote peer tool invocations <code>p2p.toolIsolation.timeoutPerTool</code> <code>duration</code> <code>30s</code> Maximum duration for a single tool execution <code>p2p.toolIsolation.maxMemoryMB</code> <code>int</code> <code>512</code> Soft memory limit per subprocess in megabytes <code>p2p.toolIsolation.container.enabled</code> <code>bool</code> <code>false</code> Use container-based sandbox instead of subprocess <code>p2p.toolIsolation.container.runtime</code> <code>string</code> <code>auto</code> Container runtime: <code>auto</code>, <code>docker</code>, <code>gvisor</code>, <code>native</code> <code>p2p.toolIsolation.container.image</code> <code>string</code> <code>lango-sandbox:latest</code> Docker image for sandbox container <code>p2p.toolIsolation.container.networkMode</code> <code>string</code> <code>none</code> Docker network mode for sandbox containers <code>p2p.toolIsolation.container.readOnlyRootfs</code> <code>bool</code> <code>true</code> Mount container root filesystem as read-only <code>p2p.toolIsolation.container.cpuQuotaUs</code> <code>int</code> <code>0</code> Docker CPU quota in microseconds (0 = unlimited) <code>p2p.toolIsolation.container.poolSize</code> <code>int</code> <code>0</code> Pre-warmed containers in pool (0 = disabled) <code>p2p.toolIsolation.container.poolIdleTimeout</code> <code>duration</code> <code>5m</code> Idle timeout before pool containers are recycled"},{"location":"configuration/#cron","title":"Cron","text":"<p>See Cron Scheduling for usage details and CLI reference.</p> <p>Settings: <code>lango settings</code> \u2192 Cron Scheduler</p> <pre><code>{\n  \"cron\": {\n    \"enabled\": false,\n    \"timezone\": \"UTC\",\n    \"maxConcurrentJobs\": 5,\n    \"defaultSessionMode\": \"isolated\",\n    \"historyRetention\": \"720h\",\n    \"defaultDeliverTo\": []\n  }\n}\n</code></pre> Key Type Default Description <code>cron.enabled</code> <code>bool</code> <code>false</code> Enable the cron scheduling system <code>cron.timezone</code> <code>string</code> <code>UTC</code> Default timezone for cron expressions <code>cron.maxConcurrentJobs</code> <code>int</code> <code>5</code> Maximum concurrently executing jobs <code>cron.defaultSessionMode</code> <code>string</code> <code>isolated</code> Default session mode: <code>isolated</code> or <code>main</code> <code>cron.historyRetention</code> <code>duration</code> <code>720h</code> How long to retain execution history (30 days) <code>cron.defaultDeliverTo</code> <code>[]string</code> <code>[]</code> Default delivery channels for job results"},{"location":"configuration/#background","title":"Background","text":"<p>Experimental</p> <p>Background tasks are experimental. See Background Tasks.</p> <p>Settings: <code>lango settings</code> \u2192 Background Tasks</p> <pre><code>{\n  \"background\": {\n    \"enabled\": false,\n    \"yieldMs\": 30000,\n    \"maxConcurrentTasks\": 3,\n    \"defaultDeliverTo\": []\n  }\n}\n</code></pre> Key Type Default Description <code>background.enabled</code> <code>bool</code> <code>false</code> Enable the background task system <code>background.yieldMs</code> <code>int</code> <code>30000</code> Auto-yield threshold in milliseconds <code>background.maxConcurrentTasks</code> <code>int</code> <code>3</code> Maximum concurrently running tasks <code>background.defaultDeliverTo</code> <code>[]string</code> <code>[]</code> Default delivery channels for task results"},{"location":"configuration/#workflow","title":"Workflow","text":"<p>Experimental</p> <p>The workflow engine is experimental. See Workflow Engine and CLI reference.</p> <p>Settings: <code>lango settings</code> \u2192 Workflow Engine</p> <pre><code>{\n  \"workflow\": {\n    \"enabled\": false,\n    \"maxConcurrentSteps\": 4,\n    \"defaultTimeout\": \"10m\",\n    \"stateDir\": \"~/.lango/workflows/\",\n    \"defaultDeliverTo\": []\n  }\n}\n</code></pre> Key Type Default Description <code>workflow.enabled</code> <code>bool</code> <code>false</code> Enable the workflow engine <code>workflow.maxConcurrentSteps</code> <code>int</code> <code>4</code> Maximum steps running in parallel <code>workflow.defaultTimeout</code> <code>duration</code> <code>10m</code> Default timeout per workflow step <code>workflow.stateDir</code> <code>string</code> <code>~/.lango/workflows/</code> Directory for workflow state files <code>workflow.defaultDeliverTo</code> <code>[]string</code> <code>[]</code> Default delivery channels for workflow results"},{"location":"configuration/#librarian","title":"Librarian","text":"<p>Experimental</p> <p>The Proactive Librarian is experimental. See Proactive Librarian.</p> <p>Settings: <code>lango settings</code> \u2192 Librarian</p> <pre><code>{\n  \"librarian\": {\n    \"enabled\": false,\n    \"observationThreshold\": 2,\n    \"inquiryCooldownTurns\": 3,\n    \"maxPendingInquiries\": 2,\n    \"autoSaveConfidence\": \"high\",\n    \"provider\": \"\",\n    \"model\": \"\"\n  }\n}\n</code></pre> Key Type Default Description <code>librarian.enabled</code> <code>bool</code> <code>false</code> Enable the Proactive Librarian <code>librarian.observationThreshold</code> <code>int</code> <code>2</code> Observations needed before triggering inquiry <code>librarian.inquiryCooldownTurns</code> <code>int</code> <code>3</code> Minimum turns between inquiries <code>librarian.maxPendingInquiries</code> <code>int</code> <code>2</code> Maximum pending inquiries at once <code>librarian.autoSaveConfidence</code> <code>string</code> <code>high</code> Confidence level for auto-saving: <code>low</code>, <code>medium</code>, <code>high</code> <code>librarian.provider</code> <code>string</code> AI provider for librarian (empty = agent default) <code>librarian.model</code> <code>string</code> Model for librarian (empty = agent default)"},{"location":"configuration/#environment-variable-substitution","title":"Environment Variable Substitution","text":"<p>String configuration values support <code>${ENV_VAR}</code> syntax for environment variable substitution. This is useful for sensitive values like API keys and tokens:</p> <pre><code>{\n  \"providers\": {\n    \"my-provider\": {\n      \"type\": \"anthropic\",\n      \"apiKey\": \"${ANTHROPIC_API_KEY}\"\n    }\n  },\n  \"channels\": {\n    \"telegram\": {\n      \"botToken\": \"${TELEGRAM_BOT_TOKEN}\"\n    }\n  }\n}\n</code></pre>"},{"location":"architecture/","title":"Architecture","text":"<p>This section describes the internal architecture of Lango, a Go-based AI agent framework built on Google ADK v0.4.0.</p> <ul> <li> <p> System Overview</p> <p>High-level architecture layers, component interactions, and a visual diagram of how Lango processes messages from channels through the agent runtime to AI providers.</p> </li> <li> <p> Project Structure</p> <p>Complete directory layout with descriptions of every package, explaining what each module owns and how packages relate to each other.</p> </li> <li> <p> Data Flow</p> <p>End-to-end message flow, the bootstrap/wiring process, and async buffer patterns used for embedding generation and graph indexing.</p> </li> </ul>"},{"location":"architecture/data-flow/","title":"Data Flow","text":"<p>This page describes how messages flow through Lango, how the application bootstraps and wires its components, and how async processing buffers work.</p>"},{"location":"architecture/data-flow/#message-flow","title":"Message Flow","text":"<p>The following diagram shows the end-to-end path of a user message from input to response.</p> <pre><code>sequenceDiagram\n    participant User\n    participant Channel as Channel / Gateway\n    participant App\n    participant ADK as ADK Agent\n    participant CTX as ContextAwareModel\n    participant Provider as AI Provider\n    participant Tools as Tool Execution\n\n    User-&gt;&gt;Channel: Send message\n    Channel-&gt;&gt;App: Forward to app.runAgent()\n    App-&gt;&gt;ADK: agent.Run(sessionID, input)\n    ADK-&gt;&gt;CTX: GenerateContent(LLMRequest)\n\n    par Parallel Context Retrieval\n        CTX-&gt;&gt;CTX: Knowledge retrieval&lt;br/&gt;(8-layer ContextRetriever)\n        CTX-&gt;&gt;CTX: RAG / Graph RAG search&lt;br/&gt;(vector + graph expansion)\n        CTX-&gt;&gt;CTX: Memory retrieval&lt;br/&gt;(observations + reflections)\n    end\n\n    CTX-&gt;&gt;CTX: Assemble augmented&lt;br/&gt;system prompt\n    CTX-&gt;&gt;Provider: GenerateContent&lt;br/&gt;(augmented request)\n    Provider--&gt;&gt;CTX: LLM response (streaming)\n\n    alt Tool call requested\n        CTX--&gt;&gt;ADK: Response with tool calls\n        ADK-&gt;&gt;Tools: Execute tool(s)\n        Tools--&gt;&gt;ADK: Tool results\n        ADK-&gt;&gt;CTX: GenerateContent&lt;br/&gt;(with tool results)\n        CTX-&gt;&gt;Provider: Forward to provider\n        Provider--&gt;&gt;CTX: Final response\n    end\n\n    CTX--&gt;&gt;ADK: Final response\n    ADK--&gt;&gt;App: Event stream\n    App--&gt;&gt;Channel: Response text\n    Channel--&gt;&gt;User: Display response\n\n    Note over Channel,App: After turn completes:\n    Channel-&gt;&gt;App: OnTurnComplete callback\n\n    par Async Post-Processing\n        App-&gt;&gt;App: MemoryBuffer.Trigger()\n        App-&gt;&gt;App: AnalysisBuffer.Trigger()\n        App-&gt;&gt;App: LibrarianBuffer.Trigger()\n    end</code></pre>"},{"location":"architecture/data-flow/#flow-description","title":"Flow Description","text":"<ol> <li> <p>Input. A user sends a message through any channel (Telegram, Discord, Slack, CLI, WebSocket, or HTTP). The channel adapter normalizes the message and forwards it to the application.</p> </li> <li> <p>Session resolution. The application resolves a session key from the channel context and injects it into the Go context via <code>session.SessionKeyFromContext</code>.</p> </li> <li> <p>Agent execution. <code>ADK Agent.Run()</code> creates user content and passes it to the ADK runner, which calls <code>GenerateContent</code> on the model.</p> </li> <li> <p>Context assembly. The <code>ContextAwareModelAdapter</code> intercepts <code>GenerateContent</code>. It extracts the last user message and runs three retrieval pipelines in parallel using <code>errgroup</code>:</p> <ul> <li>Knowledge retrieval queries the 8-layer <code>ContextRetriever</code> for relevant knowledge entries, tool descriptions, runtime context, and skill patterns.</li> <li>RAG / Graph RAG performs vector similarity search. If Graph RAG is enabled, it additionally expands results through the triple store to discover structurally connected context.</li> <li>Memory retrieval loads recent observations and reflections for the current session.</li> </ul> </li> <li> <p>Prompt augmentation. The retrieved context is appended to the base system prompt as structured sections (Knowledge Context, Semantic Context, Conversation Memory). The augmented prompt is set as the <code>SystemInstruction</code> on the request.</p> </li> <li> <p>Provider call. The augmented request is forwarded to the configured AI provider (OpenAI, Gemini, or Claude) via the <code>Supervisor.ProviderProxy</code>.</p> </li> <li> <p>Tool execution. If the provider's response contains tool calls, the ADK runner executes each tool and feeds results back for another LLM round. Tools may go through the approval provider first if approval policy is enabled.</p> </li> <li> <p>Response delivery. The final text response streams back through the ADK runner to the channel, which formats and delivers it to the user.</p> </li> <li> <p>Post-processing. After the turn completes, the Gateway fires <code>OnTurnComplete</code> callbacks that trigger async buffers for memory observation, conversation analysis, and proactive librarian processing.</p> </li> </ol>"},{"location":"architecture/data-flow/#bootstrap-and-wiring","title":"Bootstrap and Wiring","text":"<p>The application startup follows a two-phase process: bootstrap (database and crypto) followed by component wiring.</p> <pre><code>graph TD\n    BOOT[\"bootstrap.Run()\"] --&gt; DB[\"Open SQLite Database\"]\n    BOOT --&gt; CRYPTO[\"Initialize Crypto Provider&lt;br/&gt;(passphrase prompt)\"]\n    BOOT --&gt; PROFILE[\"Load Config Profile\"]\n    DB --&gt; RESULT[\"bootstrap.Result&lt;br/&gt;(DBClient, Crypto, Config)\"]\n    CRYPTO --&gt; RESULT\n    PROFILE --&gt; RESULT\n\n    RESULT --&gt; APP[\"app.New(boot)\"]\n\n    APP --&gt; S1[\"1. initSupervisor()\"]\n    APP --&gt; S2[\"2. initSessionStore()\"]\n    APP --&gt; S3[\"3. initSecurity()\"]\n    APP --&gt; S4[\"4. buildTools()\"]\n    APP --&gt; S5[\"5. initGraphStore()\"]\n    APP --&gt; S6[\"6. initSkills()\"]\n    APP --&gt; S7[\"7. initKnowledge()\"]\n    APP --&gt; S8[\"8. initMemory()\"]\n    APP --&gt; S9[\"9. initEmbedding()\"]\n    APP --&gt; S10[\"10. wireGraphCallbacks()\"]\n    APP --&gt; S11[\"11. initConversationAnalysis()\"]\n    APP --&gt; S12[\"12. initLibrarian()\"]\n    APP --&gt; S13[\"13. initPayment() + initX402()\"]\n    APP --&gt; S14[\"14. initCron() / initBackground() / initWorkflow()\"]\n    APP --&gt; S15[\"15. initAuth()\"]\n    APP --&gt; S16[\"16. initGateway()\"]\n    APP --&gt; S17[\"17. Approval wrapping\"]\n    APP --&gt; S18[\"18. initAgent()\"]\n    APP --&gt; S19[\"19. initChannels()\"]\n    APP --&gt; S20[\"20. Wire turn callbacks\"]</code></pre>"},{"location":"architecture/data-flow/#phase-1-bootstrap-bootstraprun","title":"Phase 1: Bootstrap (<code>bootstrap.Run()</code>)","text":"<p>Before the application starts, the bootstrap phase handles three critical tasks:</p> <ul> <li>Database. Opens the SQLite database and runs Ent schema migrations. The raw <code>*sql.DB</code> handle is preserved for SQLite-vec (vector store).</li> <li>Crypto provider. For the <code>local</code> provider, prompts for a passphrase and derives encryption keys. The initialized <code>CryptoProvider</code> is passed through to avoid re-prompting.</li> <li>Config profile. Loads the active configuration profile from the encrypted config store.</li> </ul> <p>The result is a <code>bootstrap.Result</code> struct containing <code>DBClient</code>, <code>Crypto</code>, <code>RawDB</code>, and <code>Config</code> that gets passed to <code>app.New()</code>.</p>"},{"location":"architecture/data-flow/#phase-2-component-wiring-appnew","title":"Phase 2: Component Wiring (<code>app.New()</code>)","text":"<p>The <code>app.New()</code> function initializes components in dependency order. Each <code>init*</code> function follows the same pattern:</p> <ol> <li>Check the configuration flag (e.g., <code>cfg.Knowledge.Enabled</code>).</li> <li>If disabled, log and return <code>nil</code>.</li> <li>If initialization fails, log a warning and return <code>nil</code> (graceful degradation).</li> <li>If successful, return a component struct.</li> </ol> <p>This ordering ensures that dependencies are available when needed:</p> <ul> <li>Supervisor is created first because it holds provider credentials needed by tools and the agent.</li> <li>Session Store is created early because most subsystems need database access.</li> <li>Security (crypto, keys, secrets) is set up before tools that need encryption.</li> <li>Graph Store is created before Knowledge because the <code>GraphEngine</code> variant needs a graph store reference.</li> <li>Knowledge is created before Embedding because the embed callback needs the knowledge store.</li> <li>Embedding is created after Knowledge and Memory so it can wire <code>SetEmbedCallback</code> on both stores.</li> <li>Graph callbacks are wired after all stores exist, connecting the entity extractor pipeline.</li> <li>Approval wrapping happens near the end, wrapping all tools with the composite approval provider.</li> <li>Agent is created last with all tools and the fully-configured LLM (possibly wrapped with <code>ContextAwareModelAdapter</code> and <code>PIIRedactingModelAdapter</code>).</li> </ul>"},{"location":"architecture/data-flow/#async-buffer-pattern","title":"Async Buffer Pattern","text":"<p>Lango uses async buffers to decouple expensive processing (embedding generation, graph indexing, memory observation) from the request/response cycle. All buffers follow the same lifecycle pattern:</p> <pre><code>graph LR\n    SAVE[\"Store.Save()\"] --&gt;|callback| ENQUEUE[\"Buffer.Enqueue()\"]\n    ENQUEUE --&gt; QUEUE[\"Buffered Channel&lt;br/&gt;(capacity 256)\"]\n    QUEUE --&gt; WORKER[\"Background Worker\"]\n    WORKER --&gt;|batch| PROCESS[\"Process Batch\"]\n\n    START[\"Buffer.Start(wg)\"] -.-&gt;|launches| WORKER\n    STOP[\"Buffer.Stop()\"] -.-&gt;|signals| WORKER</code></pre>"},{"location":"architecture/data-flow/#lifecycle","title":"Lifecycle","text":"Method Description <code>Start(wg *sync.WaitGroup)</code> Launches the background goroutine and increments the WaitGroup for graceful shutdown tracking <code>Enqueue(request)</code> Non-blocking send to the buffered channel. If the channel is full, the request is dropped and a drop counter is incremented <code>Stop()</code> Closes the stop channel, signaling the worker to drain remaining items and exit"},{"location":"architecture/data-flow/#buffer-types","title":"Buffer Types","text":"<p>EmbeddingBuffer (<code>internal/embedding/buffer.go</code>)</p> <ul> <li>Collects <code>EmbedRequest</code> items (ID, collection, content, metadata).</li> <li>Processes in batches of 32 with a 2-second flush timeout.</li> <li>Calls the embedding provider to generate vectors and stores them in SQLite-vec.</li> <li>Triggered via <code>SetEmbedCallback</code> on Knowledge Store and Memory Store.</li> </ul> <p>GraphBuffer (<code>internal/graph/buffer.go</code>)</p> <ul> <li>Collects <code>GraphRequest</code> items (lists of triples).</li> <li>Processes in batches of 64 with a 2-second flush timeout.</li> <li>Writes triples to the BoltDB triple store.</li> <li>Triggered via <code>SetGraphCallback</code> on Knowledge Store and Memory Store, plus the Entity Extractor and Learning GraphEngine.</li> </ul> <p>MemoryBuffer (<code>internal/memory/buffer.go</code>)</p> <ul> <li>Triggered by <code>OnTurnComplete</code> gateway callback.</li> <li>Checks token thresholds (message tokens, observation tokens) to decide when to run.</li> <li>Calls <code>Observer</code> to extract observations from recent messages.</li> <li>Calls <code>Reflector</code> to synthesize reflections when observation count exceeds threshold.</li> <li>Supports memory compaction via <code>SetCompactor()</code> wired to <code>EntStore.CompactMessages</code>.</li> </ul> <p>AnalysisBuffer (<code>internal/learning/analysis_buffer.go</code>)</p> <ul> <li>Triggered by <code>OnTurnComplete</code> gateway callback.</li> <li>Checks turn count and token thresholds.</li> <li>Runs <code>ConversationAnalyzer</code> for pattern extraction and <code>SessionLearner</code> for knowledge generation.</li> </ul> <p>LibrarianProactiveBuffer (<code>internal/librarian/buffer.go</code>)</p> <ul> <li>Triggered by <code>OnTurnComplete</code> gateway callback.</li> <li>Runs <code>ObservationAnalyzer</code> to identify knowledge gaps.</li> <li>Runs <code>InquiryProcessor</code> to generate and auto-resolve inquiries above a confidence threshold.</li> </ul>"},{"location":"architecture/data-flow/#callback-wiring","title":"Callback Wiring","text":"<p>The callback pattern avoids import cycles between intelligence subsystems. Instead of direct function calls, stores expose setter methods for callbacks:</p> <pre><code>Knowledge Store \u2500\u2500SetEmbedCallback\u2500\u2500&gt; EmbeddingBuffer.Enqueue()\nKnowledge Store \u2500\u2500SetGraphCallback\u2500\u2500&gt; GraphBuffer.Enqueue()\nMemory Store    \u2500\u2500SetEmbedCallback\u2500\u2500&gt; EmbeddingBuffer.Enqueue()\nMemory Store    \u2500\u2500SetGraphCallback\u2500\u2500&gt; GraphBuffer.Enqueue()\nMemory Store    \u2500\u2500SetGraphHooks\u2500\u2500\u2500\u2500&gt; GraphBuffer.Enqueue() (temporal/session triples)\nLearning Engine \u2500\u2500SetGraphCallback\u2500\u2500&gt; GraphBuffer.Enqueue() (confidence triples)\n</code></pre> <p>This wiring happens in <code>app.New()</code> after all components are initialized. The stores have no compile-time dependency on the buffers -- they only know about the callback function signature.</p>"},{"location":"architecture/overview/","title":"System Overview","text":"<p>Lango is organized into four architectural layers. Each layer has a clear responsibility boundary, and dependencies flow strictly downward: Presentation depends on Agent, Agent depends on Intelligence, and all layers depend on Infrastructure.</p>"},{"location":"architecture/overview/#architecture-diagram","title":"Architecture Diagram","text":"<pre><code>graph TB\n    subgraph Presentation[\"Presentation Layer\"]\n        CLI[\"CLI (Cobra)\"]\n        TUI[\"TUI\"]\n        TG[\"Telegram\"]\n        DC[\"Discord\"]\n        SL[\"Slack\"]\n        GW[\"Gateway&lt;br/&gt;(HTTP/WebSocket)\"]\n    end\n\n    subgraph AgentLayer[\"Agent Layer\"]\n        ADK[\"ADK Agent&lt;br/&gt;(Google ADK v0.4.0)\"]\n        ORCH[\"Orchestration&lt;br/&gt;(Multi-Agent)\"]\n        TOOLS[\"Tools&lt;br/&gt;(exec, fs, browser,&lt;br/&gt;crypto, payment)\"]\n        SKILL[\"Skills&lt;br/&gt;(30 embedded defaults)\"]\n        A2A[\"A2A Protocol&lt;br/&gt;(Remote Agents)\"]\n    end\n\n    subgraph Intelligence[\"Intelligence Layer\"]\n        KS[\"Knowledge Store&lt;br/&gt;(8-layer context)\"]\n        LE[\"Learning Engine&lt;br/&gt;(Self-Learning Graph)\"]\n        MEM[\"Observational Memory&lt;br/&gt;(Observer + Reflector)\"]\n        EMB[\"Embedding / RAG&lt;br/&gt;(Vector Search)\"]\n        GR[\"Graph Store&lt;br/&gt;(BoltDB Triple Store)\"]\n        GRAM[\"Graph RAG&lt;br/&gt;(Hybrid Retrieval)\"]\n        LIB[\"Librarian&lt;br/&gt;(Proactive Extraction)\"]\n    end\n\n    subgraph Infra[\"Infrastructure Layer\"]\n        CFG[\"Config\"]\n        SEC[\"Security&lt;br/&gt;(Crypto, Secrets)\"]\n        SESS[\"Session Store&lt;br/&gt;(Ent/SQLite)\"]\n        LOG[\"Logging (Zap)\"]\n        PAY[\"Payment&lt;br/&gt;(USDC, X402)\"]\n        PROV[\"AI Providers&lt;br/&gt;(OpenAI, Gemini, Claude)\"]\n        AUTO[\"Automation&lt;br/&gt;(Cron, Background,&lt;br/&gt;Workflow)\"]\n    end\n\n    CLI --&gt; GW\n    TUI --&gt; GW\n    TG --&gt; GW\n    DC --&gt; GW\n    SL --&gt; GW\n    GW --&gt; ADK\n    ADK --&gt; ORCH\n    ADK --&gt; TOOLS\n    ADK --&gt; SKILL\n    ORCH --&gt; A2A\n    ADK --&gt; PROV\n    ADK --&gt; KS\n    ADK --&gt; MEM\n    ADK --&gt; EMB\n    KS --&gt; LE\n    EMB --&gt; GR\n    GR --&gt; GRAM\n    KS --&gt; LIB\n    MEM --&gt; LIB\n    ADK --&gt; SESS\n    TOOLS --&gt; SEC\n    PAY --&gt; SEC\n    AUTO --&gt; ADK</code></pre>"},{"location":"architecture/overview/#layer-descriptions","title":"Layer Descriptions","text":""},{"location":"architecture/overview/#presentation-layer","title":"Presentation Layer","text":"<p>The presentation layer handles all user-facing interactions. It contains no business logic -- each component is a thin adapter that accepts input, forwards it to the Agent layer via the Gateway, and formats the response for output.</p> Component Package Role CLI <code>cmd/lango/</code>, <code>internal/cli/</code> Cobra-based command tree (<code>lango agent</code>, <code>lango memory</code>, <code>lango graph</code>, etc.) TUI <code>internal/cli/tui/</code> Terminal UI components for interactive sessions Channels <code>internal/channels/</code> Telegram, Discord, and Slack bot integrations Gateway <code>internal/gateway/</code> HTTP REST and WebSocket server with OIDC auth support, chi router"},{"location":"architecture/overview/#agent-layer","title":"Agent Layer","text":"<p>The agent layer is the core runtime. It manages the AI agent lifecycle, tool execution, prompt assembly, and multi-agent orchestration.</p> Component Package Role ADK Agent <code>internal/adk/</code> Wraps Google ADK v0.4.0 (<code>llmagent.New</code>, <code>runner.Runner</code>). Provides <code>Run</code>, <code>RunAndCollect</code>, and <code>RunStreaming</code> methods Context-Aware Model <code>internal/adk/context_model.go</code> <code>ContextAwareModelAdapter</code> intercepts every LLM call to inject knowledge, memory, RAG, and Graph RAG context into the system prompt. Retrieval runs in parallel via <code>errgroup</code> Tool Adaptation <code>internal/adk/tools.go</code> <code>AdaptTool()</code> converts internal <code>agent.Tool</code> definitions to ADK <code>tool.Tool</code> format with JSON Schema parameters Orchestration <code>internal/orchestration/</code> Multi-agent tree with sub-agents: Operator, Navigator, Vault, Librarian, Automator, Planner, Chronicler A2A <code>internal/a2a/</code> Agent-to-Agent protocol server for remote agent discovery and delegation Skills <code>internal/skill/</code> File-based skill system with 30 embedded default skills deployed via <code>go:embed</code> Approval <code>internal/approval/</code> Composite approval provider that routes sensitive tool execution confirmations to the appropriate channel (Gateway WebSocket, TTY, or headless auto-approve)"},{"location":"architecture/overview/#intelligence-layer","title":"Intelligence Layer","text":"<p>The intelligence layer provides the agent with persistent knowledge, learning capabilities, and semantic retrieval. All components are optional and enabled via configuration flags.</p> Component Package Role Knowledge Store <code>internal/knowledge/</code> Ent-backed store with an 8-layer <code>ContextRetriever</code> (runtime context, tool registry, user knowledge, skill patterns, external knowledge, agent learnings, pending inquiries, conversation analysis) Learning Engine <code>internal/learning/</code> Extracts patterns from tool results. <code>GraphEngine</code> variant adds confidence propagation (rate 0.3) and triple generation Observational Memory <code>internal/memory/</code> <code>Observer</code> extracts observations from conversation turns, <code>Reflector</code> synthesizes reflections, <code>Buffer</code> manages async processing with token thresholds Embedding / RAG <code>internal/embedding/</code> Multi-provider embedding (OpenAI, Google, local), SQLite-vec vector store, <code>RAGService</code> for semantic retrieval Graph Store <code>internal/graph/</code> BoltDB-backed triple store with SPO/POS/OSP indexes. <code>Extractor</code> uses LLM for entity/relation extraction Graph RAG <code>internal/graph/</code> 2-phase hybrid retrieval: vector search finds seed results, then graph expansion discovers structurally connected context Librarian <code>internal/librarian/</code> Proactive knowledge extraction: <code>ObservationAnalyzer</code> identifies knowledge gaps, <code>InquiryProcessor</code> generates and resolves inquiries"},{"location":"architecture/overview/#infrastructure-layer","title":"Infrastructure Layer","text":"<p>The infrastructure layer provides foundational services that all other layers depend on.</p> Component Package Role Config <code>internal/config/</code> YAML config loading with environment variable substitution and validation Config Store <code>internal/configstore/</code> Encrypted config profile storage (Ent-backed) Security <code>internal/security/</code> Crypto providers (local passphrase-derived, RPC), key registry, secrets store, companion discovery Session <code>internal/session/</code> Ent/SQLite session store with TTL and max history turns Logging <code>internal/logging/</code> Structured logging via Zap with per-package loggers AI Providers <code>internal/provider/</code> Unified interface with implementations for OpenAI, Google Gemini, and Anthropic Claude Supervisor <code>internal/supervisor/</code> Provider proxy for credential management, privileged tool execution, fallback provider chains Payment <code>internal/payment/</code>, <code>internal/wallet/</code>, <code>internal/x402/</code> USDC payments on EVM chains, wallet providers (local/RPC/composite), spending limiter, X402 V2 payment protocol Automation <code>internal/cron/</code>, <code>internal/background/</code>, <code>internal/workflow/</code> Cron scheduler (robfig/cron/v3), in-memory background task manager, DAG-based YAML workflow engine Bootstrap <code>internal/bootstrap/</code> Application startup: database initialization, crypto provider setup, config profile loading"},{"location":"architecture/overview/#key-design-decisions","title":"Key Design Decisions","text":"<p>Callback pattern for async processing. Stores expose <code>SetEmbedCallback</code> and <code>SetGraphCallback</code> methods. When a knowledge entry or memory observation is saved, the callback enqueues an async request to the corresponding buffer (EmbeddingBuffer or GraphBuffer). This avoids import cycles between the intelligence subsystems.</p> <p>Optional subsystems with graceful degradation. Every intelligence component checks a config flag during initialization. If a component fails to initialize (missing dependency, database error), the application continues without it. The <code>initKnowledge</code>, <code>initMemory</code>, <code>initEmbedding</code>, <code>initGraphStore</code> functions all return <code>nil</code> on failure rather than terminating the application.</p> <p>Context-aware prompt assembly. The <code>ContextAwareModelAdapter</code> wraps the base LLM and intercepts every <code>GenerateContent</code> call. It runs knowledge retrieval, RAG search, and memory lookup in parallel using <code>errgroup</code>, then assembles the results into an augmented system prompt before forwarding to the AI provider.</p> <p>Tool adaptation layer. Internal tools use a simple <code>agent.Tool</code> struct with a map-based parameter definition. The <code>adk.AdaptTool()</code> function converts these to the ADK's <code>tool.Tool</code> interface with proper JSON Schema, allowing tools to be defined without depending on ADK types directly.</p>"},{"location":"architecture/project-structure/","title":"Project Structure","text":"<p>This page documents every top-level directory and internal package in the Lango codebase.</p>"},{"location":"architecture/project-structure/#top-level-layout","title":"Top-Level Layout","text":"<pre><code>lango/\n\u251c\u2500\u2500 cmd/lango/              # Application entry point\n\u251c\u2500\u2500 internal/               # All application packages (Go internal visibility)\n\u251c\u2500\u2500 prompts/                # Default prompt .md files (embedded via go:embed)\n\u251c\u2500\u2500 skills/                 # Skill system scaffold (go:embed)\n\u251c\u2500\u2500 openspec/               # Specifications (OpenSpec workflow)\n\u251c\u2500\u2500 docs/                   # MkDocs documentation source\n\u251c\u2500\u2500 go.mod / go.sum         # Go module definition\n\u2514\u2500\u2500 mkdocs.yml              # MkDocs configuration\n</code></pre>"},{"location":"architecture/project-structure/#cmdlango","title":"<code>cmd/lango/</code>","text":"<p>The CLI entry point. Contains <code>main.go</code> which calls the root Cobra command defined in <code>internal/cli/</code>. Follows the Go convention of <code>os.Exit</code> only in <code>main()</code> -- all other code returns errors.</p>"},{"location":"architecture/project-structure/#internal","title":"<code>internal/</code>","text":"<p>All application code lives under <code>internal/</code> to enforce Go's visibility boundary. Packages are organized by domain, not by technical layer.</p>"},{"location":"architecture/project-structure/#core-runtime","title":"Core Runtime","text":"Package Description <code>adk/</code> Google ADK v0.4.0 integration. Contains <code>Agent</code> (wraps ADK runner), <code>ModelAdapter</code> (bridges <code>provider.ProviderProxy</code> to ADK <code>model.LLM</code>), <code>ContextAwareModelAdapter</code> (injects knowledge/memory/RAG into system prompt), <code>SessionServiceAdapter</code> (bridges internal session store to ADK session interface), and <code>AdaptTool()</code> (converts <code>agent.Tool</code> to ADK <code>tool.Tool</code>) <code>agent/</code> Core agent types: <code>Tool</code> struct (name, description, parameters, handler), <code>ParameterDef</code>, <code>PII Redactor</code> (regex + optional Presidio integration), <code>SecretScanner</code> (prevents credential leakage in model output) <code>app/</code> Application bootstrap and wiring. <code>app.go</code> defines <code>New()</code> (component initialization), <code>Start()</code>, and <code>Stop()</code>. <code>wiring.go</code> contains all <code>init*</code> functions that create individual subsystems. <code>types.go</code> defines the <code>App</code> struct with all component fields. <code>tools.go</code> builds tool collections. <code>sender.go</code> provides <code>channelSender</code> adapter for delivery <code>bootstrap/</code> Pre-application startup: opens database, initializes crypto provider, loads config profile. Returns <code>bootstrap.Result</code> with shared <code>DBClient</code> and <code>Crypto</code> provider for reuse"},{"location":"architecture/project-structure/#presentation","title":"Presentation","text":"Package Description <code>cli/</code> Root Cobra command and subcommand packages <code>cli/agent/</code> <code>lango agent status</code>, <code>lango agent list</code> -- agent runtime inspection <code>cli/common/</code> Shared CLI helpers (output formatting, error display) <code>cli/doctor/</code> <code>lango doctor</code> -- system diagnostics and health checks <code>cli/graph/</code> <code>lango graph status</code>, <code>query</code>, <code>stats</code>, <code>clear</code> -- graph store management <code>cli/memory/</code> <code>lango memory list</code>, <code>status</code>, <code>clear</code> -- observational memory management <code>cli/onboard/</code> <code>lango onboard</code> -- 5-step guided setup wizard <code>cli/settings/</code> <code>lango settings</code> -- full configuration editor <code>cli/payment/</code> <code>lango payment balance</code>, <code>history</code>, <code>limits</code>, <code>info</code>, <code>send</code> -- payment operations <code>cli/cron/</code> <code>lango cron add</code>, <code>list</code>, <code>delete</code>, <code>pause</code>, <code>resume</code>, <code>history</code> -- cron job management <code>cli/bg/</code> <code>lango bg list</code>, <code>status</code>, <code>cancel</code>, <code>result</code> -- background task management <code>cli/workflow/</code> <code>lango workflow run</code>, <code>list</code>, <code>status</code>, <code>cancel</code>, <code>history</code> -- workflow management <code>cli/prompt/</code> Interactive prompt utilities for CLI input <code>cli/security/</code> <code>lango security status</code>, <code>secrets</code>, <code>migrate-passphrase</code>, <code>keyring store/clear/status</code>, <code>db-migrate</code>, <code>db-decrypt</code>, <code>kms status/test/keys</code> -- security operations <code>cli/p2p/</code> <code>lango p2p status</code>, <code>peers</code>, <code>connect</code>, <code>disconnect</code>, <code>firewall list/add/remove</code>, <code>discover</code>, <code>identity</code>, <code>reputation</code>, <code>pricing</code>, <code>session list/revoke/revoke-all</code>, <code>sandbox status/test/cleanup</code> -- P2P network management <code>cli/tui/</code> TUI components and views for interactive terminal sessions <code>channels/</code> Channel bot integrations for Telegram, Discord, and Slack. Each adapter converts platform-specific messages to the Gateway's internal format <code>gateway/</code> HTTP REST + WebSocket server built on chi router. Handles JSON-RPC over WebSocket, OIDC authentication (<code>AuthManager</code>), turn callbacks, and approval routing. Provides <code>Server.SetAgent()</code> for late-binding the agent after initialization"},{"location":"architecture/project-structure/#intelligence","title":"Intelligence","text":"Package Description <code>knowledge/</code> Ent-backed knowledge store. <code>ContextRetriever</code> implements 8-layer retrieval: runtime context, tool registry, user knowledge, skill patterns, external knowledge, agent learnings, pending inquiries, and conversation analysis. Exposes <code>SetEmbedCallback</code> and <code>SetGraphCallback</code> for async processing <code>learning/</code> Self-learning engine. <code>Engine</code> extracts patterns from tool execution results. <code>GraphEngine</code> extends <code>Engine</code> with graph triple generation and confidence propagation (rate 0.3). <code>ConversationAnalyzer</code> and <code>SessionLearner</code> analyze conversation history. <code>AnalysisBuffer</code> batches analysis with turn/token thresholds <code>memory/</code> Observational memory system. <code>Observer</code> extracts observations from conversation turns, <code>Reflector</code> synthesizes higher-level reflections, <code>Buffer</code> manages async processing with configurable token thresholds. <code>GraphHooks</code> generates temporal/session triples for the graph store. Supports compaction via <code>SetCompactor()</code> <code>embedding/</code> Multi-provider embedding pipeline. <code>Registry</code> manages providers (OpenAI, Google, local). <code>SQLiteVecStore</code> stores vectors. <code>EmbeddingBuffer</code> batches embed requests asynchronously. <code>RAGService</code> performs semantic retrieval with collection/distance filtering. <code>StoreResolver</code> resolves source IDs back to knowledge/memory content <code>graph/</code> BoltDB-backed triple store with SPO/POS/OSP indexes for efficient traversal. <code>Extractor</code> uses LLM to extract entities and relations from text. <code>GraphBuffer</code> batches triple insertions. <code>GraphRAGService</code> implements 2-phase hybrid retrieval (vector search + graph expansion) <code>librarian/</code> Proactive knowledge extraction. <code>ObservationAnalyzer</code> identifies knowledge gaps from conversation observations. <code>InquiryProcessor</code> generates questions and resolves them. <code>InquiryStore</code> persists pending inquiries. <code>ProactiveBuffer</code> manages the async pipeline with configurable thresholds <code>skill/</code> File-based skill system. <code>FileSkillStore</code> manages skill files on disk. <code>Registry</code> loads skills, deploys embedded defaults from <code>skills/</code> via <code>go:embed</code>, and converts active skills to <code>agent.Tool</code> instances"},{"location":"architecture/project-structure/#infrastructure","title":"Infrastructure","text":"Package Description <code>config/</code> YAML configuration loading with environment variable substitution (<code>${ENV_VAR}</code> syntax), validation, and defaults. Defines all config structs (<code>Config</code>, <code>AgentConfig</code>, <code>SecurityConfig</code>, etc.) <code>configstore/</code> Encrypted configuration profile storage backed by Ent ORM. Allows multiple named profiles with passphrase-derived encryption <code>security/</code> Crypto providers (<code>LocalProvider</code> with passphrase-derived keys, <code>RPCProvider</code> for remote signing). <code>KeyRegistry</code> manages encryption keys. <code>SecretsStore</code> provides encrypted secret storage. <code>RefStore</code> holds opaque references so plaintext never reaches agent context. Companion discovery for distributed setups. KMS providers (AWS KMS, GCP KMS, Azure Key Vault, PKCS#11) with retry and health checking <code>session/</code> Session persistence via Ent ORM with SQLite backend. <code>EntStore</code> implements the <code>Store</code> interface with configurable TTL and max history turns. <code>CompactMessages()</code> supports memory compaction <code>ent/</code> Ent ORM schema definitions and generated code for all database entities <code>logging/</code> Structured logging via Zap. Per-package logger instances (<code>logging.App()</code>, <code>logging.Agent()</code>, <code>logging.Gateway()</code>, etc.) <code>provider/</code> Unified AI provider interface. <code>GenerateParams</code>, <code>StreamEvent</code>, streaming via <code>iter.Seq2</code>. Implementations in sub-packages <code>provider/anthropic/</code> Anthropic Claude provider <code>provider/gemini/</code> Google Gemini provider <code>provider/openai/</code> OpenAI-compatible provider (GPT, Ollama, and other OpenAI API-compatible services) <code>supervisor/</code> <code>Supervisor</code> manages provider credentials and configuration. <code>ProviderProxy</code> handles model routing with temperature, max tokens, and fallback provider chains <code>prompt/</code> Structured prompt builder. <code>Builder</code> assembles system prompts from prioritized <code>Section</code> instances. <code>LoadFromDir()</code> loads custom prompts from user directories. Sections: Identity, Safety, ConversationRules, ToolUsage, Automation, AgentIdentity <code>approval/</code> Tool execution approval system. <code>CompositeProvider</code> routes approval requests to channel-specific providers. <code>GatewayProvider</code> sends approval requests over WebSocket. <code>TTYProvider</code> prompts in terminal. <code>HeadlessProvider</code> auto-approves. <code>GrantStore</code> caches approval decisions <code>payment/</code> Blockchain payment service. <code>TxBuilder</code> constructs USDC transfer transactions. <code>Service</code> coordinates wallet, spending limiter, and transaction execution <code>wallet/</code> Wallet providers: <code>LocalWallet</code> (derives keys from secrets store), <code>RPCWallet</code> (remote signing), <code>CompositeWallet</code> (fallback chain). <code>EntSpendingLimiter</code> enforces per-transaction and daily spending limits <code>x402/</code> X402 V2 payment protocol implementation. <code>Interceptor</code> handles automatic payment for 402 responses. <code>LocalSignerProvider</code> derives signing keys from secrets store. EIP-3009 signing for gasless USDC transfers <code>cron/</code> Cron scheduling system built on robfig/cron/v3. <code>Scheduler</code> manages job lifecycle. <code>EntStore</code> persists jobs and execution history. <code>Executor</code> runs agent prompts on schedule. <code>Delivery</code> routes results to channels <code>background/</code> In-memory background task manager. <code>Manager</code> enforces concurrency limits and task timeouts. <code>Notification</code> routes results to channels <code>workflow/</code> DAG-based workflow engine. <code>Engine</code> parses YAML workflow definitions, resolves step dependencies, and executes steps in parallel where possible. <code>StateStore</code> persists workflow state via Ent <code>lifecycle/</code> Component lifecycle management. <code>Registry</code> with priority-ordered startup and reverse-order shutdown. Adapters: <code>SimpleComponent</code>, <code>FuncComponent</code>, <code>ErrorComponent</code> <code>keyring/</code> Hardware keyring integration (Touch ID / TPM 2.0). <code>Provider</code> interface backed by OS keyring via go-keyring <code>sandbox/</code> Tool execution isolation. <code>SubprocessExecutor</code> for process-isolated P2P tool execution. <code>ContainerRuntime</code> interface with Docker/gVisor/native fallback chain. Optional pre-warmed container pool <code>dbmigrate/</code> Database encryption migration. <code>MigrateToEncrypted</code> / <code>DecryptToPlaintext</code> for SQLCipher transitions. <code>IsEncrypted</code> detection and <code>secureDeleteFile</code> cleanup <code>passphrase/</code> Passphrase prompt and validation helpers for terminal input <code>orchestration/</code> Multi-agent orchestration. <code>BuildAgentTree()</code> creates an ADK agent hierarchy with sub-agents: Operator (tool execution), Navigator (research), Vault (security), Librarian (knowledge), Automator (cron/bg/workflow), Planner (task planning), Chronicler (memory) <code>a2a/</code> Agent-to-Agent protocol. <code>Server</code> exposes agent card and task endpoints. <code>LoadRemoteAgents()</code> discovers and loads remote agent capabilities <code>tools/</code> Built-in tool implementations <code>tools/browser/</code> Headless browser tool with session management <code>tools/crypto/</code> Cryptographic operation tools (encrypt, decrypt, sign, verify) <code>tools/exec/</code> Shell command execution tool <code>tools/filesystem/</code> File read/write/list tools with path allowlisting and blocklisting <code>tools/secrets/</code> Secret management tools (store, retrieve, list, delete) <code>tools/payment/</code> Payment tools (balance, send, history)"},{"location":"architecture/project-structure/#prompts","title":"<code>prompts/</code>","text":"<p>Default system prompt sections as Markdown files, embedded into the binary via <code>go:embed</code>. The prompt builder loads these as the default sections, which can be overridden by placing custom <code>.md</code> files in a user-specified prompts directory.</p>"},{"location":"architecture/project-structure/#skills","title":"<code>skills/</code>","text":"<p>Skill system scaffold. Previously included ~30 built-in skills as SKILL.md files deployed via go:embed, but these were removed because Lango's passphrase-protected security model makes it impractical for the agent to invoke lango CLI commands as skills. The skill infrastructure (FileSkillStore, Registry, GitHub importer) remains fully functional for user-defined skills.</p>"},{"location":"architecture/project-structure/#openspec","title":"<code>openspec/</code>","text":"<p>Specification documents following the OpenSpec workflow. Used for tracking feature specifications, changes, and architectural decisions.</p>"},{"location":"automation/","title":"Automation","text":"<p>Lango provides three automation systems for scheduling, background execution, and multi-step workflow orchestration. Each system is independently configurable and can be enabled or disabled via configuration flags.</p>"},{"location":"automation/#system-comparison","title":"System Comparison","text":"Feature Cron Background Workflow Schedule Type Cron / interval / one-time On-demand DAG-based YAML Persistence Ent ORM (survives restarts) In-memory (ephemeral) Ent ORM (survives restarts) Concurrency Configurable max jobs Semaphore-controlled Parallel step execution Delivery Multi-channel Origin channel Multi-channel + per-step Session Mode Isolated or shared Always isolated Per-step isolated Status Stable Experimental Experimental"},{"location":"automation/#enabling-automation","title":"Enabling Automation","text":"<p>Each system is disabled by default. Enable them in your configuration:</p> <p>Settings: <code>lango settings</code> \u2192 Cron Scheduler</p> <pre><code>{\n  \"cron\": {\n    \"enabled\": true\n  },\n  \"background\": {\n    \"enabled\": true\n  },\n  \"workflow\": {\n    \"enabled\": true\n  }\n}\n</code></pre>"},{"location":"automation/#common-patterns","title":"Common Patterns","text":"<p>All three systems share the same <code>AgentRunner</code> interface to execute agent prompts, avoiding import cycles between the automation packages and the application layer:</p> <pre><code>type AgentRunner interface {\n    Run(ctx context.Context, sessionKey string, prompt string) (string, error)\n}\n</code></pre> <p>Results can be delivered to communication channels (Telegram, Discord, Slack) via the <code>ChannelSender</code> / <code>Delivery</code> adapters. Each system supports a <code>defaultDeliverTo</code> configuration option as a fallback when no delivery target is specified per-job or per-workflow.</p>"},{"location":"automation/background/","title":"Background Tasks","text":"<p>Experimental</p> <p>The background task system is experimental. APIs and behavior may change in future releases.</p> <p>In-memory background task manager for asynchronous agent operations. Submit long-running prompts to execute in the background while continuing to interact with the agent.</p>"},{"location":"automation/background/#features","title":"Features","text":""},{"location":"automation/background/#concurrency-limiting","title":"Concurrency Limiting","text":"<p>A semaphore controls how many tasks run simultaneously. When the limit is reached, new submissions are rejected with an error rather than queued.</p>"},{"location":"automation/background/#task-state-machine","title":"Task State Machine","text":"<p>Each task follows a strict lifecycle with mutex-protected transitions:</p> <pre><code>Pending --&gt; Running --&gt; Done\n                   --&gt; Failed\n                   --&gt; Cancelled\n</code></pre> State Description <code>pending</code> Task created, waiting for a semaphore slot <code>running</code> Agent is actively processing the prompt <code>done</code> Execution completed successfully <code>failed</code> Execution encountered an error <code>cancelled</code> Task was cancelled by the user"},{"location":"automation/background/#completion-notifications","title":"Completion Notifications","text":"<p>When a task finishes (success or failure), results are automatically delivered to the channel that initiated the request. A typing indicator is shown while the agent processes the prompt.</p>"},{"location":"automation/background/#monitoring","title":"Monitoring","text":"<p>The manager tracks all tasks in memory, providing list and status queries for active task counts and summaries.</p>"},{"location":"automation/background/#cli-commands","title":"CLI Commands","text":""},{"location":"automation/background/#submit-a-task","title":"Submit a Task","text":"<pre><code>lango bg run --prompt \"Analyze the codebase for security vulnerabilities\"\n</code></pre>"},{"location":"automation/background/#list-tasks","title":"List Tasks","text":"<pre><code>lango bg list\n</code></pre>"},{"location":"automation/background/#check-status","title":"Check Status","text":"<pre><code>lango bg status --id &lt;task-id&gt;\n</code></pre>"},{"location":"automation/background/#get-result","title":"Get Result","text":"<pre><code>lango bg result --id &lt;task-id&gt;\n</code></pre>"},{"location":"automation/background/#cancel-a-task","title":"Cancel a Task","text":"<pre><code>lango bg cancel --id &lt;task-id&gt;\n</code></pre>"},{"location":"automation/background/#ephemeral-storage","title":"Ephemeral Storage","text":"<p>In-Memory Only</p> <p>Background tasks are stored in memory only. All task state is lost when the application restarts. For persistent scheduled execution, use the Cron system instead.</p> <p>Each task runs in an isolated session with the key format <code>bg:&lt;task-id&gt;</code>.</p>"},{"location":"automation/background/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Background Tasks</p> <pre><code>{\n  \"background\": {\n    \"enabled\": true,\n    \"yieldMs\": 5000,\n    \"maxConcurrentTasks\": 10,\n    \"taskTimeout\": \"30m\",\n    \"defaultDeliverTo\": [\"telegram\"]\n  }\n}\n</code></pre> Key Type Default Description <code>background.enabled</code> <code>bool</code> <code>false</code> Enable the background task system <code>background.yieldMs</code> <code>int</code> - Time in ms before auto-yielding to background <code>background.maxConcurrentTasks</code> <code>int</code> <code>10</code> Maximum concurrently running tasks <code>background.taskTimeout</code> <code>duration</code> <code>30m</code> Maximum duration for a single task <code>background.defaultDeliverTo</code> <code>[]string</code> <code>[]</code> Default delivery channels"},{"location":"automation/background/#architecture","title":"Architecture","text":"<p>The background system consists of two main components:</p> <ul> <li>Manager (<code>internal/background/manager.go</code>) -- handles task lifecycle, concurrency limiting, and execution</li> <li>Task (<code>internal/background/task.go</code>) -- represents a single execution unit with thread-safe state transitions</li> </ul>"},{"location":"automation/cron/","title":"Cron Scheduling","text":"<p>Persistent cron scheduling system powered by robfig/cron/v3 with Ent ORM storage. Jobs survive application restarts -- on startup, all enabled jobs are loaded from the database and re-registered with the scheduler.</p>"},{"location":"automation/cron/#schedule-types","title":"Schedule Types","text":"Type Flag Example Description <code>cron</code> <code>--schedule</code> <code>\"0 9 * * *\"</code> Standard cron expression (minute, hour, day, month, weekday) <code>every</code> <code>--every</code> <code>1h</code> Interval-based repetition using Go duration syntax <code>at</code> <code>--at</code> <code>2026-02-20T15:00:00Z</code> One-time execution at a specific RFC3339 datetime <p>One-time (<code>at</code>) jobs are automatically disabled after execution.</p>"},{"location":"automation/cron/#cli-commands","title":"CLI Commands","text":""},{"location":"automation/cron/#add-a-cron-job","title":"Add a Cron Job","text":"<pre><code># Daily summary at 9 AM\nlango cron add --name \"daily-summary\" \\\n  --schedule \"0 9 * * *\" \\\n  --prompt \"Summarize yesterday's activity\" \\\n  --deliver-to telegram\n\n# Every 2 hours\nlango cron add --name \"health-check\" \\\n  --every 2h \\\n  --prompt \"Check all systems status\" \\\n  --deliver-to slack\n\n# One-time execution\nlango cron add --name \"deploy-reminder\" \\\n  --at \"2026-02-20T15:00:00Z\" \\\n  --prompt \"Remind team about the deployment window\"\n</code></pre>"},{"location":"automation/cron/#list-jobs","title":"List Jobs","text":"<pre><code>lango cron list\n</code></pre>"},{"location":"automation/cron/#pause-resume","title":"Pause / Resume","text":"<pre><code>lango cron pause --id &lt;job-id&gt;\nlango cron resume --id &lt;job-id&gt;\n</code></pre>"},{"location":"automation/cron/#delete-a-job","title":"Delete a Job","text":"<pre><code>lango cron delete --id &lt;job-id&gt;\n</code></pre>"},{"location":"automation/cron/#view-history","title":"View History","text":"<pre><code># History for a specific job\nlango cron history --id &lt;job-id&gt; --limit 10\n\n# History across all jobs\nlango cron history --limit 20\n</code></pre>"},{"location":"automation/cron/#session-modes","title":"Session Modes","text":"<p>Each cron job runs in its own agent session. The session mode controls whether conversations persist across runs:</p> Mode Session Key Format Behavior <code>isolated</code> (default) <code>cron:&lt;name&gt;:&lt;timestamp&gt;</code> Fresh session every execution. No memory of previous runs. <code>main</code> <code>cron:&lt;name&gt;</code> Shared session across all runs. Agent remembers previous outputs. <pre><code># Use shared session (agent remembers previous runs)\nlango cron add --name \"weekly-report\" \\\n  --schedule \"0 9 * * 1\" \\\n  --prompt \"Write this week's report, building on previous ones\" \\\n  --isolated=false\n</code></pre>"},{"location":"automation/cron/#result-delivery","title":"Result Delivery","text":"<p>Job results are delivered to configured communication channels after execution. If no <code>deliver_to</code> is specified per-job, the system falls back to <code>cron.defaultDeliverTo</code> from the configuration.</p> <p>No Delivery Channel</p> <p>If no delivery channel is configured (neither per-job nor default), job results are logged but not delivered to any channel. A warning is emitted in the logs.</p>"},{"location":"automation/cron/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Cron Scheduler</p> <pre><code>{\n  \"cron\": {\n    \"enabled\": true,\n    \"timezone\": \"Asia/Seoul\",\n    \"maxConcurrentJobs\": 5,\n    \"defaultSessionMode\": \"isolated\",\n    \"historyRetention\": \"30d\",\n    \"defaultDeliverTo\": [\"telegram\"]\n  }\n}\n</code></pre> Key Type Default Description <code>cron.enabled</code> <code>bool</code> <code>false</code> Enable the cron scheduling system <code>cron.timezone</code> <code>string</code> <code>\"UTC\"</code> Default timezone for cron expressions <code>cron.maxConcurrentJobs</code> <code>int</code> <code>5</code> Maximum concurrently executing jobs <code>cron.defaultSessionMode</code> <code>string</code> <code>\"isolated\"</code> Default session mode for new jobs <code>cron.historyRetention</code> <code>string</code> - Duration to retain execution history <code>cron.defaultDeliverTo</code> <code>[]string</code> <code>[]</code> Default delivery channels"},{"location":"automation/cron/#architecture","title":"Architecture","text":"<p>The cron system consists of three main components:</p> <ul> <li>Scheduler (<code>internal/cron/scheduler.go</code>) -- manages job registration, lifecycle, and the concurrency semaphore</li> <li>Executor (<code>internal/cron/executor.go</code>) -- runs individual jobs via <code>AgentRunner</code>, persists history, and delivers results</li> <li>Store (<code>internal/cron/store.go</code>) -- Ent ORM persistence layer for jobs and execution history</li> </ul>"},{"location":"automation/workflows/","title":"Workflow Engine","text":"<p>Experimental</p> <p>The workflow engine is experimental. APIs and behavior may change in future releases.</p> <p>DAG-based workflow engine for orchestrating multi-step agent operations. Steps run in parallel when their dependencies allow, and results flow between steps via template variables.</p>"},{"location":"automation/workflows/#workflow-definition","title":"Workflow Definition","text":"<p>Workflows are defined in YAML files with a list of steps, each assigned to a specific agent:</p> <pre><code>name: code-review-pipeline\ndescription: \"Automated PR code review\"\ndeliver_to: [slack]\nsteps:\n  - id: fetch-changes\n    agent: operator\n    prompt: \"Get git diff main...HEAD\"\n\n  - id: security-scan\n    agent: navigator\n    prompt: \"Analyze security in: {{fetch-changes.result}}\"\n    depends_on: [fetch-changes]\n\n  - id: quality-review\n    agent: navigator\n    prompt: \"Review code quality: {{fetch-changes.result}}\"\n    depends_on: [fetch-changes]\n\n  - id: summary\n    agent: planner\n    prompt: |\n      Security: {{security-scan.result}}\n      Quality: {{quality-review.result}}\n      Write a review report.\n    depends_on: [security-scan, quality-review]\n    deliver_to: [slack]\n</code></pre> <p>In this example, <code>security-scan</code> and <code>quality-review</code> run in parallel after <code>fetch-changes</code> completes, and <code>summary</code> waits for both to finish.</p>"},{"location":"automation/workflows/#features","title":"Features","text":""},{"location":"automation/workflows/#dag-execution","title":"DAG Execution","text":"<p>Steps are organized into a directed acyclic graph. The engine performs a topological sort to determine execution layers:</p> <ol> <li>Layer 0 -- steps with no dependencies (roots)</li> <li>Layer 1 -- steps whose dependencies are all in layer 0</li> <li>Layer N -- steps whose dependencies are all in previous layers</li> </ol> <p>Within each layer, steps execute in parallel up to the configured concurrency limit.</p>"},{"location":"automation/workflows/#template-variables","title":"Template Variables","text":"<p>Step prompts support <code>{{step-id.result}}</code> placeholders that are replaced with the output of completed steps at render time. Step IDs may contain letters, digits, hyphens, and underscores.</p> <pre><code>prompt: \"Summarize: {{fetch-data.result}}\"\n</code></pre> <p>If a referenced step has no result available, the engine returns an error.</p>"},{"location":"automation/workflows/#state-persistence","title":"State Persistence","text":"<p>Workflow runs and step statuses are persisted via Ent ORM. This enables:</p> <ul> <li>Querying run history and step-level results</li> <li>Tracking workflow progress across steps</li> <li>Resuming failed workflows from the last successful step</li> </ul>"},{"location":"automation/workflows/#step-level-delivery","title":"Step-Level Delivery","text":"<p>Each step can specify its own <code>deliver_to</code> channels, independent of the workflow-level delivery. Step results are delivered with the format <code>[workflow-name/step-id] result</code>.</p>"},{"location":"automation/workflows/#cycle-detection","title":"Cycle Detection","text":"<p>The DAG constructor validates the dependency graph using topological sort. If a circular dependency is detected, the workflow is rejected before execution begins.</p>"},{"location":"automation/workflows/#supported-agents","title":"Supported Agents","text":"<p>Workflow steps can be assigned to any of the built-in sub-agents:</p> Agent Role <code>operator</code> System operations, shell execution, file management <code>navigator</code> Web browsing, research, information gathering <code>vault</code> Cryptographic operations, secrets management <code>librarian</code> Knowledge retrieval, search, learning <code>automator</code> Automation tasks, cron management <code>planner</code> Task planning, coordination, summarization <code>chronicler</code> Memory management, history, session tracking"},{"location":"automation/workflows/#cli-commands","title":"CLI Commands","text":""},{"location":"automation/workflows/#run-a-workflow","title":"Run a Workflow","text":"<pre><code>lango workflow run --file review-pipeline.yaml\n</code></pre>"},{"location":"automation/workflows/#list-runs","title":"List Runs","text":"<pre><code>lango workflow list --limit 10\n</code></pre>"},{"location":"automation/workflows/#check-status","title":"Check Status","text":"<pre><code>lango workflow status --id &lt;run-id&gt;\n</code></pre>"},{"location":"automation/workflows/#cancel-a-run","title":"Cancel a Run","text":"<pre><code>lango workflow cancel --id &lt;run-id&gt;\n</code></pre>"},{"location":"automation/workflows/#view-history","title":"View History","text":"<pre><code>lango workflow history --limit 20\n</code></pre>"},{"location":"automation/workflows/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Workflow Engine</p> <pre><code>{\n  \"workflow\": {\n    \"enabled\": true,\n    \"maxConcurrentSteps\": 4,\n    \"defaultTimeout\": \"5m\",\n    \"stateDir\": \"~/.lango/state\",\n    \"defaultDeliverTo\": [\"telegram\"]\n  }\n}\n</code></pre> Key Type Default Description <code>workflow.enabled</code> <code>bool</code> <code>false</code> Enable the workflow engine <code>workflow.maxConcurrentSteps</code> <code>int</code> <code>4</code> Maximum concurrently executing steps <code>workflow.defaultTimeout</code> <code>duration</code> <code>5m</code> Default timeout for a single step <code>workflow.stateDir</code> <code>string</code> - Directory for workflow state storage <code>workflow.defaultDeliverTo</code> <code>[]string</code> <code>[]</code> Default delivery channels"},{"location":"automation/workflows/#architecture","title":"Architecture","text":"<p>The workflow engine consists of four main components:</p> <ul> <li>Engine (<code>internal/workflow/engine.go</code>) -- orchestrates DAG execution, manages concurrency, and handles delivery</li> <li>DAG (<code>internal/workflow/dag.go</code>) -- builds and validates the dependency graph, provides topological sort and ready-step queries</li> <li>Template (<code>internal/workflow/template.go</code>) -- renders <code>{{step-id.result}}</code> placeholders in prompts</li> <li>StateStore (<code>internal/workflow/state.go</code>) -- Ent ORM persistence for run and step records</li> </ul>"},{"location":"cli/","title":"CLI Reference","text":"<p>Lango provides a comprehensive command-line interface built with Cobra. Every command supports <code>--help</code> for detailed usage information.</p>"},{"location":"cli/#quick-reference","title":"Quick Reference","text":"Command Description <code>lango serve</code> Start the gateway server <code>lango version</code> Print version and build info <code>lango health</code> Check gateway health <code>lango onboard</code> Guided 5-step setup wizard <code>lango settings</code> Full interactive configuration editor <code>lango doctor</code> Diagnostics and health checks"},{"location":"cli/#config-management","title":"Config Management","text":"Command Description <code>lango config list</code> List all configuration profiles <code>lango config create &lt;name&gt;</code> Create a new profile with defaults <code>lango config use &lt;name&gt;</code> Switch to a different profile <code>lango config delete &lt;name&gt;</code> Delete a configuration profile <code>lango config import &lt;file&gt;</code> Import and encrypt a JSON config <code>lango config export &lt;name&gt;</code> Export a profile as plaintext JSON <code>lango config validate</code> Validate the active profile"},{"location":"cli/#agent-memory","title":"Agent &amp; Memory","text":"Command Description <code>lango agent status</code> Show agent mode and configuration <code>lango agent list</code> List local and remote agents <code>lango memory list</code> List observational memory entries <code>lango memory status</code> Show memory system status <code>lango memory clear</code> Clear all memory entries for a session <code>lango graph status</code> Show graph store status <code>lango graph query</code> Query graph triples <code>lango graph stats</code> Show graph statistics <code>lango graph clear</code> Clear all graph data"},{"location":"cli/#security","title":"Security","text":"Command Description <code>lango security status</code> Show security configuration status <code>lango security migrate-passphrase</code> Rotate encryption passphrase <code>lango security secrets list</code> List stored secrets (values hidden) <code>lango security secrets set &lt;name&gt;</code> Store an encrypted secret <code>lango security secrets delete &lt;name&gt;</code> Delete a stored secret <code>lango security keyring store</code> Store passphrase in hardware keyring (Touch ID / TPM) <code>lango security keyring clear</code> Remove passphrase from keyring <code>lango security keyring status</code> Show hardware keyring status <code>lango security db-migrate</code> Encrypt database with SQLCipher <code>lango security db-decrypt</code> Decrypt database to plaintext <code>lango security kms status</code> Show KMS provider status <code>lango security kms test</code> Test KMS encrypt/decrypt roundtrip <code>lango security kms keys</code> List KMS keys in registry"},{"location":"cli/#payment","title":"Payment","text":"Command Description <code>lango payment balance</code> Show USDC wallet balance <code>lango payment history</code> Show payment transaction history <code>lango payment limits</code> Show spending limits and daily usage <code>lango payment info</code> Show wallet and payment system info <code>lango payment send</code> Send a USDC payment"},{"location":"cli/#p2p-network","title":"P2P Network","text":"Command Description <code>lango p2p status</code> Show P2P node status <code>lango p2p peers</code> List connected peers <code>lango p2p connect &lt;multiaddr&gt;</code> Connect to a peer by multiaddr <code>lango p2p disconnect &lt;peer-id&gt;</code> Disconnect from a peer <code>lango p2p firewall list</code> List firewall ACL rules <code>lango p2p firewall add</code> Add a firewall ACL rule <code>lango p2p firewall remove</code> Remove firewall rules for a peer <code>lango p2p discover</code> Discover agents by capability <code>lango p2p identity</code> Show local DID and peer identity <code>lango p2p reputation</code> Query peer trust score <code>lango p2p pricing</code> Show tool pricing <code>lango p2p session list</code> List active peer sessions <code>lango p2p session revoke</code> Revoke a peer session <code>lango p2p session revoke-all</code> Revoke all active peer sessions <code>lango p2p sandbox status</code> Show sandbox runtime status <code>lango p2p sandbox test</code> Run sandbox smoke test <code>lango p2p sandbox cleanup</code> Remove orphaned sandbox containers"},{"location":"cli/#automation","title":"Automation","text":"Command Description <code>lango cron add</code> Add a new cron job <code>lango cron list</code> List all cron jobs <code>lango cron delete &lt;id-or-name&gt;</code> Delete a cron job <code>lango cron pause &lt;id-or-name&gt;</code> Pause a cron job <code>lango cron resume &lt;id-or-name&gt;</code> Resume a paused cron job <code>lango cron history</code> Show cron execution history <code>lango workflow run &lt;file&gt;</code> Execute a workflow YAML file <code>lango workflow list</code> List workflow runs <code>lango workflow status &lt;run-id&gt;</code> Show workflow run status <code>lango workflow cancel &lt;run-id&gt;</code> Cancel a running workflow <code>lango workflow history</code> Show workflow execution history <code>lango bg list</code> List background tasks <code>lango bg status &lt;id&gt;</code> Show background task status <code>lango bg cancel &lt;id&gt;</code> Cancel a running background task <code>lango bg result &lt;id&gt;</code> Show completed task result"},{"location":"cli/#global-behavior","title":"Global Behavior","text":"<p>All commands read configuration from the active encrypted profile stored in <code>~/.lango/lango.db</code>. On first run, Lango prompts for a passphrase to initialize encryption.</p> <p>Commands that need a running server (like <code>lango health</code>) connect to <code>localhost</code> on the configured port (default: <code>18789</code>).</p> <p>Getting Started</p> <p>If you're new to Lango, start with <code>lango onboard</code> to walk through the initial setup, then use <code>lango doctor</code> to verify everything is configured correctly.</p>"},{"location":"cli/agent-memory/","title":"Agent &amp; Memory","text":"<p>Commands for inspecting agent configuration, managing observational memory, and interacting with the knowledge graph store.</p>"},{"location":"cli/agent-memory/#agent-commands","title":"Agent Commands","text":""},{"location":"cli/agent-memory/#lango-agent-status","title":"lango agent status","text":"<p>Show the current agent mode and configuration.</p> <pre><code>lango agent status [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango agent status\nAgent Status\n  Mode:         single\n  Provider:     anthropic\n  Model:        claude-sonnet-4-20250514\n  Multi-Agent:  false\n  A2A Enabled:  false\n</code></pre> <p>When multi-agent mode is enabled:</p> <pre><code>$ lango agent status\nAgent Status\n  Mode:         multi-agent\n  Provider:     anthropic\n  Model:        claude-sonnet-4-20250514\n  Multi-Agent:  true\n  A2A Enabled:  true\n  A2A Base URL: http://localhost:18789\n  A2A Agent:    lango\n</code></pre>"},{"location":"cli/agent-memory/#lango-agent-list","title":"lango agent list","text":"<p>List all available sub-agents (local) and remote A2A agents.</p> <pre><code>lango agent list [--json] [--check]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <code>--check</code> bool <code>false</code> Test connectivity to remote agents <p>Local agents are always listed regardless of multi-agent configuration:</p> Agent Description executor Executes tools including shell commands, file operations, browser automation researcher Searches knowledge bases, performs RAG retrieval, graph traversal planner Decomposes complex tasks into steps and designs execution plans memory-manager Manages conversational memory including observations, reflections <p>Example:</p> <pre><code>$ lango agent list\nNAME              TYPE   DESCRIPTION\nexecutor          local  Executes tools including shell commands, file operations, browser automation\nresearcher        local  Searches knowledge bases, performs RAG retrieval, graph traversal\nplanner           local  Decomposes complex tasks into steps and designs execution plans\nmemory-manager    local  Manages conversational memory including observations, reflections\n\nNAME              TYPE    URL                                    STATUS\nweather-agent     remote  http://weather-svc:8080/.well-known/agent.json  ok\n</code></pre> <p>Use <code>--check</code> to verify remote agent connectivity:</p> <pre><code>$ lango agent list --check\n# Remote agents will show \"ok\", \"unreachable\", or HTTP status codes\n</code></pre>"},{"location":"cli/agent-memory/#memory-commands","title":"Memory Commands","text":"<p>Manage observational memory entries. Memory commands require a <code>--session</code> flag to scope operations to a specific session.</p>"},{"location":"cli/agent-memory/#lango-memory-list","title":"lango memory list","text":"<p>List observations and reflections for a session.</p> <pre><code>lango memory list --session &lt;key&gt; [--type &lt;type&gt;] [--json]\n</code></pre> Flag Type Default Description <code>--session</code> string required Session key to query <code>--type</code> string (all) Filter by type: <code>observations</code> or <code>reflections</code> <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango memory list --session user-123\nID        TYPE          TOKENS  CREATED           CONTENT\na1b2c3d4  observation   45      2026-02-20 14:30  User prefers concise answers and dislikes...\ne5f6g7h8  reflection    120     2026-02-20 14:35  The user has shown a consistent pattern of...\n</code></pre>"},{"location":"cli/agent-memory/#lango-memory-status","title":"lango memory status","text":"<p>Show observational memory status and configuration for a session.</p> <pre><code>lango memory status --session &lt;key&gt; [--json]\n</code></pre> Flag Type Default Description <code>--session</code> string required Session key to query <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango memory status --session user-123\nObservational Memory Status (session: user-123)\n  Enabled:                      true\n  Provider:                     anthropic\n  Model:                        claude-haiku-4-5-20251001\n  Observations:                 12 (540 tokens)\n  Reflections:                  3 (360 tokens)\n  Message Token Threshold:      1000\n  Observation Token Threshold:  2000\n  Max Message Token Budget:     8000\n</code></pre>"},{"location":"cli/agent-memory/#lango-memory-clear","title":"lango memory clear","text":"<p>Clear all observations and reflections for a session. Prompts for confirmation unless <code>--force</code> is specified.</p> <pre><code>lango memory clear &lt;session-key&gt; [--force]\n</code></pre> Argument Required Description <code>session-key</code> Yes Session key to clear Flag Type Default Description <code>--force</code> bool <code>false</code> Skip confirmation prompt <p>Example:</p> <pre><code>$ lango memory clear user-123\nThis will delete all observations and reflections for session 'user-123'.\nContinue? [y/N] y\nCleared all memory entries for session 'user-123'.\n</code></pre> <p>Warning</p> <p>This operation is irreversible. All observations and reflections for the session will be permanently deleted.</p>"},{"location":"cli/agent-memory/#graph-commands","title":"Graph Commands","text":"<p>Manage the knowledge graph store. The graph must be enabled in configuration (<code>graph.enabled = true</code>).</p>"},{"location":"cli/agent-memory/#lango-graph-status","title":"lango graph status","text":"<p>Show knowledge graph status and basic information.</p> <pre><code>lango graph status [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango graph status\nKnowledge Graph Status\n  Enabled:       true\n  Backend:       bolt\n  Database Path: /home/user/.lango/graph.db\n  Triples:       1523\n</code></pre> <p>When the graph is disabled:</p> <pre><code>$ lango graph status\nKnowledge Graph Status\n  Enabled:  false\n</code></pre>"},{"location":"cli/agent-memory/#lango-graph-query","title":"lango graph query","text":"<p>Query triples from the knowledge graph by subject, predicate, and/or object.</p> <pre><code>lango graph query [--subject &lt;s&gt;] [--predicate &lt;p&gt;] [--object &lt;o&gt;] [--limit N] [--json]\n</code></pre> Flag Type Default Description <code>--subject</code> string Filter by subject <code>--predicate</code> string Filter by predicate (requires <code>--subject</code>) <code>--object</code> string Filter by object <code>--limit</code> int <code>0</code> Limit number of results (0 = unlimited) <code>--json</code> bool <code>false</code> Output as JSON <p>Query Requirements</p> <p>At least one of <code>--subject</code> or <code>--object</code> is required. The <code>--predicate</code> flag can only be used together with <code>--subject</code>.</p> <p>Examples:</p> <pre><code># Query by subject\n$ lango graph query --subject \"Go\"\nSUBJECT  PREDICATE    OBJECT\nGo       is_a         programming_language\nGo       created_by   Google\nGo       has_feature  goroutines\n\n# Query by subject and predicate\n$ lango graph query --subject \"Go\" --predicate \"has_feature\"\nSUBJECT  PREDICATE    OBJECT\nGo       has_feature  goroutines\nGo       has_feature  channels\nGo       has_feature  garbage_collection\n\n# Query by object\n$ lango graph query --object \"Google\" --limit 5\n\n# JSON output\n$ lango graph query --subject \"Go\" --json\n</code></pre>"},{"location":"cli/agent-memory/#lango-graph-stats","title":"lango graph stats","text":"<p>Show knowledge graph statistics including total triple count and predicate distribution.</p> <pre><code>lango graph stats [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango graph stats\nKnowledge Graph Statistics\n  Total Triples: 1523\n\nPREDICATE       COUNT\nis_a            423\nhas_feature     312\nrelated_to      289\ncreated_by      156\n</code></pre>"},{"location":"cli/agent-memory/#lango-graph-clear","title":"lango graph clear","text":"<p>Clear all triples from the knowledge graph. Prompts for confirmation unless <code>--force</code> is specified.</p> <pre><code>lango graph clear [--force]\n</code></pre> Flag Type Default Description <code>--force</code> bool <code>false</code> Skip confirmation prompt <p>Example:</p> <pre><code>$ lango graph clear\nThis will delete all triples from the knowledge graph.\nContinue? [y/N] y\nCleared all triples from the knowledge graph.\n</code></pre> <p>Danger</p> <p>This operation is irreversible. All graph data will be permanently deleted.</p>"},{"location":"cli/automation/","title":"Automation Commands","text":"<p>Commands for managing cron jobs, and workflow pipelines. See the Automation section for detailed documentation.</p>"},{"location":"cli/automation/#cron-commands","title":"Cron Commands","text":"<p>Manage scheduled cron jobs that execute agent prompts on a recurring or one-time basis. Cron must be enabled in configuration (<code>cron.enabled = true</code>).</p> <pre><code>lango cron &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/automation/#lango-cron-add","title":"lango cron add","text":"<p>Add a new scheduled cron job. Exactly one scheduling method must be specified: <code>--schedule</code>, <code>--every</code>, or <code>--at</code>.</p> <pre><code>lango cron add --name &lt;name&gt; --prompt &lt;text&gt; [scheduling flags] [options]\n</code></pre> Flag Type Default Description <code>--name</code> string required Job name <code>--prompt</code> string required Prompt to execute <code>--schedule</code> string Cron expression (e.g., <code>\"0 9 * * *\"</code>) <code>--every</code> string Interval (e.g., <code>\"1h\"</code>, <code>\"30m\"</code>) <code>--at</code> string One-time execution (ISO8601: <code>\"2026-02-20T15:00:00\"</code>) <code>--deliver</code> strings Channels to deliver results (e.g., <code>slack,telegram</code>) <code>--isolated</code> bool <code>false</code> Run in isolated session <code>--timezone</code> string <code>UTC</code> Timezone for scheduling <p>Scheduling Methods</p> <p>Exactly one of <code>--schedule</code>, <code>--every</code>, or <code>--at</code> is required. They cannot be combined.</p> <ul> <li><code>--schedule</code> uses standard cron syntax (5 fields: minute, hour, day-of-month, month, day-of-week)</li> <li><code>--every</code> uses Go duration format (e.g., <code>30m</code>, <code>1h</code>, <code>2h30m</code>)</li> <li><code>--at</code> uses ISO8601 format for one-time execution</li> </ul> <p>Examples:</p> <pre><code># Daily at 9 AM UTC\n$ lango cron add \\\n    --name \"daily-news\" \\\n    --schedule \"0 9 * * *\" \\\n    --prompt \"Summarize today's top tech news\" \\\n    --deliver slack\nCron job \"daily-news\" created (id: a1b2c3d4)\n  Schedule: cron 0 9 * * *\n  Prompt: Summarize today's top tech news\n  Deliver to: [slack]\n\n# Every hour\n$ lango cron add \\\n    --name \"health-check\" \\\n    --every 1h \\\n    --prompt \"Check all server endpoints and report any issues\" \\\n    --isolated\n\n# One-time scheduled execution\n$ lango cron add \\\n    --name \"meeting-prep\" \\\n    --at \"2026-02-25T15:00:00\" \\\n    --prompt \"Prepare meeting notes for the Q1 review\" \\\n    --timezone \"America/New_York\"\n</code></pre>"},{"location":"cli/automation/#lango-cron-list","title":"lango cron list","text":"<p>List all registered cron jobs with their status and schedule.</p> <pre><code>lango cron list\n</code></pre> <p>Output columns:</p> Column Description ID Short job ID (first 8 characters) NAME Job name SCHEDULE Schedule type and expression ENABLED <code>yes</code> or <code>no</code> LAST RUN Last execution timestamp (or <code>-</code>) NEXT RUN Next scheduled execution (or <code>-</code>) <p>Example:</p> <pre><code>$ lango cron list\nID        NAME           SCHEDULE           ENABLED  LAST RUN              NEXT RUN\na1b2c3d4  daily-news     cron 0 9 * * *     yes      2026-02-20 09:00:00   2026-02-21 09:00:00\ne5f6g7h8  health-check   every 1h           yes      2026-02-20 14:00:00   2026-02-20 15:00:00\ni9j0k1l2  meeting-prep   at 2026-02-25...   yes      -                     2026-02-25 15:00:00\n</code></pre>"},{"location":"cli/automation/#lango-cron-delete","title":"lango cron delete","text":"<p>Delete a cron job by ID or name.</p> <pre><code>lango cron delete &lt;id-or-name&gt;\n</code></pre> Argument Required Description <code>id-or-name</code> Yes Job UUID or name <p>Example:</p> <pre><code>$ lango cron delete daily-news\nCron job \"daily-news\" deleted.\n\n$ lango cron delete a1b2c3d4-5678-...\nCron job \"a1b2c3d4-5678-...\" deleted.\n</code></pre>"},{"location":"cli/automation/#lango-cron-pause","title":"lango cron pause","text":"<p>Pause a running cron job. The job remains registered but will not execute until resumed.</p> <pre><code>lango cron pause &lt;id-or-name&gt;\n</code></pre> Argument Required Description <code>id-or-name</code> Yes Job UUID or name <p>Example:</p> <pre><code>$ lango cron pause health-check\nCron job \"health-check\" paused.\n</code></pre>"},{"location":"cli/automation/#lango-cron-resume","title":"lango cron resume","text":"<p>Resume a paused cron job.</p> <pre><code>lango cron resume &lt;id-or-name&gt;\n</code></pre> Argument Required Description <code>id-or-name</code> Yes Job UUID or name <p>Example:</p> <pre><code>$ lango cron resume health-check\nCron job \"health-check\" resumed.\n</code></pre>"},{"location":"cli/automation/#lango-cron-history","title":"lango cron history","text":"<p>Show execution history for a specific job or all jobs.</p> <pre><code>lango cron history [id-or-name] [--limit N]\n</code></pre> Argument Required Description <code>id-or-name</code> No Filter by specific job (shows all if omitted) Flag Type Default Description <code>--limit</code>, <code>-n</code> int <code>20</code> Maximum entries to show <p>Example:</p> <pre><code>$ lango cron history\nJOB           STATUS     STARTED               DURATION   RESULT\ndaily-news    completed  2026-02-20 09:00:00    3.2s       Top 5 tech stories: 1. AI breakthrough...\nhealth-check  completed  2026-02-20 14:00:00    1.1s       All endpoints healthy\nhealth-check  failed     2026-02-20 13:00:00    5.0s       ERR: timeout connecting to API server\n\n$ lango cron history daily-news --limit 5\n</code></pre>"},{"location":"cli/automation/#workflow-commands","title":"Workflow Commands","text":"<p>Manage multi-step workflow pipelines defined in YAML files. Workflows must be enabled in configuration (<code>workflow.enabled = true</code>). See Workflow Engine for YAML format details.</p> <pre><code>lango workflow &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/automation/#lango-workflow-run","title":"lango workflow run","text":"<p>Execute a workflow from a YAML definition file. If the workflow has a schedule, it registers with the server instead of executing immediately.</p> <pre><code>lango workflow run &lt;file.flow.yaml&gt; [--schedule &lt;cron&gt;]\n</code></pre> Argument Required Description <code>file.flow.yaml</code> Yes Path to the workflow YAML file Flag Type Default Description <code>--schedule</code> string Cron schedule to register (overrides YAML) <p>Example:</p> <pre><code>$ lango workflow run ./daily-report.flow.yaml\nWorkflow: Daily Report Pipeline\nSteps:    3\n\nExecuting workflow...\n\nWorkflow completed: completed\n\n--- Step: fetch-data ---\nRetrieved 42 records from the database...\n\n--- Step: analyze ---\nAnalysis complete. Key findings: ...\n\n--- Step: report ---\nReport generated and sent to #reports channel.\n</code></pre> <p>If the workflow includes a schedule or you override with <code>--schedule</code>, it registers for recurring execution:</p> <pre><code>$ lango workflow run ./report.flow.yaml --schedule \"0 8 * * MON\"\nWorkflow: Weekly Report\nSteps:    3\nSchedule: 0 8 * * MON\n\nWorkflow has a schedule. Register it with the running server:\n  POST /api/workflow/register with the YAML content\n</code></pre>"},{"location":"cli/automation/#lango-workflow-list","title":"lango workflow list","text":"<p>List workflow runs.</p> <pre><code>lango workflow list [--limit N]\n</code></pre> Flag Type Default Description <code>--limit</code>, <code>-n</code> int <code>20</code> Maximum entries to show <p>Example:</p> <pre><code>$ lango workflow list\nID        WORKFLOW              STATUS     STEPS  STARTED\na1b2c3d4  Daily Report Pipeline completed  3/3    2026-02-20 09:00:00\ne5f6g7h8  Data Migration        running    2/5    2026-02-20 14:30:00\ni9j0k1l2  Weekly Summary        failed     1/4    2026-02-19 08:00:00\n</code></pre>"},{"location":"cli/automation/#lango-workflow-status","title":"lango workflow status","text":"<p>Show detailed status for a specific workflow run, including per-step progress.</p> <pre><code>lango workflow status &lt;run-id&gt;\n</code></pre> Argument Required Description <code>run-id</code> Yes Workflow run ID <p>Example:</p> <pre><code>$ lango workflow status a1b2c3d4\nRun ID:    a1b2c3d4\nWorkflow:  Daily Report Pipeline\nStatus:    running\nProgress:  2/3 steps\n\nSteps:\n  fetch-data            completed     agent=researcher\n  analyze               completed     agent=planner\n  generate-report       running       agent=executor\n</code></pre>"},{"location":"cli/automation/#lango-workflow-cancel","title":"lango workflow cancel","text":"<p>Cancel a running workflow.</p> <pre><code>lango workflow cancel &lt;run-id&gt;\n</code></pre> Argument Required Description <code>run-id</code> Yes Workflow run ID to cancel <p>Example:</p> <pre><code>$ lango workflow cancel e5f6g7h8\nWorkflow run e5f6g7h8 cancelled.\n</code></pre>"},{"location":"cli/automation/#lango-workflow-history","title":"lango workflow history","text":"<p>Show workflow execution history across all workflows.</p> <pre><code>lango workflow history [--limit N]\n</code></pre> Flag Type Default Description <code>--limit</code>, <code>-n</code> int <code>20</code> Maximum entries to show <p>Example:</p> <pre><code>$ lango workflow history\nID        WORKFLOW              STATUS     STEPS\na1b2c3d4  Daily Report Pipeline completed  3/3\ne5f6g7h8  Data Migration        cancelled  2/5\ni9j0k1l2  Weekly Summary        failed     1/4\nm3n4o5p6  Daily Report Pipeline completed  3/3\n</code></pre>"},{"location":"cli/config/","title":"Config Management","text":"<p>Lango stores all configuration in encrypted profiles within <code>~/.lango/lango.db</code>. The <code>config</code> command group manages these profiles.</p> <pre><code>lango config &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/config/#lango-config-list","title":"lango config list","text":"<p>List all configuration profiles with their status.</p> <pre><code>lango config list\n</code></pre> <p>Output columns:</p> Column Description NAME Profile name ACTIVE <code>*</code> if this is the active profile VERSION Configuration schema version CREATED Creation timestamp UPDATED Last modification timestamp <p>Example:</p> <pre><code>$ lango config list\nNAME       ACTIVE  VERSION  CREATED              UPDATED\ndefault    *       1        2026-01-15 10:00:00  2026-02-20 14:30:00\nstaging            1        2026-02-01 09:00:00  2026-02-01 09:00:00\n</code></pre>"},{"location":"cli/config/#lango-config-create","title":"lango config create","text":"<p>Create a new configuration profile with default values.</p> <pre><code>lango config create &lt;name&gt;\n</code></pre> Argument Required Description <code>name</code> Yes Name for the new profile <p>The profile is created with Lango's default configuration. Use <code>lango settings</code> or <code>lango onboard</code> to customize it.</p> <p>Example:</p> <pre><code>$ lango config create production\nProfile \"production\" created with default configuration.\n</code></pre> <p>Warning</p> <p>The command fails if a profile with the same name already exists.</p>"},{"location":"cli/config/#lango-config-use","title":"lango config use","text":"<p>Switch the active profile. All subsequent commands will use the selected profile's configuration.</p> <pre><code>lango config use &lt;name&gt;\n</code></pre> Argument Required Description <code>name</code> Yes Name of the profile to activate <p>Example:</p> <pre><code>$ lango config use staging\nSwitched to profile \"staging\".\n</code></pre>"},{"location":"cli/config/#lango-config-delete","title":"lango config delete","text":"<p>Delete a configuration profile. Prompts for confirmation unless <code>--force</code> is specified.</p> <pre><code>lango config delete &lt;name&gt; [--force]\n</code></pre> Argument Required Description <code>name</code> Yes Name of the profile to delete Flag Type Default Description <code>--force</code>, <code>-f</code> bool <code>false</code> Skip confirmation prompt <p>Examples:</p> <pre><code># Interactive confirmation\n$ lango config delete staging\nDelete profile \"staging\"? This cannot be undone. [y/N]: y\nProfile \"staging\" deleted.\n\n# Non-interactive\n$ lango config delete staging --force\nProfile \"staging\" deleted.\n</code></pre>"},{"location":"cli/config/#lango-config-import","title":"lango config import","text":"<p>Import a plaintext JSON configuration file into an encrypted profile. The source file is deleted after successful import for security.</p> <pre><code>lango config import &lt;file&gt; [--profile &lt;name&gt;]\n</code></pre> Argument Required Description <code>file</code> Yes Path to the JSON configuration file Flag Type Default Description <code>--profile</code> string <code>default</code> Name for the imported profile <p>Example:</p> <pre><code>$ lango config import ./config.json --profile production\nImported \"./config.json\" as profile \"production\" (now active).\nSource file deleted for security.\n</code></pre> <p>Source File Deleted</p> <p>The source JSON file is automatically deleted after a successful import to prevent sensitive values (API keys, tokens) from remaining on disk in plaintext.</p>"},{"location":"cli/config/#lango-config-export","title":"lango config export","text":"<p>Export an encrypted profile as plaintext JSON to stdout. Requires passphrase verification (handled by the bootstrap process).</p> <pre><code>lango config export &lt;name&gt;\n</code></pre> Argument Required Description <code>name</code> Yes Name of the profile to export <p>Example:</p> <pre><code>$ lango config export default\nWARNING: exported configuration contains sensitive values in plaintext.\n{\n  \"server\": {\n    \"host\": \"localhost\",\n    \"port\": 18789\n  },\n  ...\n}\n</code></pre> <p>Security Notice</p> <p>The exported JSON contains sensitive values (API keys, tokens) in plaintext. Handle with care and do not commit to version control.</p> <p>You can redirect the output to a file:</p> <pre><code>$ lango config export default &gt; backup.json\n</code></pre>"},{"location":"cli/config/#lango-config-validate","title":"lango config validate","text":"<p>Validate the active configuration profile against Lango's schema rules.</p> <pre><code>lango config validate\n</code></pre> <p>Example:</p> <pre><code>$ lango config validate\nProfile \"default\" configuration is valid.\n</code></pre> <p>If validation fails, the command prints the specific errors and exits with a non-zero status code.</p>"},{"location":"cli/core/","title":"Core Commands","text":""},{"location":"cli/core/#lango-serve","title":"lango serve","text":"<p>Start the gateway server. This boots the full application stack including all enabled channels, tools, embedding, graph, cron, and workflow engines.</p> <pre><code>lango serve\n</code></pre> <p>The server reads configuration from the active encrypted profile and starts:</p> <ul> <li>HTTP API on the configured port (default <code>18789</code>)</li> <li>WebSocket endpoint (if enabled)</li> <li>All configured channel adapters (Telegram, Discord, Slack)</li> <li>Background systems (cron scheduler, workflow engine) if enabled</li> </ul> <p>Graceful shutdown is handled via <code>SIGINT</code> or <code>SIGTERM</code> with a 10-second timeout.</p> <p>Example:</p> <pre><code>$ lango serve\nINFO  starting lango  {\"version\": \"0.5.0\", \"profile\": \"default\"}\nINFO  server listening  {\"address\": \":18789\"}\n</code></pre>"},{"location":"cli/core/#lango-version","title":"lango version","text":"<p>Print the binary version and build timestamp.</p> <pre><code>lango version\n</code></pre> <p>Example:</p> <pre><code>$ lango version\nlango 0.5.0 (built 2026-02-20T12:00:00Z)\n</code></pre>"},{"location":"cli/core/#lango-health","title":"lango health","text":"<p>Check whether the gateway server is running and healthy. Sends an HTTP GET to the <code>/health</code> endpoint.</p> <pre><code>lango health [--port N]\n</code></pre> Flag Type Default Description <code>--port</code> int <code>18789</code> Gateway port to check <p>Examples:</p> <pre><code># Check default port\n$ lango health\nok\n\n# Check custom port\n$ lango health --port 9090\nok\n</code></pre> <p>Info</p> <p>This command is designed to work as a Docker <code>HEALTHCHECK</code>. It exits with code 0 on success and non-zero on failure.</p>"},{"location":"cli/core/#lango-onboard","title":"lango onboard","text":"<p>Launch the guided 5-step setup wizard using an interactive TUI. This is the recommended way to configure Lango for the first time.</p> <pre><code>lango onboard [--profile &lt;name&gt;]\n</code></pre> Flag Type Default Description <code>--profile</code> string <code>default</code> Profile name to create or edit <p>The wizard walks through five steps:</p> <ol> <li>Provider Setup -- Choose an AI provider and enter API credentials</li> <li>Agent Config -- Select model, max tokens, and temperature</li> <li>Channel Setup -- Configure Telegram, Discord, or Slack</li> <li>Security &amp; Auth -- Enable privacy interceptor and PII protection</li> <li>Test Config -- Validate your configuration</li> </ol> <p>All settings are saved to an encrypted profile in <code>~/.lango/lango.db</code>.</p> <p>Example:</p> <pre><code># Run with default profile\n$ lango onboard\n\n# Create a separate \"staging\" profile\n$ lango onboard --profile staging\n</code></pre> <p>Tip</p> <p>For full control over every configuration option, use <code>lango settings</code> instead.</p>"},{"location":"cli/core/#lango-settings","title":"lango settings","text":"<p>Open the full interactive configuration editor. Provides access to all configuration options organized by category, including advanced features like embedding, graph, payment, and automation settings.</p> <pre><code>lango settings\n</code></pre> <p>The settings editor uses a TUI menu interface where you can navigate through categories and edit individual values. Changes are saved to the active encrypted profile.</p> <p>Note</p> <p>This command requires an interactive terminal. For scripted configuration, use <code>lango config import</code> with a JSON file.</p>"},{"location":"cli/core/#lango-doctor","title":"lango doctor","text":"<p>Run diagnostics to check your Lango configuration and environment for common issues. Optionally attempt to fix problems automatically.</p> <pre><code>lango doctor [--fix] [--json]\n</code></pre> Flag Type Default Description <code>--fix</code> bool <code>false</code> Attempt to automatically fix issues <code>--json</code> bool <code>false</code> Output results as JSON <p>Checks performed:</p> <ul> <li>Encrypted configuration profile validity</li> <li>API key and provider configuration</li> <li>Channel token validation</li> <li>Session database accessibility</li> <li>Server port availability</li> <li>Security configuration (signer, interceptor, passphrase)</li> <li>Embedding provider connectivity</li> <li>Graph store status</li> <li>Multi-agent configuration</li> <li>A2A remote agent connectivity</li> <li>Output scanning and PII detection settings</li> </ul> <p>Examples:</p> <pre><code># Run diagnostics\n$ lango doctor\n\n# Attempt auto-fix for known issues\n$ lango doctor --fix\n\n# Machine-readable output\n$ lango doctor --json\n</code></pre> <p>Tip</p> <p>Run <code>lango doctor</code> after <code>lango onboard</code> to verify your setup is correct. If issues are found, the <code>--fix</code> flag can resolve common problems automatically.</p>"},{"location":"cli/p2p/","title":"P2P Commands","text":"<p>Commands for managing the P2P network on the Sovereign Agent Network. P2P must be enabled in configuration (<code>p2p.enabled = true</code>). See the P2P Network section for detailed documentation.</p> <pre><code>lango p2p &lt;subcommand&gt;\n</code></pre> <p>Experimental Feature</p> <p>The P2P networking system is experimental. Protocol and behavior may change between releases.</p>"},{"location":"cli/p2p/#lango-p2p-status","title":"lango p2p status","text":"<p>Show the P2P node status including peer ID, listen addresses, connected peer count, and feature flags.</p> <pre><code>lango p2p status [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango p2p status\nP2P Node Status\n  Peer ID:          QmYourPeerId123...\n  Listen Addrs:     [/ip4/0.0.0.0/tcp/9000]\n  Connected Peers:  3 / 50\n  mDNS:             true\n  Relay:            false\n  ZK Handshake:     false\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-peers","title":"lango p2p peers","text":"<p>List all currently connected peers with their peer IDs and multiaddrs.</p> <pre><code>lango p2p peers [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango p2p peers\nPEER ID                          ADDRESS\nQmPeer1abc123...                 /ip4/192.168.1.5/tcp/9000\nQmPeer2def456...                 /ip4/10.0.0.3/tcp/9001\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-connect","title":"lango p2p connect","text":"<p>Connect to a peer by its full multiaddr (including the <code>/p2p/&lt;peer-id&gt;</code> suffix).</p> <pre><code>lango p2p connect &lt;multiaddr&gt;\n</code></pre> Argument Description <code>multiaddr</code> Full multiaddr of the peer (e.g., <code>/ip4/1.2.3.4/tcp/9000/p2p/QmPeerId</code>) <p>Example:</p> <pre><code>$ lango p2p connect /ip4/192.168.1.5/tcp/9000/p2p/QmPeer1abc123\nConnected to peer QmPeer1abc123\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-disconnect","title":"lango p2p disconnect","text":"<p>Disconnect from a peer by its peer ID.</p> <pre><code>lango p2p disconnect &lt;peer-id&gt;\n</code></pre> Argument Description <code>peer-id</code> Peer ID to disconnect from <p>Example:</p> <pre><code>$ lango p2p disconnect QmPeer1abc123\nDisconnected from peer QmPeer1abc123\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-firewall","title":"lango p2p firewall","text":"<p>Manage knowledge firewall ACL rules that control peer access.</p>"},{"location":"cli/p2p/#lango-p2p-firewall-list","title":"lango p2p firewall list","text":"<p>List all configured firewall ACL rules.</p> <pre><code>lango p2p firewall list [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango p2p firewall list\nPEER DID                              ACTION  TOOLS         RATE LIMIT\ndid:lango:02abc...                    allow   search_*      10/min\n*                                     deny    exec_*        unlimited\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-firewall-add","title":"lango p2p firewall add","text":"<p>Add a new firewall ACL rule (runtime only \u2014 persist by updating configuration).</p> <pre><code>lango p2p firewall add --peer-did &lt;did&gt; --action &lt;allow|deny&gt; [--tools &lt;patterns&gt;] [--rate-limit &lt;n&gt;]\n</code></pre> Flag Type Default Description <code>--peer-did</code> string required Peer DID to apply the rule to (<code>\"*\"</code> for all) <code>--action</code> string <code>allow</code> Rule action: <code>allow</code> or <code>deny</code> <code>--tools</code> []string <code>[]</code> Tool name patterns (empty = all tools) <code>--rate-limit</code> int <code>0</code> Max requests per minute (0 = unlimited) <p>Example:</p> <pre><code>$ lango p2p firewall add --peer-did \"did:lango:02abc...\" --action allow --tools \"search_*,rag_*\" --rate-limit 10\nFirewall rule added (runtime only):\n  Peer DID:    did:lango:02abc...\n  Action:      allow\n  Tools:       search_*, rag_*\n  Rate Limit:  10/min\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-firewall-remove","title":"lango p2p firewall remove","text":"<p>Remove all firewall rules matching a peer DID.</p> <pre><code>lango p2p firewall remove &lt;peer-did&gt;\n</code></pre> Argument Description <code>peer-did</code> Peer DID whose rules should be removed"},{"location":"cli/p2p/#lango-p2p-discover","title":"lango p2p discover","text":"<p>Discover agents on the P2P network via GossipSub. Optionally filter by capability tag.</p> <pre><code>lango p2p discover [--tag &lt;capability&gt;] [--json]\n</code></pre> Flag Type Default Description <code>--tag</code> string <code>\"\"</code> Filter by capability tag <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango p2p discover --tag research\nNAME              DID                     CAPABILITIES          PEER ID\nresearch-bot      did:lango:02abc...      research, summarize   QmPeer1abc123\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-identity","title":"lango p2p identity","text":"<p>Show the local P2P identity including peer ID, key directory, and listen addresses.</p> <pre><code>lango p2p identity [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango p2p identity\nP2P Identity\n  Peer ID:      QmYourPeerId123...\n  Key Dir:      ~/.lango/p2p\n  Listen Addrs:\n    /ip4/0.0.0.0/tcp/9000\n    /ip6/::/tcp/9000\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-reputation","title":"<code>lango p2p reputation</code>","text":"<p>Show peer reputation and trust score details.</p>"},{"location":"cli/p2p/#usage","title":"Usage","text":"<pre><code>lango p2p reputation --peer-did &lt;did&gt; [--json]\n</code></pre>"},{"location":"cli/p2p/#flags","title":"Flags","text":"Flag Description <code>--peer-did</code> The DID of the peer to query (required) <code>--json</code> Output as JSON"},{"location":"cli/p2p/#examples","title":"Examples","text":"<pre><code># Show reputation for a peer\nlango p2p reputation --peer-did \"did:lango:abc123\"\n\n# Output as JSON\nlango p2p reputation --peer-did \"did:lango:abc123\" --json\n</code></pre>"},{"location":"cli/p2p/#output-fields","title":"Output Fields","text":"Field Description Trust Score Current trust score (0.0 to 1.0) Successes Number of successful exchanges Failures Number of failed exchanges Timeouts Number of timed-out exchanges First Seen Timestamp of first interaction Last Interaction Timestamp of most recent interaction"},{"location":"cli/p2p/#lango-p2p-session","title":"lango p2p session","text":"<p>Manage P2P sessions. List, revoke, or revoke all authenticated peer sessions.</p>"},{"location":"cli/p2p/#lango-p2p-session-list","title":"lango p2p session list","text":"<p>List all active (non-expired, non-invalidated) peer sessions.</p> <pre><code>lango p2p session list [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango p2p session list\nPEER DID                              CREATED                    EXPIRES                    ZK VERIFIED\ndid:lango:02abc123...                 2026-02-25T10:00:00Z       2026-02-25T11:00:00Z       true\ndid:lango:03def456...                 2026-02-25T10:30:00Z       2026-02-25T11:30:00Z       false\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-session-revoke","title":"lango p2p session revoke","text":"<p>Revoke a specific peer's session by DID.</p> <pre><code>lango p2p session revoke --peer-did &lt;did&gt;\n</code></pre> Flag Type Default Description <code>--peer-did</code> string required The DID of the peer to revoke <p>Example:</p> <pre><code>$ lango p2p session revoke --peer-did \"did:lango:02abc123...\"\nSession for did:lango:02abc123... revoked.\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-session-revoke-all","title":"lango p2p session revoke-all","text":"<p>Revoke all active peer sessions.</p> <pre><code>lango p2p session revoke-all\n</code></pre> <p>Example:</p> <pre><code>$ lango p2p session revoke-all\nAll sessions revoked.\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-sandbox","title":"lango p2p sandbox","text":"<p>Manage the P2P tool execution sandbox. Inspect sandbox status, run smoke tests, and clean up orphaned containers.</p>"},{"location":"cli/p2p/#lango-p2p-sandbox-status","title":"lango p2p sandbox status","text":"<p>Show the current sandbox runtime status including isolation configuration, container mode, and active runtime.</p> <pre><code>lango p2p sandbox status\n</code></pre> <p>Example (subprocess mode):</p> <pre><code>$ lango p2p sandbox status\nTool isolation: enabled\n  Timeout per tool: 30s\n  Max memory (MB):  512\n  Container mode:   disabled (subprocess fallback)\n</code></pre> <p>Example (container mode):</p> <pre><code>$ lango p2p sandbox status\nTool isolation: enabled\n  Timeout per tool: 30s\n  Max memory (MB):  512\n  Container mode:   enabled\n  Runtime config:   auto\n  Image:            lango-sandbox:latest\n  Network mode:     none\n  Active runtime:   docker\n  Pool size:        3\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-sandbox-test","title":"lango p2p sandbox test","text":"<p>Run a sandbox smoke test by executing a simple echo tool through the sandbox.</p> <pre><code>lango p2p sandbox test\n</code></pre> <p>Example:</p> <pre><code>$ lango p2p sandbox test\nUsing container runtime: docker\nSmoke test passed: map[msg:sandbox-smoke-test]\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-sandbox-cleanup","title":"lango p2p sandbox cleanup","text":"<p>Find and remove orphaned Docker containers with the <code>lango.sandbox=true</code> label.</p> <pre><code>lango p2p sandbox cleanup\n</code></pre> <p>Example:</p> <pre><code>$ lango p2p sandbox cleanup\nOrphaned sandbox containers cleaned up.\n</code></pre>"},{"location":"cli/p2p/#lango-p2p-pricing","title":"<code>lango p2p pricing</code>","text":"<p>Show P2P tool pricing configuration.</p>"},{"location":"cli/p2p/#usage_1","title":"Usage","text":"<pre><code>lango p2p pricing [--tool &lt;name&gt;] [--json]\n</code></pre>"},{"location":"cli/p2p/#flags_1","title":"Flags","text":"Flag Description <code>--tool</code> Filter pricing for a specific tool <code>--json</code> Output as JSON"},{"location":"cli/p2p/#examples_1","title":"Examples","text":"<pre><code># Show all pricing\nlango p2p pricing\n\n# Show pricing for a specific tool\nlango p2p pricing --tool \"knowledge_search\"\n\n# Output as JSON\nlango p2p pricing --json\n</code></pre>"},{"location":"cli/payment/","title":"Payment Commands","text":"<p>Commands for managing USDC blockchain payments on the Base L2 network. Payment must be enabled in configuration (<code>payment.enabled = true</code>). See the Payments section for detailed documentation.</p> <pre><code>lango payment &lt;subcommand&gt;\n</code></pre> <p>Experimental Feature</p> <p>The payment system is experimental. Use with caution and always verify transaction details before sending.</p>"},{"location":"cli/payment/#lango-payment-balance","title":"lango payment balance","text":"<p>Show the current USDC wallet balance, address, and network information.</p> <pre><code>lango payment balance [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango payment balance\nWallet Balance\n  Balance:   25.50 USDC\n  Address:   0x1234...abcd\n  Network:   Base Sepolia (chain 84532)\n</code></pre>"},{"location":"cli/payment/#lango-payment-history","title":"lango payment history","text":"<p>Show payment transaction history.</p> <pre><code>lango payment history [--json] [--limit N]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <code>--limit</code> int <code>20</code> Maximum number of transactions to show <p>Example:</p> <pre><code>$ lango payment history\nSTATUS     AMOUNT     TO            METHOD   PURPOSE                  TX HASH       CREATED\nconfirmed  1.50 USDC  0x5678...     direct   API access fee           0xaabb...     2026-02-20 14:30\nconfirmed  0.50 USDC  0x9abc...     x402     Weather data query       0xccdd...     2026-02-20 13:15\npending    2.00 USDC  0xdef0...     direct   Document translation     0xeeff...     2026-02-20 12:00\n\n$ lango payment history --limit 5 --json\n</code></pre>"},{"location":"cli/payment/#lango-payment-limits","title":"lango payment limits","text":"<p>Show configured spending limits and current daily usage.</p> <pre><code>lango payment limits [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango payment limits\nSpending Limits\n  Max Per Transaction:  1.00 USDC\n  Max Daily:            10.00 USDC\n  Spent Today:          3.50 USDC\n  Remaining Today:      6.50 USDC\n</code></pre>"},{"location":"cli/payment/#lango-payment-info","title":"lango payment info","text":"<p>Show wallet and payment system configuration details, including X402 protocol status.</p> <pre><code>lango payment info [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango payment info\nPayment System Info\n  Wallet Address:      0x1234...abcd\n  Network:             Base Sepolia (chain 84532)\n  Wallet Provider:     local\n  USDC Contract:       0x036CbD53842c5426634e7929541eC2318f3dCF7e\n  RPC URL:             https://sepolia.base.org\n  X402 Auto-Intercept: disabled\n  X402 Max Auto-Pay:   unlimited USDC\n</code></pre>"},{"location":"cli/payment/#lango-payment-send","title":"lango payment send","text":"<p>Send a USDC payment to a recipient address. Requires <code>--to</code>, <code>--amount</code>, and <code>--purpose</code> flags. Prompts for confirmation unless <code>--force</code> is specified.</p> <pre><code>lango payment send --to &lt;address&gt; --amount &lt;amount&gt; --purpose &lt;text&gt; [--force] [--json]\n</code></pre> Flag Type Default Description <code>--to</code> string required Recipient wallet address (<code>0x...</code>) <code>--amount</code> string required Amount in USDC (e.g., <code>\"1.50\"</code>) <code>--purpose</code> string required Human-readable purpose of the payment <code>--force</code> bool <code>false</code> Skip confirmation prompt <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango payment send \\\n    --to 0x5678abcd1234ef567890abcdef1234567890abcd \\\n    --amount \"1.50\" \\\n    --purpose \"API access fee\"\nSend 1.50 USDC to 0x5678abcd... on Base Sepolia?\nPurpose: API access fee\nConfirm [y/N]: y\n\nPayment Submitted\n  Status:    pending\n  Tx Hash:   0xaabb1234...\n  Amount:    1.50 USDC\n  From:      0x1234abcd...\n  To:        0x5678abcd...\n  Network:   Base Sepolia (chain 84532)\n</code></pre> <p>Irreversible</p> <p>Blockchain transactions cannot be reversed. Always verify the recipient address and amount before confirming.</p> <p>Tip</p> <p>Use <code>--force</code> for non-interactive environments. Without it, the command requires confirmation and fails in non-interactive terminals.</p>"},{"location":"cli/security/","title":"Security Commands","text":"<p>Commands for managing encryption, secrets, and security configuration. See the Security section for detailed documentation.</p> <pre><code>lango security &lt;subcommand&gt;\n</code></pre>"},{"location":"cli/security/#lango-security-status","title":"lango security status","text":"<p>Show the current security configuration status including signer provider, encryption keys, stored secrets count, and interceptor settings.</p> <pre><code>lango security status [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango security status\nSecurity Status\n  Signer Provider:    local\n  Encryption Keys:    2\n  Stored Secrets:     5\n  Interceptor:        enabled\n  PII Redaction:      disabled\n  Approval Policy:    dangerous\n  DB Encryption:      disabled (plaintext)\n</code></pre> <pre><code># With KMS configured\n$ lango security status\nSecurity Status\n  Signer Provider:    aws-kms\n  Encryption Keys:    2\n  Stored Secrets:     5\n  Interceptor:        enabled\n  PII Redaction:      disabled\n  Approval Policy:    dangerous\n  DB Encryption:      encrypted (active)\n  KMS Provider:       aws-kms\n  KMS Key ID:         arn:aws:kms:us-east-1:...\n  KMS Fallback:       enabled\n</code></pre> <p>JSON output fields:</p> Field Type Description <code>signer_provider</code> string Active signer provider (<code>local</code>) <code>encryption_keys</code> int Number of registered encryption keys <code>stored_secrets</code> int Number of stored encrypted secrets <code>interceptor</code> string Interceptor status (<code>enabled</code>/<code>disabled</code>) <code>pii_redaction</code> string PII redaction status (<code>enabled</code>/<code>disabled</code>) <code>approval_policy</code> string Tool approval policy (<code>always</code>, <code>dangerous</code>, <code>never</code>) <code>db_encryption</code> string Database encryption status <code>kms_provider</code> string KMS provider name (when configured) <code>kms_key_id</code> string KMS key identifier (when configured) <code>kms_fallback</code> string KMS fallback status (when configured)"},{"location":"cli/security/#lango-security-migrate-passphrase","title":"lango security migrate-passphrase","text":"<p>Rotate the encryption passphrase. Re-encrypts all stored secrets with a new passphrase. This command requires an interactive terminal.</p> <pre><code>lango security migrate-passphrase\n</code></pre> <p>Important</p> <ul> <li>Only available when using the <code>local</code> security provider</li> <li>Requires an interactive terminal for passphrase input</li> <li>Back up your data directory before running this command</li> <li>If the process is interrupted, data may be corrupted</li> </ul> <p>Process:</p> <ol> <li>Your current passphrase is verified during bootstrap</li> <li>You are prompted to enter and confirm a new passphrase</li> <li>A new random salt is generated</li> <li>All secrets are decrypted with the old passphrase and re-encrypted with the new one</li> <li>The new salt and passphrase checksum are saved</li> </ol> <p>Example:</p> <pre><code>$ lango security migrate-passphrase\nThis process will re-encrypt all your stored secrets with a new passphrase.\nWarning: If this process is interrupted, your data may be corrupted.\nEnsure you have a backup of your data directory.\n\nEnter NEW passphrase:\nConfirm NEW passphrase:\nMigrating secrets...\nMigration completed successfully!\n</code></pre>"},{"location":"cli/security/#hardware-keyring","title":"Hardware Keyring","text":"<p>Manage hardware-backed keyring passphrase storage. Only secure hardware backends are supported (macOS Touch ID / Linux TPM 2.0) to prevent same-UID attacks.</p>"},{"location":"cli/security/#lango-security-keyring-store","title":"lango security keyring store","text":"<p>Store the master passphrase using the best available secure hardware backend. Requires an interactive terminal and a hardware backend (Touch ID or TPM 2.0).</p> <pre><code>lango security keyring store\n</code></pre> <p>Requirements</p> <ul> <li>An interactive terminal (cannot be used in CI/CD)</li> <li>A secure hardware backend (Touch ID on macOS or TPM 2.0 on Linux)</li> <li>On macOS: binary must be codesigned for biometric protection</li> </ul> <p>Example:</p> <pre><code>$ lango security keyring store\nEnter passphrase to store: ********\nPassphrase stored with biometric protection.\n  Next launch will load it automatically.\n</code></pre>"},{"location":"cli/security/#lango-security-keyring-clear","title":"lango security keyring clear","text":"<p>Remove the master passphrase from all hardware keyring backends.</p> <pre><code>lango security keyring clear [--force]\n</code></pre> Flag Type Default Description <code>--force</code> bool <code>false</code> Skip confirmation prompt <p>Examples:</p> <pre><code># Interactive\n$ lango security keyring clear\nRemove passphrase from all keyring backends? [y/N] y\nRemoved passphrase from secure provider.\n\n# Non-interactive\n$ lango security keyring clear --force\nRemoved passphrase from secure provider.\n</code></pre>"},{"location":"cli/security/#lango-security-keyring-status","title":"lango security keyring status","text":"<p>Show hardware keyring availability and stored passphrase status.</p> <pre><code>lango security keyring status [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango security keyring status\nHardware Keyring Status\n  Available:       true\n  Security Tier:   biometric\n  Has Passphrase:  true\n</code></pre> <p>JSON output fields:</p> Field Type Description <code>available</code> bool Whether a hardware keyring is available <code>security_tier</code> string Security tier (<code>biometric</code>, <code>tpm</code>, or <code>none</code>) <code>has_passphrase</code> bool Whether passphrase is stored"},{"location":"cli/security/#database-encryption","title":"Database Encryption","text":"<p>Encrypt or decrypt the application database using SQLCipher.</p>"},{"location":"cli/security/#lango-security-db-migrate","title":"lango security db-migrate","text":"<p>Convert the plaintext SQLite database to SQLCipher-encrypted format using the current passphrase.</p> <pre><code>lango security db-migrate [--force]\n</code></pre> Flag Type Default Description <code>--force</code> bool <code>false</code> Skip confirmation prompt (enables non-interactive mode) <p>Example:</p> <pre><code>$ lango security db-migrate\nThis will encrypt your database. A backup will be created. Continue? [y/N] y\nEnter passphrase for DB encryption: ********\nEncrypting database...\nDatabase encrypted successfully.\nSet security.dbEncryption.enabled=true in your config to use the encrypted DB.\n</code></pre>"},{"location":"cli/security/#lango-security-db-decrypt","title":"lango security db-decrypt","text":"<p>Convert a SQLCipher-encrypted database back to plaintext SQLite.</p> <pre><code>lango security db-decrypt [--force]\n</code></pre> Flag Type Default Description <code>--force</code> bool <code>false</code> Skip confirmation prompt (enables non-interactive mode) <p>Example:</p> <pre><code>$ lango security db-decrypt\nThis will decrypt your database to plaintext. Continue? [y/N] y\nEnter passphrase for DB decryption: ********\nDecrypting database...\nDatabase decrypted successfully.\nSet security.dbEncryption.enabled=false in your config if you no longer want encryption.\n</code></pre>"},{"location":"cli/security/#cloud-kms-hsm","title":"Cloud KMS / HSM","text":"<p>Manage Cloud KMS and HSM integration. Requires <code>security.signer.provider</code> to be set to a KMS provider (<code>aws-kms</code>, <code>gcp-kms</code>, <code>azure-kv</code>, or <code>pkcs11</code>).</p>"},{"location":"cli/security/#lango-security-kms-status","title":"lango security kms status","text":"<p>Show the KMS provider connection status.</p> <pre><code>lango security kms status [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango security kms status\nKMS Status\n  Provider:      aws-kms\n  Key ID:        arn:aws:kms:us-east-1:123456789012:key/example-key\n  Region:        us-east-1\n  Fallback:      enabled\n  Status:        connected\n</code></pre> <p>JSON output fields:</p> Field Type Description <code>provider</code> string KMS provider name <code>key_id</code> string KMS key identifier <code>region</code> string Cloud region (if applicable) <code>fallback</code> string Local fallback status (<code>enabled</code>/<code>disabled</code>) <code>status</code> string Connection status (<code>connected</code>, <code>unreachable</code>, <code>not configured</code>, or error)"},{"location":"cli/security/#lango-security-kms-test","title":"lango security kms test","text":"<p>Test KMS encrypt/decrypt roundtrip using 32 bytes of random data.</p> <pre><code>lango security kms test\n</code></pre> <p>Example:</p> <pre><code>$ lango security kms test\nTesting KMS roundtrip with key \"arn:aws:kms:us-east-1:123456789012:key/example-key\"...\n  Encrypt: OK (32 bytes \u2192 64 bytes)\n  Decrypt: OK (32 bytes)\n  Roundtrip: PASS\n</code></pre>"},{"location":"cli/security/#lango-security-kms-keys","title":"lango security kms keys","text":"<p>List KMS keys registered in the KeyRegistry.</p> <pre><code>lango security kms keys [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango security kms keys\nID                                    NAME                  TYPE          REMOTE KEY ID\n550e8400-e29b-41d4-a716-446655440000  primary-signing       signing       arn:aws:kms:us-east-1:...\n6ba7b810-9dad-11d1-80b4-00c04fd430c8  default-encryption    encryption    arn:aws:kms:us-east-1:...\n</code></pre>"},{"location":"cli/security/#secret-management","title":"Secret Management","text":"<p>Manage encrypted secrets stored in the database. Secret values are never displayed -- only metadata is shown when listing.</p>"},{"location":"cli/security/#lango-security-secrets-list","title":"lango security secrets list","text":"<p>List all stored secrets. Values are never shown.</p> <pre><code>lango security secrets list [--json]\n</code></pre> Flag Type Default Description <code>--json</code> bool <code>false</code> Output as JSON <p>Example:</p> <pre><code>$ lango security secrets list\nNAME               KEY      CREATED           UPDATED           ACCESS_COUNT\nanthropic-api-key  default  2026-01-15 10:00  2026-02-20 14:30  42\ntelegram-token     default  2026-01-15 10:05  2026-01-15 10:05  15\nopenai-api-key     default  2026-02-01 09:00  2026-02-01 09:00  3\n</code></pre>"},{"location":"cli/security/#lango-security-secrets-set","title":"lango security secrets set","text":"<p>Store a new encrypted secret or update an existing one. In interactive mode, prompts for the secret value (input is hidden). In non-interactive mode, use <code>--value-hex</code> to provide a hex-encoded value.</p> <pre><code>lango security secrets set &lt;name&gt; [--value-hex &lt;hex&gt;]\n</code></pre> Argument Required Description <code>name</code> Yes Name identifier for the secret Flag Type Default Description <code>--value-hex</code> string - Hex-encoded value to store (optional <code>0x</code> prefix). Enables non-interactive mode. <p>Examples:</p> <pre><code># Interactive (prompts for value)\n$ lango security secrets set my-api-key\nEnter secret value:\nSecret 'my-api-key' stored successfully.\n\n# Non-interactive with hex value (e.g., wallet private key in Docker/CI)\n$ lango security secrets set wallet.privatekey --value-hex 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80\nSecret 'wallet.privatekey' stored successfully.\n\n# Without 0x prefix\n$ lango security secrets set wallet.privatekey --value-hex ac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80\nSecret 'wallet.privatekey' stored successfully.\n</code></pre> <p>Tip</p> <p>Use <code>--value-hex</code> for non-interactive environments (Docker, CI/CD, scripts). Without it, the command requires an interactive terminal and will fail with an error suggesting <code>--value-hex</code>.</p>"},{"location":"cli/security/#lango-security-secrets-delete","title":"lango security secrets delete","text":"<p>Delete a stored secret. Prompts for confirmation unless <code>--force</code> is specified.</p> <pre><code>lango security secrets delete &lt;name&gt; [--force]\n</code></pre> Argument Required Description <code>name</code> Yes Name of the secret to delete Flag Type Default Description <code>--force</code> bool <code>false</code> Skip confirmation prompt <p>Examples:</p> <pre><code># Interactive confirmation\n$ lango security secrets delete my-api-key\nDelete secret 'my-api-key'? [y/N] y\nSecret 'my-api-key' deleted.\n\n# Non-interactive\n$ lango security secrets delete my-api-key --force\nSecret 'my-api-key' deleted.\n</code></pre> <p>Tip</p> <p>Use <code>--force</code> for non-interactive environments (scripts, CI/CD). Without it, the command fails in non-interactive terminals.</p>"},{"location":"deployment/","title":"Deployment","text":"<p>This section covers how to deploy Lango in containerized and production environments.</p> <ul> <li> <p> Docker</p> <p>Container images, Docker Compose setup, headless configuration, and the Presidio PII profile.</p> <p> Learn more</p> </li> <li> <p> Production Checklist</p> <p>Pre-deployment checklist for security, networking, monitoring, and blockchain configuration.</p> <p> Learn more</p> </li> </ul>"},{"location":"deployment/#related","title":"Related","text":"<ul> <li>Configuration -- General configuration reference</li> <li>Installation -- Build from source</li> </ul>"},{"location":"deployment/docker/","title":"Docker","text":"<p>Lango provides a Docker image that includes all runtime dependencies: Chromium for browser automation, <code>git</code> and <code>curl</code> for skill imports.</p>"},{"location":"deployment/docker/#image-build","title":"Image Build","text":"<p>The Docker image uses a multi-stage build:</p> <ul> <li>Builder stage: <code>golang:1.25-bookworm</code> -- compiles the Go binary with CGO enabled</li> <li>Runtime stage: <code>debian:bookworm-slim</code> -- minimal runtime with Chromium and utilities</li> </ul> <p>Build the image:</p> <pre><code>docker build -t lango:latest .\n</code></pre>"},{"location":"deployment/docker/#docker-compose","title":"Docker Compose","text":"<pre><code>services:\n  lango:\n    build: .\n    image: lango:latest\n    container_name: lango\n    restart: unless-stopped\n    ports:\n      - \"18789:18789\"\n    volumes:\n      - lango-data:/data\n    secrets:\n      - lango_config\n      - lango_passphrase\n    environment:\n      - LANGO_PROFILE=default\n\nsecrets:\n  lango_config:\n    file: ./config.json\n  lango_passphrase:\n    file: ./passphrase.txt\n\nvolumes:\n  lango-data:\n</code></pre>"},{"location":"deployment/docker/#presidio-pii-profile","title":"Presidio PII Profile","text":"<p>To include the Presidio PII redaction service:</p> <pre><code>docker compose --profile presidio up\n</code></pre>"},{"location":"deployment/docker/#headless-configuration","title":"Headless Configuration","text":"<p>For automated or server deployments without interactive onboarding:</p> <p>1. Create <code>config.json</code> with your provider keys and settings:</p> <pre><code>{\n  \"agent\": {\n    \"provider\": \"openai\",\n    \"model\": \"gpt-4o\"\n  },\n  \"channels\": {\n    \"telegram\": {\n      \"enabled\": true,\n      \"botToken\": \"your-telegram-token\"\n    }\n  }\n}\n</code></pre> <p>2. Create <code>passphrase.txt</code> with your encryption passphrase:</p> <pre><code>your-secure-passphrase\n</code></pre> <p>3. Start the container:</p> <pre><code>docker compose up -d\n</code></pre>"},{"location":"deployment/docker/#entrypoint-script","title":"Entrypoint Script","text":"<p>The <code>docker-entrypoint.sh</code> script handles first-run setup:</p> <ol> <li>Copies the passphrase secret to <code>~/.lango/keyfile</code> with mode <code>0600</code></li> <li>First run: copies <code>config.json</code> to <code>/tmp</code>, imports it into the encrypted config store, and the temp file is auto-deleted</li> <li>Subsequent restarts: the existing encrypted profile is reused without re-importing</li> </ol>"},{"location":"deployment/docker/#environment-variables","title":"Environment Variables","text":"Variable Default Description <code>LANGO_PROFILE</code> <code>default</code> Configuration profile name <code>LANGO_CONFIG_FILE</code> -- Path to config JSON for import <code>LANGO_PASSPHRASE_FILE</code> -- Path to passphrase file"},{"location":"deployment/docker/#related","title":"Related","text":"<ul> <li>Production Checklist -- Pre-deployment security and configuration checks</li> <li>Configuration -- Full configuration reference</li> </ul>"},{"location":"deployment/production/","title":"Production Checklist","text":"<p>Use this checklist before deploying Lango to production.</p>"},{"location":"deployment/production/#blockchain-payments","title":"Blockchain &amp; Payments","text":"<ul> <li> Switch to mainnet chain ID (<code>payment.network.chainId: 8453</code> for Base)</li> <li> Set appropriate per-transaction limit (<code>payment.limits.maxPerTx</code>)</li> <li> Set appropriate daily limit (<code>payment.limits.maxDaily</code>)</li> <li> Use RPC signer for production wallet security (<code>payment.walletProvider: rpc</code>)</li> </ul>"},{"location":"deployment/production/#security","title":"Security","text":"<ul> <li> Enable PII redaction (<code>security.interceptor.redactPii: true</code>)</li> <li> Configure OIDC authentication for the HTTP gateway</li> <li> Enable tool approval policies for dangerous tools</li> <li> Review browser tool settings and restrict as needed</li> </ul>"},{"location":"deployment/production/#server-networking","title":"Server &amp; Networking","text":"<ul> <li> Configure allowed origins for CORS (<code>server.allowedOrigins</code>)</li> <li> Set up structured logging (<code>logging.format: json</code>)</li> <li> Set appropriate session TTL (<code>session.ttl</code>)</li> <li> Set appropriate max history turns for memory management</li> </ul>"},{"location":"deployment/production/#monitoring","title":"Monitoring","text":"<ul> <li> Set up health endpoint monitoring (<code>GET /health</code>)</li> <li> Configure Docker health check in production compose file</li> <li> Verify logging output is captured by your log aggregator</li> </ul>"},{"location":"deployment/production/#automation","title":"Automation","text":"<ul> <li> Configure cron delivery channels for scheduled task output</li> <li> Review and test workflow definitions before enabling</li> </ul>"},{"location":"deployment/production/#verification","title":"Verification","text":"<p>After deployment, verify each item:</p> <pre><code># Health check\ncurl -f http://your-host:18789/health\n\n# Docker health status\ndocker inspect --format='{{.State.Health.Status}}' lango\n</code></pre>"},{"location":"deployment/production/#related","title":"Related","text":"<ul> <li>Docker -- Container setup and configuration</li> <li>USDC Payments -- Payment configuration reference</li> <li>Configuration -- Full configuration reference</li> </ul>"},{"location":"development/","title":"Development","text":"<p>This section covers the development workflow for contributing to Lango.</p> <ul> <li> <p> Build &amp; Test</p> <p>Build requirements, Makefile targets, test commands, and the local development workflow.</p> <p> Learn more</p> </li> </ul>"},{"location":"development/#related","title":"Related","text":"<ul> <li>Architecture -- System design and project structure</li> <li>Installation -- Build from source</li> </ul>"},{"location":"development/build-test/","title":"Build &amp; Test","text":""},{"location":"development/build-test/#prerequisites","title":"Prerequisites","text":"<p>Lango requires CGO for sqlite3 and sqlite-vec dependencies. Ensure CGO is enabled:</p> <pre><code>export CGO_ENABLED=1\n</code></pre> <p>You also need a C compiler (<code>gcc</code> or <code>clang</code>) installed on your system.</p>"},{"location":"development/build-test/#makefile-targets","title":"Makefile Targets","text":"Target Description <code>build</code> Build binary for current platform <code>build-linux</code> Cross-compile for Linux amd64 <code>build-darwin</code> Cross-compile for macOS arm64 <code>build-all</code> Build for all platforms <code>install</code> Install binary to <code>$GOPATH/bin</code> <code>dev</code> Build and run server locally <code>run</code> Run server from existing binary <code>test</code> Run tests with race detector and coverage <code>test-short</code> Run short tests only <code>bench</code> Run benchmarks <code>coverage</code> Generate HTML coverage report <code>fmt</code> Format code <code>fmt-check</code> Check code formatting (CI) <code>vet</code> Run <code>go vet</code> <code>lint</code> Run <code>golangci-lint</code> <code>generate</code> Run <code>go generate</code> (Ent code) <code>ci</code> Full local CI pipeline (<code>fmt-check</code> -&gt; <code>vet</code> -&gt; <code>lint</code> -&gt; <code>test</code>) <code>deps</code> Download and tidy dependencies <code>docker-build</code> Build Docker image <code>docker-push</code> Push to registry <code>docker-up</code> Start Docker Compose services <code>docker-down</code> Stop Docker Compose services <code>docker-logs</code> View Docker Compose logs <code>health</code> Check running server health <code>clean</code> Remove build artifacts"},{"location":"development/build-test/#development-workflow","title":"Development Workflow","text":"<p>The typical workflow for local development:</p> <pre><code># 1. Download and tidy dependencies\nmake deps\n\n# 2. Generate Ent ORM code\nmake generate\n\n# 3. Build the binary\nmake build\n\n# 4. Run tests\nmake test\n\n# 5. Lint\nmake lint\n</code></pre> <p>Or run the full CI pipeline locally:</p> <pre><code>make ci\n</code></pre>"},{"location":"development/build-test/#code-generation","title":"Code Generation","text":"<p>Lango uses Ent ORM for database schema management. After modifying any schema in the <code>ent/schema/</code> directory, regenerate the ORM code:</p> <pre><code>make generate\n</code></pre>"},{"location":"development/build-test/#running-locally","title":"Running Locally","text":"<p>Build and start the server in one step:</p> <pre><code>make dev\n</code></pre> <p>Or run from an existing binary:</p> <pre><code>make run\n</code></pre>"},{"location":"development/build-test/#testing","title":"Testing","text":"<p>Run the full test suite with race detection and coverage:</p> <pre><code>make test\n</code></pre> <p>Run only short tests (skip integration tests):</p> <pre><code>make test-short\n</code></pre> <p>Generate an HTML coverage report:</p> <pre><code>make coverage\n</code></pre> <p>Run benchmarks:</p> <pre><code>make bench\n</code></pre>"},{"location":"development/build-test/#related","title":"Related","text":"<ul> <li>Installation -- Build from source</li> <li>Docker -- Container-based builds</li> <li>Architecture -- System design and project structure</li> </ul>"},{"location":"features/","title":"Features","text":"<p>Lango provides a comprehensive set of features for building intelligent AI agents. This section covers each subsystem in detail.</p> <ul> <li> <p> AI Providers</p> <p>Multi-provider support for OpenAI, Anthropic, Gemini, and Ollama with a unified interface and automatic fallback.</p> <p> Learn more</p> </li> <li> <p> Channels</p> <p>Connect your agent to Telegram, Discord, and Slack. Manage conversations across channels from a single instance.</p> <p> Learn more</p> </li> <li> <p> Knowledge System</p> <p>Self-learning knowledge store with 8-layer context retrieval, pattern recognition, and agent learning tools.</p> <p> Learn more</p> </li> <li> <p> Observational Memory</p> <p>Automatic conversation compression through observations and reflections for long-running sessions.</p> <p> Learn more</p> </li> <li> <p> Embedding &amp; RAG</p> <p>Vector embeddings with OpenAI, Google, or local providers. Retrieval-augmented generation for semantic context injection.</p> <p> Learn more</p> </li> <li> <p> Knowledge Graph </p> <p>BoltDB-backed triple store with hybrid vector + graph retrieval for deep contextual understanding.</p> <p> Learn more</p> </li> <li> <p> Multi-Agent Orchestration </p> <p>Hierarchical sub-agents (Executor, Researcher, Planner, Memory Manager) working together on complex tasks.</p> <p> Learn more</p> </li> <li> <p> A2A Protocol </p> <p>Agent-to-Agent protocol for remote agent discovery and inter-agent communication.</p> <p> Learn more</p> </li> <li> <p> P2P Network </p> <p>Decentralized agent-to-agent connectivity via libp2p with DID identity, knowledge firewall, and ZK-enhanced handshake.</p> <p> Learn more</p> </li> <li> <p> Skill System</p> <p>File-based skills with import from URLs and GitHub repositories. Extend agent capabilities without code changes.</p> <p> Learn more</p> </li> <li> <p> Proactive Librarian </p> <p>Autonomous knowledge agent that observes conversations and proactively curates the knowledge base.</p> <p> Learn more</p> </li> <li> <p> System Prompts</p> <p>Customizable prompt sections for agent personality, safety rules, and behavior tuning.</p> <p> Learn more</p> </li> </ul>"},{"location":"features/#feature-status","title":"Feature Status","text":"Feature Status Config Key AI Providers Stable <code>agent.provider</code> Channels Stable <code>channels.*</code> Knowledge System Stable <code>knowledge.enabled</code> Observational Memory Stable <code>observationalMemory.enabled</code> Embedding &amp; RAG Stable <code>embedding.*</code> Knowledge Graph Experimental <code>graph.enabled</code> Multi-Agent Orchestration Experimental <code>agent.multiAgent</code> A2A Protocol Experimental <code>a2a.enabled</code> P2P Network Experimental <code>p2p.enabled</code> Skill System Stable <code>skill.enabled</code> Proactive Librarian Experimental <code>librarian.enabled</code> System Prompts Stable <code>agent.promptsDir</code> <p>Experimental Features</p> <p>Features marked as Experimental are under active development. Their APIs, configuration keys, and behavior may change between releases. Enable them explicitly via their config flags.</p>"},{"location":"features/a2a-protocol/","title":"A2A Protocol","text":"<p>Experimental</p> <p>The A2A (Agent-to-Agent) protocol integration is experimental. The API surface may change in future releases.</p> <p>Lango supports the A2A protocol for inter-agent communication. This allows a Lango instance to advertise its capabilities via an Agent Card and to discover and integrate external A2A-compatible agents as sub-agents.</p>"},{"location":"features/a2a-protocol/#overview","title":"Overview","text":"<p>The A2A implementation has two sides:</p> <ol> <li>Server -- Exposes this Lango agent as an A2A service with a discoverable Agent Card</li> <li>Client -- Discovers and integrates remote A2A agents into the local orchestrator tree</li> </ol> <pre><code>graph LR\n    subgraph Local Lango\n        O[Orchestrator] --&gt; L[Local Sub-Agents]\n        O --&gt; RA[Remote Agent Proxy]\n    end\n\n    subgraph Remote Service\n        AC[Agent Card&lt;br/&gt;/.well-known/agent.json]\n        RS[Remote Agent]\n    end\n\n    RA -- \"A2A Protocol\" --&gt; RS\n    RA -. \"discovery\" .-&gt; AC\n\n    style AC fill:#e67e22,color:#fff\n    style RA fill:#e67e22,color:#fff</code></pre>"},{"location":"features/a2a-protocol/#agent-card","title":"Agent Card","text":"<p>When A2A is enabled, Lango serves an Agent Card at <code>/.well-known/agent.json</code>. The card describes the agent's name, description, URL, and skills.</p>"},{"location":"features/a2a-protocol/#card-structure","title":"Card Structure","text":"<pre><code>{\n  \"name\": \"lango-assistant\",\n  \"description\": \"Lango AI Assistant\",\n  \"url\": \"https://your-host:18789\",\n  \"skills\": [\n    {\n      \"id\": \"lango-orchestrator\",\n      \"name\": \"lango-orchestrator\",\n      \"description\": \"Lango Assistant Orchestrator\",\n      \"tags\": [\"orchestration\"]\n    },\n    {\n      \"id\": \"operator\",\n      \"name\": \"operator\",\n      \"description\": \"System operations: shell commands, file I/O, and skill execution\",\n      \"tags\": [\"sub_agent:lango-orchestrator\"]\n    }\n  ]\n}\n</code></pre> <p>Skills are automatically derived from the agent tree. The root agent is listed with the <code>orchestration</code> tag, and each sub-agent is listed with a <code>sub_agent:&lt;parent&gt;</code> tag.</p>"},{"location":"features/a2a-protocol/#remote-agents","title":"Remote Agents","text":"<p>Remote A2A agents are discovered by fetching their Agent Card from a configured URL. Each remote agent is integrated as a sub-agent in the multi-agent orchestrator.</p>"},{"location":"features/a2a-protocol/#discovery-process","title":"Discovery Process","text":"<ol> <li>Lango fetches the Agent Card from the configured <code>agentCardUrl</code></li> <li>The ADK <code>remoteagent.NewA2A()</code> creates a proxy agent from the card</li> <li>The proxy is added to the orchestrator's sub-agent list</li> <li>The orchestrator can delegate tasks to the remote agent via <code>transfer_to_agent</code></li> </ol>"},{"location":"features/a2a-protocol/#graceful-degradation","title":"Graceful Degradation","text":"<p>If a remote agent is unreachable during startup, Lango logs a warning and skips it. The rest of the agent tree continues to function normally. No remote agent failure blocks the startup process.</p> <pre><code>WARN  load remote agent  name=weather-agent  url=https://weather.example.com/.well-known/agent.json  error=connection refused\n</code></pre>"},{"location":"features/a2a-protocol/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 A2A Protocol</p> <pre><code>{\n  \"a2a\": {\n    \"enabled\": true,\n    \"baseUrl\": \"https://your-host:18789\",\n    \"agentName\": \"lango-assistant\",\n    \"agentDescription\": \"Lango AI Assistant\",\n    \"remoteAgents\": [\n      {\n        \"name\": \"weather-agent\",\n        \"agentCardUrl\": \"https://weather.example.com/.well-known/agent.json\"\n      },\n      {\n        \"name\": \"code-review-agent\",\n        \"agentCardUrl\": \"https://review.example.com/.well-known/agent.json\"\n      }\n    ]\n  }\n}\n</code></pre> Setting Default Description <code>a2a.enabled</code> <code>false</code> Enable A2A protocol support <code>a2a.baseUrl</code> <code>\"\"</code> External URL where this agent is reachable <code>a2a.agentName</code> (agent name) Name advertised in the Agent Card <code>a2a.agentDescription</code> (agent description) Description in the Agent Card <code>a2a.remoteAgents</code> <code>[]</code> List of remote agents to integrate <p>Each remote agent entry requires:</p> Field Description <code>name</code> Local name for the remote agent <code>agentCardUrl</code> URL to fetch the Agent Card (typically <code>https://host/.well-known/agent.json</code>)"},{"location":"features/a2a-protocol/#setup","title":"Setup","text":""},{"location":"features/a2a-protocol/#enable-via-onboard","title":"Enable via Onboard","text":"<p>The A2A protocol can be enabled during the interactive onboarding flow:</p> <pre><code>lango onboard\n</code></pre> <p>Select the A2A Protocol option from the feature menu.</p>"},{"location":"features/a2a-protocol/#add-remote-agents","title":"Add Remote Agents","text":"<p>Remote agents are configured via the config file. Use the config export/edit/import workflow:</p> <pre><code># Export current config\nlango config export &gt; config.yaml\n\n# Edit to add remote agents under a2a.remoteAgents\n# ...\n\n# Import updated config\nlango config import config.yaml\n</code></pre> <p>Requires Multi-Agent Mode</p> <p>A2A remote agents are only useful when <code>agent.multiAgent</code> is enabled, since they are integrated as sub-agents in the orchestrator tree. Without multi-agent mode, remote agents have no delegation target.</p>"},{"location":"features/a2a-protocol/#a2a-over-http-vs-a2a-over-p2p","title":"A2A-over-HTTP vs A2A-over-P2P","text":"<p>Lango supports two modes of inter-agent communication:</p> Aspect A2A-over-HTTP A2A-over-P2P Transport HTTP/HTTPS libp2p (TCP/QUIC + Noise) Discovery Agent Card at <code>/.well-known/agent.json</code> GossipSub agent card propagation Identity URL-based DID-based (<code>did:lango:&lt;pubkey&gt;</code>) Auth None (relies on network security) ZK-enhanced handshake + session tokens Firewall None Knowledge firewall with ACL rules Use case Cloud-hosted agents, public APIs Sovereign agents, private networks Config <code>a2a.enabled</code> <code>p2p.enabled</code> <p>Both modes can be enabled simultaneously. A2A-over-HTTP is simpler to set up for public agents, while A2A-over-P2P provides stronger security guarantees and works without centralized infrastructure.</p> <p>See P2P Network for P2P-specific documentation.</p>"},{"location":"features/ai-providers/","title":"AI Providers","text":"<p>Lango supports multiple AI providers through a unified interface. Switch between providers without changing application code.</p>"},{"location":"features/ai-providers/#supported-providers","title":"Supported Providers","text":"Provider Config ID Models Notes OpenAI <code>openai</code> GPT-5.2, GPT-5.3 Codex Also supports OpenAI-compatible APIs via <code>baseUrl</code> Anthropic <code>anthropic</code> Claude Opus, Sonnet, Haiku Full tool-use support Gemini <code>gemini</code> Gemini Pro, Flash Google Generative AI Ollama <code>ollama</code> Any local model Default endpoint: <code>http://localhost:11434/v1</code>"},{"location":"features/ai-providers/#provider-aliases","title":"Provider Aliases","text":"<p>For convenience, Lango resolves common aliases to their canonical provider IDs:</p> Alias Resolves To <code>gpt</code>, <code>chatgpt</code> <code>openai</code> <code>claude</code> <code>anthropic</code> <code>llama</code> <code>ollama</code> <code>bard</code> <code>gemini</code> <p>You can use aliases anywhere a provider ID is accepted (CLI flags, config files, etc.).</p>"},{"location":"features/ai-providers/#configuration","title":"Configuration","text":""},{"location":"features/ai-providers/#interactive-setup","title":"Interactive Setup","text":"<p>The easiest way to configure providers is through the onboarding wizard:</p> <pre><code>lango onboard\n</code></pre> <p>Or update provider settings at any time:</p> <pre><code>lango settings\n</code></pre>"},{"location":"features/ai-providers/#config-file","title":"Config File","text":"<p>Providers are defined in the <code>providers</code> map in your config file (<code>~/.lango/config.yaml</code>):</p> <p>Settings: <code>lango settings</code> \u2192 Providers</p> <pre><code>{\n  \"providers\": {\n    \"my-openai\": {\n      \"type\": \"openai\",\n      \"apiKey\": \"${OPENAI_API_KEY}\"\n    },\n    \"my-anthropic\": {\n      \"type\": \"anthropic\",\n      \"apiKey\": \"${ANTHROPIC_API_KEY}\"\n    },\n    \"my-gemini\": {\n      \"type\": \"gemini\",\n      \"apiKey\": \"${GEMINI_API_KEY}\"\n    },\n    \"local-ollama\": {\n      \"type\": \"ollama\"\n    }\n  }\n}\n</code></pre> <p>Then reference a provider in the agent config:</p> <p>Settings: <code>lango settings</code> \u2192 Agent</p> <pre><code>{\n  \"agent\": {\n    \"provider\": \"openai\",\n    \"model\": \"gpt-5.2\"\n  }\n}\n</code></pre> <p>Environment Variable Substitution</p> <p>API keys support <code>${ENV_VAR}</code> syntax. Store sensitive keys in environment variables rather than plain text in the config file.</p>"},{"location":"features/ai-providers/#openai-compatible-apis","title":"OpenAI-Compatible APIs","text":"<p>Any OpenAI-compatible API can be used by setting a custom <code>baseUrl</code>:</p> <p>Settings: <code>lango settings</code> \u2192 Providers</p> <pre><code>{\n  \"providers\": {\n    \"my-custom-llm\": {\n      \"type\": \"openai\",\n      \"apiKey\": \"${CUSTOM_API_KEY}\",\n      \"baseUrl\": \"https://api.custom-provider.com/v1\"\n    }\n  }\n}\n</code></pre>"},{"location":"features/ai-providers/#ollama-local-models","title":"Ollama (Local Models)","text":"<p>Ollama requires no API key. Just ensure the Ollama server is running:</p> <pre><code># Start Ollama\nollama serve\n\n# Pull a model\nollama pull llama3.2\n</code></pre> <p>Settings: <code>lango settings</code> \u2192 Providers</p> <pre><code>{\n  \"providers\": {\n    \"local\": {\n      \"type\": \"ollama\"\n    }\n  }\n}\n</code></pre> <p>The default endpoint is <code>http://localhost:11434/v1</code>.</p>"},{"location":"features/ai-providers/#fallback-configuration","title":"Fallback Configuration","text":"<p>Configure a fallback provider to handle failures gracefully:</p> <p>Settings: <code>lango settings</code> \u2192 Agent</p> <pre><code>{\n  \"agent\": {\n    \"provider\": \"anthropic\",\n    \"model\": \"claude-sonnet-4-6\",\n    \"fallbackProvider\": \"openai\",\n    \"fallbackModel\": \"gpt-5.2\"\n  }\n}\n</code></pre> <p>When the primary provider fails, Lango automatically retries with the fallback provider and model.</p> <p>Recommended Setup</p> <p>Use a reasoning model (e.g., Claude Opus, GPT-5.3 Codex) as your primary provider for complex tasks, and a faster model as the fallback for reliability.</p>"},{"location":"features/ai-providers/#provider-selection","title":"Provider Selection","text":"<p>The agent resolves providers in this order:</p> <ol> <li>Explicit provider -- <code>agent.provider</code> + <code>agent.model</code> in config</li> <li>Alias resolution -- common names mapped to canonical IDs</li> <li>Provider map lookup -- matches against entries in <code>providers</code></li> </ol>"},{"location":"features/ai-providers/#related","title":"Related","text":"<ul> <li>Configuration Basics -- Full config file reference</li> <li>Embedding &amp; RAG -- Embedding providers share the same provider map</li> </ul>"},{"location":"features/channels/","title":"Channels","text":"<p>Lango supports multi-channel communication, allowing your agent to interact with users across different messaging platforms simultaneously.</p>"},{"location":"features/channels/#supported-channels","title":"Supported Channels","text":"Channel Config Section Implementation Telegram <code>channels.telegram</code> <code>internal/channels/telegram/</code> Discord <code>channels.discord</code> <code>internal/channels/discord/</code> Slack <code>channels.slack</code> <code>internal/channels/slack/</code> <p>Each channel runs as an independent integration within the same Lango process. Messages from all channels are routed to the same agent, maintaining separate sessions per user/channel.</p>"},{"location":"features/channels/#setup","title":"Setup","text":"<p>The easiest way to configure channels is through the onboarding wizard:</p> <pre><code>lango onboard\n</code></pre> <p>Select Channel Setup during onboarding to configure one or more channels.</p>"},{"location":"features/channels/#telegram","title":"Telegram","text":""},{"location":"features/channels/#prerequisites","title":"Prerequisites","text":"<ol> <li>Create a bot via BotFather on Telegram</li> <li>Copy the bot token</li> </ol>"},{"location":"features/channels/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Channels</p> <pre><code>{\n  \"channels\": {\n    \"telegram\": {\n      \"enabled\": true,\n      \"botToken\": \"${TELEGRAM_BOT_TOKEN}\",\n      \"allowlist\": []\n    }\n  }\n}\n</code></pre> Key Type Description <code>enabled</code> <code>bool</code> Enable the Telegram channel <code>botToken</code> <code>string</code> Bot token from BotFather <code>allowlist</code> <code>[]int64</code> Allowed user/group IDs (empty = allow all) <p>Security</p> <p>In production, always set <code>allowlist</code> to restrict which Telegram users and groups can interact with your agent.</p>"},{"location":"features/channels/#discord","title":"Discord","text":""},{"location":"features/channels/#prerequisites_1","title":"Prerequisites","text":"<ol> <li>Create an application in the Discord Developer Portal</li> <li>Create a bot user and copy the bot token</li> <li>Note the Application ID for slash command registration</li> </ol>"},{"location":"features/channels/#configuration_1","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Channels</p> <pre><code>{\n  \"channels\": {\n    \"discord\": {\n      \"enabled\": true,\n      \"botToken\": \"${DISCORD_BOT_TOKEN}\",\n      \"applicationId\": \"your-application-id\",\n      \"allowedGuilds\": []\n    }\n  }\n}\n</code></pre> Key Type Description <code>enabled</code> <code>bool</code> Enable the Discord channel <code>botToken</code> <code>string</code> Bot token from Discord Developer Portal <code>applicationId</code> <code>string</code> Application ID for slash commands <code>allowedGuilds</code> <code>[]string</code> Allowed guild (server) IDs (empty = allow all)"},{"location":"features/channels/#slack","title":"Slack","text":""},{"location":"features/channels/#prerequisites_2","title":"Prerequisites","text":"<ol> <li>Create a Slack app at api.slack.com</li> <li>Enable Socket Mode for real-time events</li> <li>Add required bot scopes and install to your workspace</li> </ol>"},{"location":"features/channels/#configuration_2","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Channels</p> <pre><code>{\n  \"channels\": {\n    \"slack\": {\n      \"enabled\": true,\n      \"botToken\": \"${SLACK_BOT_TOKEN}\",\n      \"appToken\": \"${SLACK_APP_TOKEN}\",\n      \"signingSecret\": \"${SLACK_SIGNING_SECRET}\"\n    }\n  }\n}\n</code></pre> Key Type Description <code>enabled</code> <code>bool</code> Enable the Slack channel <code>botToken</code> <code>string</code> Bot OAuth token (<code>xoxb-...</code>) <code>appToken</code> <code>string</code> App-level token for Socket Mode (<code>xapp-...</code>) <code>signingSecret</code> <code>string</code> Signing secret for request verification"},{"location":"features/channels/#channel-features","title":"Channel Features","text":"<p>All channels share the following capabilities:</p> <ul> <li>Session isolation -- Each user/channel combination gets its own session</li> <li>Tool approval -- Interactive approval prompts forwarded to the originating channel</li> <li>Message formatting -- Markdown/rich text adapted per platform</li> <li>Delivery targets -- Automation systems (cron, background, workflow) can deliver results to any enabled channel</li> </ul>"},{"location":"features/channels/#multiple-channels","title":"Multiple Channels","text":"<p>You can enable multiple channels simultaneously. Each runs independently:</p> <p>Settings: <code>lango settings</code> \u2192 Channels</p> <pre><code>{\n  \"channels\": {\n    \"telegram\": {\n      \"enabled\": true,\n      \"botToken\": \"${TELEGRAM_BOT_TOKEN}\"\n    },\n    \"discord\": {\n      \"enabled\": true,\n      \"botToken\": \"${DISCORD_BOT_TOKEN}\",\n      \"applicationId\": \"123456789\"\n    },\n    \"slack\": {\n      \"enabled\": true,\n      \"botToken\": \"${SLACK_BOT_TOKEN}\",\n      \"appToken\": \"${SLACK_APP_TOKEN}\",\n      \"signingSecret\": \"${SLACK_SIGNING_SECRET}\"\n    }\n  }\n}\n</code></pre>"},{"location":"features/channels/#related","title":"Related","text":"<ul> <li>Tool Approval -- How approval prompts work across channels</li> <li>Cron Scheduling -- Deliver scheduled results to channels</li> <li>Background Tasks -- Deliver async results to channels</li> </ul>"},{"location":"features/embedding-rag/","title":"Embedding &amp; RAG","text":"<p>Lango supports vector embeddings for semantic search and Retrieval-Augmented Generation (RAG). When enabled, relevant knowledge entries are retrieved via vector similarity and injected into the agent's context.</p>"},{"location":"features/embedding-rag/#embedding-providers","title":"Embedding Providers","text":"Provider Config Type Default Model Default Dimensions Notes OpenAI <code>openai</code> <code>text-embedding-3-small</code> 1536 Also supports <code>text-embedding-3-large</code> Google <code>google</code> <code>text-embedding-004</code> 768 Via Google Generative AI API Local <code>local</code> <code>nomic-embed-text</code> 768 Ollama-compatible, no API key required"},{"location":"features/embedding-rag/#setup","title":"Setup","text":""},{"location":"features/embedding-rag/#interactive-setup","title":"Interactive Setup","text":"<p>The easiest way to configure embedding is through the onboarding wizard:</p> <pre><code>lango onboard\n</code></pre> <p>Select Embedding &amp; RAG from the setup menu.</p>"},{"location":"features/embedding-rag/#config-file","title":"Config File","text":""},{"location":"features/embedding-rag/#using-a-cloud-provider","title":"Using a Cloud Provider","text":"<p>Reference an existing entry from the <code>providers</code> map via <code>providerID</code>:</p> <p>Settings: <code>lango settings</code> \u2192 Embedding &amp; RAG</p> <pre><code>{\n  \"providers\": {\n    \"my-openai\": {\n      \"type\": \"openai\",\n      \"apiKey\": \"${OPENAI_API_KEY}\"\n    }\n  },\n  \"embedding\": {\n    \"providerID\": \"my-openai\",\n    \"model\": \"text-embedding-3-small\",\n    \"dimensions\": 1536,\n    \"rag\": {\n      \"enabled\": true,\n      \"maxResults\": 5\n    }\n  }\n}\n</code></pre>"},{"location":"features/embedding-rag/#using-local-ollama-embeddings","title":"Using Local (Ollama) Embeddings","text":"<p>For local embeddings, set <code>provider</code> to <code>local</code> instead of using <code>providerID</code>:</p> <p>Settings: <code>lango settings</code> \u2192 Embedding &amp; RAG</p> <pre><code>{\n  \"embedding\": {\n    \"provider\": \"local\",\n    \"model\": \"nomic-embed-text\",\n    \"dimensions\": 768,\n    \"local\": {\n      \"baseUrl\": \"http://localhost:11434/v1\"\n    },\n    \"rag\": {\n      \"enabled\": true,\n      \"maxResults\": 5\n    }\n  }\n}\n</code></pre> <p>Local Setup</p> <p>Make sure Ollama is running and the embedding model is pulled:</p> <pre><code>ollama serve\nollama pull nomic-embed-text\n</code></pre>"},{"location":"features/embedding-rag/#rag-retrieval-augmented-generation","title":"RAG (Retrieval-Augmented Generation)","text":"<p>When <code>embedding.rag.enabled</code> is <code>true</code>, Lango performs semantic retrieval on every agent turn:</p> <ol> <li>The user's message is embedded into a vector</li> <li>The vector is compared against stored embeddings across collections</li> <li>The most similar entries are retrieved and injected into the agent's context</li> </ol>"},{"location":"features/embedding-rag/#collections","title":"Collections","text":"<p>RAG searches across these embedding collections:</p> Collection Source <code>knowledge</code> Knowledge store entries <code>observation</code> Observational memory observations <code>reflection</code> Observational memory reflections <code>learning</code> Learning engine entries <p>You can restrict which collections are searched:</p> <p>Settings: <code>lango settings</code> \u2192 Embedding &amp; RAG</p> <pre><code>{\n  \"embedding\": {\n    \"rag\": {\n      \"enabled\": true,\n      \"maxResults\": 5,\n      \"collections\": [\"knowledge\", \"learning\"]\n    }\n  }\n}\n</code></pre> <p>Leave <code>collections</code> empty to search all collections.</p>"},{"location":"features/embedding-rag/#distance-filtering","title":"Distance Filtering","text":"<p>Set <code>maxDistance</code> to filter out low-relevance results:</p> <p>Settings: <code>lango settings</code> \u2192 Embedding &amp; RAG</p> <pre><code>{\n  \"embedding\": {\n    \"rag\": {\n      \"enabled\": true,\n      \"maxResults\": 5,\n      \"maxDistance\": 0.8\n    }\n  }\n}\n</code></pre> <p>Set to <code>0.0</code> (default) to disable distance filtering.</p>"},{"location":"features/embedding-rag/#configuration-reference","title":"Configuration Reference","text":"<p>Settings: <code>lango settings</code> \u2192 Embedding &amp; RAG</p> <pre><code>{\n  \"embedding\": {\n    \"providerID\": \"\",\n    \"provider\": \"\",\n    \"model\": \"\",\n    \"dimensions\": 0,\n    \"local\": {\n      \"baseUrl\": \"http://localhost:11434/v1\",\n      \"model\": \"\"\n    },\n    \"rag\": {\n      \"enabled\": false,\n      \"maxResults\": 5,\n      \"collections\": [],\n      \"maxDistance\": 0.0\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>providerID</code> <code>string</code> <code>\"\"</code> References a key in the <code>providers</code> map <code>provider</code> <code>string</code> <code>\"\"</code> Set to <code>\"local\"</code> for Ollama embeddings <code>model</code> <code>string</code> varies Embedding model identifier <code>dimensions</code> <code>int</code> varies Vector dimensionality <code>local.baseUrl</code> <code>string</code> <code>http://localhost:11434/v1</code> Ollama API endpoint <code>local.model</code> <code>string</code> <code>\"\"</code> Override model for local provider <code>rag.enabled</code> <code>bool</code> <code>false</code> Enable RAG context injection <code>rag.maxResults</code> <code>int</code> <code>5</code> Maximum results to inject per query <code>rag.collections</code> <code>[]string</code> <code>[]</code> Collections to search (empty = all) <code>rag.maxDistance</code> <code>float32</code> <code>0.0</code> Maximum cosine distance (0.0 = disabled)"},{"location":"features/embedding-rag/#embedding-cache","title":"Embedding Cache","text":"<p>Lango includes an automatic in-memory embedding cache to reduce redundant API calls:</p> Parameter Value TTL 5 minutes Max entries 100 Eviction Expired entries first, then oldest <p>The cache is transparent and requires no configuration. It applies to both query embeddings and content embeddings.</p>"},{"location":"features/embedding-rag/#verification","title":"Verification","text":"<p>Use <code>lango doctor</code> to verify your embedding configuration:</p> <pre><code>lango doctor\n</code></pre> <p>The doctor checks:</p> <ul> <li>Provider configuration is valid</li> <li>API key is set (for cloud providers)</li> <li>Embedding model is accessible</li> <li>Vector store is operational</li> </ul>"},{"location":"features/embedding-rag/#related","title":"Related","text":"<ul> <li>Knowledge System -- Knowledge entries are embedded for RAG retrieval</li> <li>Observational Memory -- Observations and reflections are embedded</li> <li>Knowledge Graph -- Graph RAG combines vector + graph retrieval</li> </ul>"},{"location":"features/knowledge-graph/","title":"Knowledge Graph &amp; Graph RAG","text":"<p>Lango includes a BoltDB-backed knowledge graph that stores entity relationships as Subject-Predicate-Object triples, and a Graph RAG service that combines vector similarity search with graph traversal for deeper contextual retrieval.</p>"},{"location":"features/knowledge-graph/#overview","title":"Overview","text":"<p>The knowledge graph serves two purposes:</p> <ol> <li>Relationship storage -- Captures how entities, errors, sessions, and learnings relate to each other</li> <li>Graph RAG -- Augments vector-based retrieval with graph expansion for richer context</li> </ol> <pre><code>graph LR\n    A[User Query] --&gt; B[Vector Search]\n    B --&gt; C[Top-K Results]\n    C --&gt; D[Graph Expansion]\n    D --&gt; E[Combined Context]\n    E --&gt; F[LLM Response]</code></pre>"},{"location":"features/knowledge-graph/#triple-store","title":"Triple Store","text":"<p>The graph stores data as triples -- <code>(Subject, Predicate, Object)</code> relationships with optional metadata.</p>"},{"location":"features/knowledge-graph/#data-model","title":"Data Model","text":"<pre><code>type Triple struct {\n    Subject   string\n    Predicate string\n    Object    string\n    Metadata  map[string]string\n}\n</code></pre>"},{"location":"features/knowledge-graph/#predicates","title":"Predicates","text":"<p>Each triple uses one of these predicate types:</p> Predicate Meaning Example <code>related_to</code> Semantic relationship <code>go_concurrency</code> related_to <code>goroutines</code> <code>caused_by</code> Causal (effect to cause) <code>timeout_error</code> caused_by <code>network_latency</code> <code>resolved_by</code> Resolution (error to fix) <code>auth_failure</code> resolved_by <code>token_refresh</code> <code>follows</code> Temporal ordering <code>observation_2</code> follows <code>observation_1</code> <code>similar_to</code> Similarity <code>nil_pointer</code> similar_to <code>null_reference</code> <code>contains</code> Containment <code>session_abc</code> contains <code>observation_1</code> <code>in_session</code> Session membership <code>error_node</code> in_session <code>session_abc</code> <code>reflects_on</code> Reflection target <code>reflection_1</code> reflects_on <code>observation_3</code> <code>learned_from</code> Provenance <code>fix_token_refresh</code> learned_from <code>session_abc</code>"},{"location":"features/knowledge-graph/#boltdb-indexes","title":"BoltDB Indexes","text":"<p>The store maintains three BoltDB bucket indexes for efficient querying from any direction:</p> Index Key Order Optimized For SPO Subject, Predicate, Object \"What does X relate to?\" POS Predicate, Object, Subject \"What has predicate P targeting O?\" OSP Object, Subject, Predicate \"What points to X?\" <p>All three indexes are updated atomically on every write, ensuring consistency.</p>"},{"location":"features/knowledge-graph/#entity-extraction","title":"Entity Extraction","text":"<p>Lango uses an LLM-based extractor to automatically discover entities and relationships from conversation text. The extractor:</p> <ol> <li>Sends text to the AI provider with an extraction prompt</li> <li>Parses the response into <code>Subject|Predicate|Object</code> triples</li> <li>Validates predicates against the known set</li> <li>Writes triples to the graph store via the async buffer</li> </ol> <p>Async Processing</p> <p>Graph updates go through a <code>GraphBuffer</code> that batches writes (up to 64 triples or every 2 seconds) to avoid blocking the main conversation loop. The buffer follows the Start/Enqueue/Stop lifecycle pattern used throughout Lango.</p>"},{"location":"features/knowledge-graph/#graph-rag","title":"Graph RAG","text":"<p>Graph RAG performs 2-phase hybrid retrieval that combines vector similarity search with graph traversal.</p>"},{"location":"features/knowledge-graph/#phase-1-vector-search","title":"Phase 1: Vector Search","text":"<p>Standard RAG retrieval using sqlite-vec cosine similarity. Returns the top-K most semantically similar results to the query.</p>"},{"location":"features/knowledge-graph/#phase-2-graph-expansion","title":"Phase 2: Graph Expansion","text":"<p>Starting from each Phase 1 result, the service traverses the knowledge graph (1-2 hops) following these predicates:</p> <ul> <li><code>related_to</code></li> <li><code>resolved_by</code></li> <li><code>caused_by</code></li> <li><code>similar_to</code></li> </ul> <p>This discovers related context that may not be semantically similar to the query but is structurally connected to relevant results.</p>"},{"location":"features/knowledge-graph/#result-assembly","title":"Result Assembly","text":"<p>The combined results are formatted into a context section injected into the system prompt:</p> <pre><code>## Semantic Context (RAG)\n### [knowledge] doc_abc\nContent from vector search...\n\n## Graph-Expanded Context\nThe following related items were discovered through knowledge graph traversal:\n- **error:timeout** (via caused_by from tool:http_client)\n- **fix:retry_logic** (via resolved_by from error:timeout)\n</code></pre>"},{"location":"features/knowledge-graph/#self-learning-graph","title":"Self-Learning Graph","text":"<p>The <code>GraphEngine</code> in <code>internal/learning/</code> extends the learning system with graph-based relationship tracking.</p>"},{"location":"features/knowledge-graph/#error-resolution-tracking","title":"Error-Resolution Tracking","text":"<p>When a tool execution fails, the graph engine records:</p> <ul> <li><code>error_node</code> --caused_by--&gt; <code>tool_node</code></li> <li><code>error_node</code> --in_session--&gt; <code>session_node</code></li> <li><code>error_node</code> --similar_to--&gt; <code>similar_error_node</code> (if similar patterns exist)</li> </ul> <p>When a fix is applied:</p> <ul> <li><code>error_node</code> --resolved_by--&gt; <code>fix_node</code></li> <li><code>fix_node</code> --learned_from--&gt; <code>session_node</code></li> </ul>"},{"location":"features/knowledge-graph/#confidence-propagation","title":"Confidence Propagation","text":"<p>When a tool succeeds after previous failures, the graph engine propagates confidence to similar learnings:</p> <ol> <li>Find errors previously caused by this tool</li> <li>Find similar errors connected via <code>similar_to</code> edges</li> <li>Boost confidence of related learning entries by <code>0.1 * propagation_rate</code></li> </ol> <p>The default propagation rate is 0.3, meaning each success propagates a small confidence boost (0.03) to similar learnings across the graph.</p>"},{"location":"features/knowledge-graph/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Graph Store</p> <pre><code>{\n  \"graph\": {\n    \"enabled\": true,\n    \"backend\": \"bolt\",\n    \"databasePath\": \"~/.lango/graph.db\",\n    \"maxTraversalDepth\": 2,\n    \"maxExpansionResults\": 10\n  }\n}\n</code></pre> Setting Default Description <code>enabled</code> <code>false</code> Enable the knowledge graph <code>backend</code> <code>\"bolt\"</code> Storage backend (only <code>\"bolt\"</code> is supported) <code>databasePath</code> <code>\"\"</code> Path to the BoltDB file <code>maxTraversalDepth</code> <code>2</code> Maximum BFS hops during graph expansion <code>maxExpansionResults</code> <code>10</code> Maximum graph-expanded results per query <p>Tip</p> <p>Enable the graph store via <code>lango settings</code> or add it during <code>lango onboard</code>. The database file is created automatically at the configured path.</p>"},{"location":"features/knowledge-graph/#cli-commands","title":"CLI Commands","text":""},{"location":"features/knowledge-graph/#status","title":"Status","text":"<p>Show whether the graph is enabled and how many triples it contains:</p> <pre><code>lango graph status\n</code></pre> <pre><code>Knowledge Graph Status\n  Enabled:       true\n  Backend:       bolt\n  Database Path: ~/.lango/graph.db\n  Triples:       142\n</code></pre>"},{"location":"features/knowledge-graph/#query","title":"Query","text":"<p>Query triples by subject, object, or subject+predicate:</p> <pre><code># By subject\nlango graph query --subject \"error:timeout\"\n\n# By subject and predicate\nlango graph query --subject \"error:timeout\" --predicate \"resolved_by\"\n\n# By object\nlango graph query --object \"tool:http_client\"\n\n# Limit results and output as JSON\nlango graph query --subject \"error:timeout\" --limit 5 --json\n</code></pre>"},{"location":"features/knowledge-graph/#stats","title":"Stats","text":"<p>Show predicate distribution:</p> <pre><code>lango graph stats\n</code></pre> <pre><code>Knowledge Graph Statistics\n  Total Triples: 142\n\nPREDICATE        COUNT\nrelated_to       58\ncaused_by        32\nresolved_by      24\nsimilar_to       18\nin_session       10\n</code></pre>"},{"location":"features/knowledge-graph/#clear","title":"Clear","text":"<p>Remove all triples from the graph:</p> <pre><code>lango graph clear\n\n# Skip confirmation\nlango graph clear --force\n</code></pre> <p>Warning</p> <p>Clearing the graph permanently deletes all relationship data. The graph will be rebuilt over time from new conversations and entity extraction.</p> <p>All graph CLI commands support <code>--json</code> for machine-readable output.</p>"},{"location":"features/knowledge/","title":"Knowledge System","text":"<p>Lango's self-learning knowledge system enables your agent to accumulate, organize, and retrieve knowledge over time. It combines a persistent knowledge store, a learning engine, and an 8-layer context retrieval architecture.</p>"},{"location":"features/knowledge/#overview","title":"Overview","text":"<pre><code>graph TB\n    A[User Interaction] --&gt; B[Knowledge Store]\n    A --&gt; C[Learning Engine]\n    B --&gt; D[Context Retriever]\n    C --&gt; D\n    D --&gt; E[8-Layer Context]\n    E --&gt; F[LLM Prompt]</code></pre> <p>The knowledge system has three main components:</p> <ol> <li>Knowledge Store -- Persistent storage for facts, patterns, and external references</li> <li>Learning Engine -- Observes tool execution results, extracts error patterns, and boosts successful strategies</li> <li>Context Retriever -- Assembles relevant knowledge from 8 context layers into the LLM prompt</li> </ol>"},{"location":"features/knowledge/#knowledge-store","title":"Knowledge Store","text":"<p>The knowledge store persists structured knowledge entries in the Ent ORM database. Each entry has a key, category, content, optional tags, and source attribution.</p>"},{"location":"features/knowledge/#entry-categories","title":"Entry Categories","text":"<p>Knowledge entries are categorized for efficient retrieval:</p> <ul> <li>Rules -- User-defined constraints and guidelines</li> <li>Preferences -- User preferences and settings</li> <li>Definitions -- Domain-specific terms and meanings</li> <li>Facts -- Verified information and data points</li> </ul>"},{"location":"features/knowledge/#agent-tools","title":"Agent Tools","text":"<p>The agent can manage knowledge through built-in tools:</p> Tool Description <code>knowledge_add</code> Store a new knowledge entry <code>knowledge_search</code> Search stored knowledge by query <code>knowledge_delete</code> Remove a knowledge entry <code>knowledge_list</code> List all stored entries"},{"location":"features/knowledge/#learning-engine","title":"Learning Engine","text":"<p>The learning engine observes tool execution results and automatically extracts patterns:</p> <ul> <li>Error patterns -- Recognizes recurring errors and their root causes</li> <li>Successful strategies -- Identifies tool chains and approaches that work</li> <li>Confidence scoring -- Tracks how reliable each learning is</li> </ul>"},{"location":"features/knowledge/#learning-tools","title":"Learning Tools","text":"Tool Description <code>learning_stats</code> Get statistics about stored learnings (count, category distribution, confidence, date range) <code>learning_cleanup</code> Delete learnings by criteria (age, confidence, category). Supports <code>dry_run</code> mode"},{"location":"features/knowledge/#context-retriever","title":"Context Retriever","text":"<p>The context retriever implements an 8-layer architecture that assembles relevant context into the agent's system prompt. Each layer provides a different type of knowledge.</p>"},{"location":"features/knowledge/#the-8-context-layers","title":"The 8 Context Layers","text":"# Layer Source Description 1 Tool Registry Runtime Available tools and their descriptions 2 User Knowledge Knowledge Store Rules, preferences, definitions, facts 3 Skill Patterns Skill System Known working tool chains and workflows 4 External Knowledge Knowledge Store Documentation, wiki entries, MCP integration references 5 Agent Learnings Learning Engine Error patterns, discovered fixes, successful strategies 6 Runtime Context Session Current session state, active tools, channel type, feature flags 7 Observations Observational Memory Compressed conversation observations 8 Reflections Observational Memory Condensed higher-level reflections <p>Pending Inquiries</p> <p>An additional layer, Pending Inquiries, is used by the Proactive Librarian to inject knowledge-gathering questions into the conversation.</p>"},{"location":"features/knowledge/#how-retrieval-works","title":"How Retrieval Works","text":"<ol> <li>The agent receives a user message</li> <li>Keywords are extracted from the query (stop words filtered, max 5 keywords)</li> <li>Each requested layer is searched in parallel</li> <li>Results are limited to <code>maxContextPerLayer</code> items per layer</li> <li>The assembled context is injected into the system prompt before the LLM call</li> </ol>"},{"location":"features/knowledge/#prompt-assembly","title":"Prompt Assembly","text":"<p>The retriever assembles context into named sections:</p> <pre><code>[Base System Prompt]\n\n## Runtime Context\n- Session: abc123 | Channel: telegram | Tools: 15 | ...\n\n## Available Tools\n- **exec**: Execute shell commands\n- **file_read**: Read file contents\n\n## User Knowledge\n- [rule] coding-style: Always use snake_case for variables\n- [fact] project-lang: The project uses Go 1.25\n\n## Known Solutions\n- When 'permission denied' occurs: Check file ownership and chmod\n\n## Available Skills\n- deploy: Automated deployment workflow\n\n## External References\n- go-docs (https://go.dev/doc): Official Go documentation\n</code></pre>"},{"location":"features/knowledge/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Knowledge</p> <pre><code>{\n  \"knowledge\": {\n    \"enabled\": true,\n    \"maxContextPerLayer\": 5,\n    \"analysisTurnThreshold\": 10,\n    \"analysisTokenThreshold\": 2000\n  }\n}\n</code></pre> Key Type Default Description <code>enabled</code> <code>bool</code> <code>false</code> Enable the knowledge/learning system <code>maxContextPerLayer</code> <code>int</code> <code>5</code> Maximum items retrieved per context layer <code>analysisTurnThreshold</code> <code>int</code> <code>10</code> Number of new turns before triggering conversation analysis <code>analysisTokenThreshold</code> <code>int</code> <code>2000</code> Token count threshold before triggering conversation analysis"},{"location":"features/knowledge/#related","title":"Related","text":"<ul> <li>Observational Memory -- Layers 7 and 8 of the context architecture</li> <li>Embedding &amp; RAG -- Vector-based semantic retrieval</li> <li>Proactive Librarian -- Autonomous knowledge curation</li> <li>Skill System -- Layer 3 skill pattern source</li> </ul>"},{"location":"features/librarian/","title":"Proactive Librarian","text":"<p>Experimental</p> <p>The Proactive Librarian is an experimental feature. Its behavior, configuration keys, and internal APIs may change between releases.</p> <p>The Proactive Librarian is an autonomous knowledge agent that observes conversations, extracts knowledge, detects knowledge gaps, and proactively asks clarifying questions to grow the knowledge base.</p>"},{"location":"features/librarian/#overview","title":"Overview","text":"<pre><code>graph TB\n    A[Conversation] --&gt; B[Observations]\n    B --&gt; C[Observation Analyzer]\n    C --&gt; D{Confidence?}\n    D --&gt;|High| E[Auto-Save Knowledge]\n    D --&gt;|Medium/Low| F[Create Inquiry]\n    F --&gt; G[Inject into Context]\n    G --&gt; H[Agent Asks Question]\n    H --&gt; I[User Answers]\n    I --&gt; J[Inquiry Processor]\n    J --&gt; K[Save Extracted Knowledge]\n    E --&gt; L[Knowledge Store]\n    K --&gt; L</code></pre> <p>The Librarian operates in two phases:</p> <ol> <li>Observation Analysis -- Extracts knowledge and detects gaps from conversation observations</li> <li>Inquiry Processing -- Detects user answers to pending questions and saves the extracted knowledge</li> </ol>"},{"location":"features/librarian/#components","title":"Components","text":""},{"location":"features/librarian/#observation-analyzer","title":"Observation Analyzer","text":"<p>The Observation Analyzer uses an LLM to analyze accumulated conversation observations and produce:</p> <p>Extractions -- Knowledge items found in conversation:</p> <ul> <li>Type: preference, fact, rule, or definition</li> <li>Confidence: high, medium, or low</li> <li>Graph triples (optional): subject-predicate-object for the Knowledge Graph</li> </ul> <p>Gaps -- Missing knowledge that would improve the agent:</p> <ul> <li>Topic: what the gap is about</li> <li>Question: a natural question to ask the user</li> <li>Priority: high, medium, or low</li> </ul>"},{"location":"features/librarian/#inquiry-store","title":"Inquiry Store","text":"<p>Pending inquiries are persisted with the following lifecycle:</p> <pre><code>pending \u2192 resolved (user answered)\n        \u2192 dismissed (expired or irrelevant)\n</code></pre> <p>Inquiries are injected into the agent's context as part of the Pending Inquiries layer in the Knowledge System. The agent naturally weaves one question into its response when appropriate.</p>"},{"location":"features/librarian/#inquiry-processor","title":"Inquiry Processor","text":"<p>The Inquiry Processor monitors recent conversation messages and uses an LLM to detect whether the user has answered any pending inquiries. When a match is found:</p> <ol> <li>The answer is extracted as structured knowledge</li> <li>The knowledge is saved to the Knowledge Store</li> <li>The inquiry is marked as resolved</li> </ol> <p>Only medium and high confidence matches are accepted -- low confidence matches are discarded.</p>"},{"location":"features/librarian/#proactive-buffer","title":"Proactive Buffer","text":"<p>The Proactive Buffer manages the async pipeline:</p> <ul> <li>Maintains a turn counter per session for cooldown enforcement</li> <li>Queues sessions for background analysis</li> <li>Runs as a background goroutine with Start/Stop lifecycle</li> </ul>"},{"location":"features/librarian/#auto-save-behavior","title":"Auto-Save Behavior","text":"<p>High-confidence extractions are automatically saved to the Knowledge Store without asking the user. The confidence threshold is configurable:</p> <code>autoSaveConfidence</code> Behavior <code>high</code> (default) Only auto-save clearly stated facts and explicit preferences <code>medium</code> Also auto-save implied or partially stated knowledge <code>low</code> Auto-save everything (including speculative inferences)"},{"location":"features/librarian/#rate-limiting","title":"Rate Limiting","text":"<p>The Librarian includes built-in rate limiting to avoid overwhelming the user:</p> Control Default Description Observation threshold 2 Minimum observations before triggering analysis Cooldown turns 3 Turns between inquiry injections per session Max pending inquiries 2 Maximum pending inquiries per session"},{"location":"features/librarian/#graph-integration","title":"Graph Integration","text":"<p>When the Knowledge Graph is enabled, the Librarian can also extract graph triples from observations. Extracted triples (subject, predicate, object) are saved to the graph store via the graph callback, enabling relationship-aware retrieval.</p>"},{"location":"features/librarian/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Librarian</p> <pre><code>{\n  \"librarian\": {\n    \"enabled\": true,\n    \"observationThreshold\": 2,\n    \"inquiryCooldownTurns\": 3,\n    \"maxPendingInquiries\": 2,\n    \"autoSaveConfidence\": \"high\",\n    \"provider\": \"\",\n    \"model\": \"\"\n  }\n}\n</code></pre> Key Type Default Description <code>enabled</code> <code>bool</code> <code>false</code> Enable the proactive librarian system <code>observationThreshold</code> <code>int</code> <code>2</code> Minimum observation count to trigger analysis <code>inquiryCooldownTurns</code> <code>int</code> <code>3</code> Turns between inquiries per session <code>maxPendingInquiries</code> <code>int</code> <code>2</code> Maximum pending inquiries per session <code>autoSaveConfidence</code> <code>string</code> <code>\"high\"</code> Minimum confidence for auto-save: <code>high</code>, <code>medium</code>, <code>low</code> <code>provider</code> <code>string</code> <code>\"\"</code> LLM provider for analysis (empty = agent default) <code>model</code> <code>string</code> <code>\"\"</code> Model ID for analysis (empty = agent default) <p>Dedicated Model</p> <p>Like Observational Memory, you can use a smaller model for the Librarian's LLM calls to reduce cost and latency.</p>"},{"location":"features/librarian/#example-flow","title":"Example Flow","text":"<ol> <li>User discusses their Go project over several turns</li> <li>Observations accumulate: \"User prefers table-driven tests\", \"Project uses SQLite\"</li> <li>Librarian analyzes observations:<ul> <li>Auto-saves (high confidence): <code>go_test_style: \"User prefers table-driven tests with testify\"</code></li> <li>Creates inquiry (medium priority): \"What Go version does your project target?\"</li> </ul> </li> <li>Agent naturally asks: \"By the way, what Go version is your project targeting?\"</li> <li>User replies: \"We're on Go 1.25\"</li> <li>Inquiry Processor detects the answer and saves: <code>go_version: \"Go 1.25\"</code></li> </ol>"},{"location":"features/librarian/#related","title":"Related","text":"<ul> <li>Knowledge System -- Where extracted knowledge is stored and the Pending Inquiries context layer</li> <li>Observational Memory -- Source of observations that the Librarian analyzes</li> <li>Knowledge Graph -- Optional graph triple extraction</li> </ul>"},{"location":"features/multi-agent/","title":"Multi-Agent Orchestration","text":"<p>When <code>agent.multiAgent</code> is enabled, Lango replaces the single monolithic agent with a hierarchical agent tree. An orchestrator delegates tasks to specialized sub-agents based on keyword matching and a structured decision protocol.</p>"},{"location":"features/multi-agent/#architecture","title":"Architecture","text":"<pre><code>graph TD\n    User([User]) --&gt; O[lango-orchestrator]\n    O --&gt; OP[operator]\n    O --&gt; NAV[navigator]\n    O --&gt; V[vault]\n    O --&gt; LIB[librarian]\n    O --&gt; AUTO[automator]\n    O --&gt; PLAN[planner]\n    O --&gt; CHR[chronicler]\n    O --&gt; RA[Remote A2A Agents]\n\n    style O fill:#4a9eff,color:#fff\n    style PLAN fill:#9b59b6,color:#fff\n    style RA fill:#e67e22,color:#fff</code></pre> <p>The orchestrator has no tools of its own. It receives user messages, classifies them, and transfers execution to the appropriate sub-agent via <code>transfer_to_agent</code>.</p>"},{"location":"features/multi-agent/#sub-agent-roles","title":"Sub-Agent Roles","text":"Agent Role Tool Prefixes operator System operations: shell commands, file I/O, skill execution <code>exec_*</code>, <code>fs_*</code>, <code>skill_*</code> navigator Web browsing: page navigation, interaction, screenshots <code>browser_*</code> vault Security: encryption, secret management, blockchain payments <code>crypto_*</code>, <code>secrets_*</code>, <code>payment_*</code> librarian Knowledge: search, RAG, graph traversal, skill management, learning data, proactive knowledge extraction <code>search_*</code>, <code>rag_*</code>, <code>graph_*</code>, <code>save_knowledge</code>, <code>save_learning</code>, <code>learning_*</code>, <code>create_skill</code>, <code>list_skills</code>, <code>import_skill</code>, <code>librarian_*</code> automator Automation: cron scheduling, background tasks, workflow pipelines <code>cron_*</code>, <code>bg_*</code>, <code>workflow_*</code> planner Task decomposition and planning (LLM reasoning only, no tools) (none) chronicler Conversational memory: observations, reflections, recall <code>memory_*</code>, <code>observe_*</code>, <code>reflect_*</code>"},{"location":"features/multi-agent/#agent-details","title":"Agent Details","text":""},{"location":"features/multi-agent/#operator","title":"operator","text":"<p>Executes system-level operations. Handles shell commands, file read/write, and skill invocation. Reports raw results including exit codes.</p> <p>Cannot: web browsing, cryptographic operations, payment transactions, knowledge search, memory management.</p>"},{"location":"features/multi-agent/#navigator","title":"navigator","text":"<p>Browses the web. Navigates to pages, interacts with elements (click, type, scroll), and takes screenshots. Returns page content with current URL and title.</p> <p>Cannot: shell commands, file operations, cryptographic operations, payment transactions, knowledge search.</p>"},{"location":"features/multi-agent/#vault","title":"vault","text":"<p>Handles security-sensitive operations. Encrypts/decrypts data, manages secrets and passwords, signs/verifies, and processes blockchain payments (USDC on Base).</p> <p>Cannot: shell commands, web browsing, file operations, knowledge search, memory management.</p>"},{"location":"features/multi-agent/#librarian","title":"librarian","text":"<p>Manages the knowledge layer. Searches information, queries RAG indexes, traverses the knowledge graph, saves knowledge and learnings, manages skills, and handles proactive knowledge inquiries. See Proactive Librarian for details on the inquiry system.</p> <p>Cannot: shell commands, web browsing, cryptographic operations, memory management (observations/reflections).</p>"},{"location":"features/multi-agent/#automator","title":"automator","text":"<p>Manages automation systems. Schedules recurring cron jobs, submits background tasks, and runs multi-step workflow pipelines.</p> <p>Cannot: shell commands, file operations, web browsing, cryptographic operations, knowledge search.</p>"},{"location":"features/multi-agent/#planner","title":"planner","text":"<p>Decomposes complex tasks into clear, actionable steps and designs execution plans. Uses LLM reasoning only -- has no tools. This agent is always included in the agent tree even when no tools match its prefix.</p> <p>Cannot: executing commands, web browsing, file operations, any tool-based operations.</p>"},{"location":"features/multi-agent/#chronicler","title":"chronicler","text":"<p>Manages conversational memory. Records observations, creates reflections, and recalls past interactions. Returns memories with context and timestamps.</p> <p>Cannot: shell commands, web browsing, file operations, knowledge search, cryptographic operations.</p>"},{"location":"features/multi-agent/#tool-partitioning","title":"Tool Partitioning","text":"<p>Tools are assigned to sub-agents based on their name prefix. The matching order is:</p> <ol> <li>librarian -- checked first because <code>save_knowledge</code>, <code>save_learning</code>, <code>create_skill</code>, and <code>list_skills</code> are exact-match prefixes that must not fall through to operator</li> <li>chronicler -- <code>memory_*</code>, <code>observe_*</code>, <code>reflect_*</code></li> <li>automator -- <code>cron_*</code>, <code>bg_*</code>, <code>workflow_*</code></li> <li>navigator -- <code>browser_*</code></li> <li>vault -- <code>crypto_*</code>, <code>secrets_*</code>, <code>payment_*</code></li> <li>operator -- <code>exec_*</code>, <code>fs_*</code>, <code>skill_*</code></li> <li>unmatched -- tools matching no prefix are tracked separately and listed in the orchestrator prompt</li> </ol> <p>Sub-agents with no matching tools are skipped (not created), except for the planner which is always included.</p>"},{"location":"features/multi-agent/#routing-protocol","title":"Routing Protocol","text":"<p>The orchestrator follows a 5-step decision protocol before delegating:</p> <pre><code>1. CLASSIFY  -- Identify the domain of the request\n2. MATCH     -- Compare keywords against the routing table\n3. SELECT    -- Choose the best-matching agent\n4. VERIFY    -- Check the selected agent's \"Cannot\" list for conflicts\n5. DELEGATE  -- Transfer to the selected agent via transfer_to_agent\n</code></pre> <p>Each sub-agent has a keyword list used for routing:</p> Agent Keywords operator run, execute, command, shell, file, read, write, edit, delete, skill navigator browse, web, url, page, navigate, click, screenshot, website vault encrypt, decrypt, sign, hash, secret, password, payment, wallet, USDC librarian search, find, lookup, knowledge, learning, retrieve, graph, RAG, inquiry, question, gap automator schedule, cron, every, recurring, background, async, later, workflow, pipeline, automate, timer planner plan, decompose, steps, strategy, how to, break down chronicler remember, recall, observation, reflection, memory, history"},{"location":"features/multi-agent/#rejection-handling","title":"Rejection Handling","text":"<p>Sub-agents can reject misrouted tasks by responding with:</p> <pre><code>[REJECT] This task requires &lt;correct_agent&gt;. I handle: &lt;capability list&gt;.\n</code></pre> <p>When a rejection occurs, the orchestrator re-evaluates and tries the next most relevant agent.</p>"},{"location":"features/multi-agent/#delegation-limits","title":"Delegation Limits","text":"<p>The orchestrator enforces a maximum number of delegation rounds per user turn (default: 10). Simple conversational messages (greetings, opinions, general knowledge) are handled directly by the orchestrator without delegation.</p>"},{"location":"features/multi-agent/#remote-a2a-agents","title":"Remote A2A Agents","text":"<p>When A2A protocol is enabled, remote agents are appended to the sub-agent list and appear in the routing table. The orchestrator can delegate to them just like local sub-agents.</p>"},{"location":"features/multi-agent/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Multi-Agent</p> <pre><code>{\n  \"agent\": {\n    \"multiAgent\": true\n  }\n}\n</code></pre> Setting Default Description <code>agent.multiAgent</code> <code>false</code> Enable hierarchical sub-agent orchestration <code>agent.maxDelegationRounds</code> <code>10</code> Max orchestrator\u2192sub-agent delegation rounds per turn <p>Info</p> <p>When <code>multiAgent</code> is <code>false</code> (default), a single monolithic agent handles all tasks with all tools. The multi-agent mode trades some latency (orchestrator reasoning + delegation) for better task specialization and reduced context pollution.</p>"},{"location":"features/multi-agent/#cli-commands","title":"CLI Commands","text":""},{"location":"features/multi-agent/#agent-status","title":"Agent Status","text":"<pre><code>lango agent status\n</code></pre> <p>Shows whether multi-agent mode is enabled, the orchestrator name, and the number of active sub-agents.</p>"},{"location":"features/multi-agent/#agent-list","title":"Agent List","text":"<pre><code>lango agent list\n</code></pre> <p>Lists all active sub-agents with their roles, tool counts, and capabilities.</p>"},{"location":"features/observational-memory/","title":"Observational Memory","text":"<p>Observational Memory enables Lango to maintain context across long conversations by automatically compressing conversation history into observations and reflections.</p>"},{"location":"features/observational-memory/#overview","title":"Overview","text":"<pre><code>graph LR\n    A[Messages] --&gt;|Token threshold reached| B[Observer]\n    B --&gt;|Compressed note| C[Observations]\n    C --&gt;|Token threshold reached| D[Reflector]\n    D --&gt;|Condensed summary| E[Reflections]\n    E --&gt;|Reflection threshold reached| D</code></pre> <p>As conversations grow, raw message history consumes increasing amounts of the LLM context window. Observational Memory solves this by:</p> <ol> <li>Observing -- Compressing message batches into concise observation notes</li> <li>Reflecting -- Condensing accumulated observations into higher-level reflections</li> <li>Injecting -- Adding the most recent observations and reflections into the LLM context</li> </ol>"},{"location":"features/observational-memory/#components","title":"Components","text":""},{"location":"features/observational-memory/#observer","title":"Observer","text":"<p>The Observer monitors conversation token count and produces compressed observation notes when the message token threshold is reached.</p> <p>What it captures:</p> <ul> <li>Key decisions made</li> <li>User intent and goals</li> <li>Important facts and context</li> <li>Task progress and outcomes</li> <li>Action items and next steps</li> </ul> <p>What it omits:</p> <ul> <li>Verbatim tool outputs and code blocks</li> <li>Redundant greetings</li> <li>Technical details that can be re-derived</li> </ul> <p>Each observation is a concise paragraph (2-5 sentences) capturing the essential information from a batch of messages.</p>"},{"location":"features/observational-memory/#reflector","title":"Reflector","text":"<p>The Reflector condenses accumulated observations into higher-level reflections when the observation token threshold is reached.</p> <ul> <li>Merges overlapping information across observations</li> <li>Resolves contradictions (prefers later observations)</li> <li>Creates a coherent narrative summary (3-8 sentences)</li> <li>After reflection, the source observations are deleted to save storage</li> </ul> <p>The Reflector also supports meta-reflections -- condensing multiple reflections into a single higher-generation reflection, enabling indefinite conversation length.</p>"},{"location":"features/observational-memory/#async-buffer","title":"Async Buffer","text":"<p>Observation and reflection tasks are queued in an async buffer for background processing. This prevents LLM calls for compression from blocking the main conversation flow.</p>"},{"location":"features/observational-memory/#token-counter","title":"Token Counter","text":"<p>A built-in token estimator tracks message token usage to determine when thresholds are reached. This drives the automatic triggering of observations and reflections.</p>"},{"location":"features/observational-memory/#context-injection","title":"Context Injection","text":"<p>Observations and reflections are injected into the LLM context as part of the Knowledge System's 8-layer architecture:</p> <ul> <li>Layer 7 (Observations) -- Most recent compressed observations</li> <li>Layer 8 (Reflections) -- Condensed higher-level reflections</li> </ul>"},{"location":"features/observational-memory/#context-limits","title":"Context Limits","text":"<p>By default, the following limits apply to context injection:</p> Limit Default Description Max reflections in context 5 Maximum reflections injected into the LLM prompt Max observations in context 20 Maximum observations injected into the LLM prompt Max message token budget 8000 Token budget for recent messages in context <p>Set any limit to <code>0</code> for unlimited injection (not recommended).</p>"},{"location":"features/observational-memory/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Observational Memory</p> <pre><code>{\n  \"observationalMemory\": {\n    \"enabled\": true,\n    \"provider\": \"\",\n    \"model\": \"\",\n    \"messageTokenThreshold\": 1000,\n    \"observationTokenThreshold\": 2000,\n    \"maxMessageTokenBudget\": 8000,\n    \"maxReflectionsInContext\": 5,\n    \"maxObservationsInContext\": 20,\n    \"memoryTokenBudget\": 4000,\n    \"reflectionConsolidationThreshold\": 5\n  }\n}\n</code></pre> Key Type Default Description <code>enabled</code> <code>bool</code> <code>false</code> Enable the observational memory system <code>provider</code> <code>string</code> <code>\"\"</code> LLM provider for observer/reflector (empty = agent default) <code>model</code> <code>string</code> <code>\"\"</code> Model ID for observer/reflector (empty = agent default) <code>messageTokenThreshold</code> <code>int</code> <code>1000</code> Token count of new messages before triggering an observation <code>observationTokenThreshold</code> <code>int</code> <code>2000</code> Token count of observations before triggering a reflection <code>maxMessageTokenBudget</code> <code>int</code> <code>8000</code> Maximum token budget for recent messages in context <code>maxReflectionsInContext</code> <code>int</code> <code>5</code> Max reflections injected into LLM context (0 = unlimited) <code>maxObservationsInContext</code> <code>int</code> <code>20</code> Max observations injected into LLM context (0 = unlimited) <code>memoryTokenBudget</code> <code>int</code> <code>4000</code> Max token budget for the memory section in system prompt <code>reflectionConsolidationThreshold</code> <code>int</code> <code>5</code> Min reflections before meta-reflection (consolidation) triggers <p>Dedicated Model</p> <p>You can use a smaller, faster model for observation/reflection to reduce cost and latency. Set <code>provider</code> and <code>model</code> to a lightweight option like Gemini Flash or GPT-5.2.</p>"},{"location":"features/observational-memory/#cli-commands","title":"CLI Commands","text":"<p>Manage observational memory via the CLI:</p> <pre><code># List observations and reflections for the current session\nlango memory list\n\n# Show memory system status (counts, token usage)\nlango memory status\n\n# Clear all observations and reflections\nlango memory clear\n</code></pre>"},{"location":"features/observational-memory/#how-it-works","title":"How It Works","text":""},{"location":"features/observational-memory/#observation-trigger","title":"Observation Trigger","text":"<pre><code>Message 1  \u2500\u2510\nMessage 2   \u2502  Token count &lt; threshold \u2192 accumulate\nMessage 3   \u2502\nMessage 4  \u2500\u2518  Token count &gt;= 1000 \u2192 trigger Observer\n                    \u2193\n              Observation Note (2-5 sentences)\n</code></pre>"},{"location":"features/observational-memory/#reflection-trigger","title":"Reflection Trigger","text":"<pre><code>Observation 1  \u2500\u2510\nObservation 2   \u2502  Token count &lt; threshold \u2192 accumulate\nObservation 3  \u2500\u2518  Token count &gt;= 2000 \u2192 trigger Reflector\n                        \u2193\n                  Reflection (3-8 sentences)\n                        \u2193\n                  Observations deleted\n</code></pre>"},{"location":"features/observational-memory/#meta-reflection","title":"Meta-Reflection","text":"<p>When reflections themselves accumulate, the Reflector can produce meta-reflections:</p> <pre><code>Reflection 1 (gen 1)  \u2500\u2510\nReflection 2 (gen 1)   \u2502 \u2192 Reflector \u2192 Reflection (gen 2)\nReflection 3 (gen 1)  \u2500\u2518\n</code></pre> <p>Each generation captures a broader summary, enabling context maintenance for arbitrarily long conversations.</p>"},{"location":"features/observational-memory/#auto-consolidation","title":"Auto-Consolidation","text":"<p>The <code>reflectionConsolidationThreshold</code> controls how many reflections must accumulate before meta-reflection fires. A lower value (e.g., 3) causes more frequent consolidation \u2014 useful for fast-moving conversations. A higher value (e.g., 10) preserves more granular reflections before summarizing.</p> <p>The <code>memoryTokenBudget</code> caps the total tokens injected into the system prompt for the memory section. Reflections are prioritized first (higher information density), then observations fill the remaining budget.</p>"},{"location":"features/observational-memory/#related","title":"Related","text":"<ul> <li>Knowledge System -- Observations and reflections feed into context layers 7 and 8</li> <li>Embedding &amp; RAG -- Observations can be embedded for semantic retrieval</li> </ul>"},{"location":"features/p2p-network/","title":"P2P Network","text":"<p>Experimental</p> <p>The P2P networking system is experimental. The protocol and configuration may change in future releases.</p> <p>Lango supports decentralized agent-to-agent connectivity via libp2p. The Sovereign Agent Network (SAN) enables peer-to-peer communication with DID-based identity, zero-knowledge enhanced handshake, and a knowledge firewall for access control.</p>"},{"location":"features/p2p-network/#overview","title":"Overview","text":"<p>The P2P subsystem enables direct agent communication without centralized coordination:</p> <ul> <li>Direct connectivity -- agents connect peer-to-peer using libp2p with Noise encryption</li> <li>DID-based identity -- each agent derives a <code>did:lango:&lt;pubkey&gt;</code> identity from its wallet</li> <li>Knowledge firewall -- default deny-all ACL controls which peers can access which tools</li> <li>Agent discovery -- GossipSub-based agent card propagation for capability-based search</li> <li>ZK-enhanced handshake -- optional zero-knowledge proof verification during peer authentication</li> </ul> <pre><code>graph TB\n    subgraph Agent A\n        WA[Wallet] --&gt; IDA[DID Provider]\n        IDA --&gt; NA[P2P Node]\n        NA --&gt; FWA[Firewall]\n        NA --&gt; DA[Discovery]\n    end\n\n    subgraph Agent B\n        WB[Wallet] --&gt; IDB[DID Provider]\n        IDB --&gt; NB[P2P Node]\n        NB --&gt; FWB[Firewall]\n        NB --&gt; DB[Discovery]\n    end\n\n    NA &lt;-- \"Noise-encrypted\\nlibp2p stream\" --&gt; NB\n    DA &lt;-- \"GossipSub\\nagent cards\" --&gt; DB\n\n    style NA fill:#7c3aed,color:#fff\n    style NB fill:#7c3aed,color:#fff</code></pre>"},{"location":"features/p2p-network/#identity","title":"Identity","text":"<p>Each Lango agent derives a decentralized identifier (DID) from its wallet's compressed secp256k1 public key:</p> <pre><code>did:lango:&lt;hex-compressed-pubkey&gt;\n</code></pre> <p>The DID is deterministically mapped to a libp2p peer ID, ensuring cryptographic binding between the wallet identity and the network identity. Private keys never leave the wallet layer.</p>"},{"location":"features/p2p-network/#handshake","title":"Handshake","text":"<p>When two agents connect, they perform mutual DID-based authentication:</p> <ol> <li>TCP/QUIC connection established via libp2p with Noise encryption</li> <li>DID exchange -- each peer presents its <code>did:lango:...</code> identifier</li> <li>Signature verification -- DID public key is verified against the peer ID</li> <li>Signed challenge -- the initiating peer sends a challenge with ECDSA signature over the canonical payload (<code>nonce || timestamp || senderDID</code>). The receiver validates the signature, checks the timestamp (5-minute past window, 30-second future grace), and verifies the nonce against a TTL-based replay cache.</li> <li>Session token -- a time-limited session token is issued for subsequent queries</li> <li>(Optional) ZK proof -- when <code>p2p.zkHandshake</code> is enabled, a zero-knowledge proof of identity is verified</li> </ol> <p>Protocol Versioning:</p> Version Protocol ID Features v1.0 <code>/lango/handshake/1.0.0</code> Legacy unsigned challenge (backward compatible) v1.1 <code>/lango/handshake/1.1.0</code> ECDSA signed challenge, timestamp validation, nonce replay protection <p>When <code>p2p.requireSignedChallenge</code> is <code>true</code>, unsigned (v1.0) challenges are rejected. Default is <code>false</code> for backward compatibility.</p> <p>Session tokens have a configurable TTL (<code>p2p.sessionTokenTtl</code>). Expired tokens require re-authentication.</p>"},{"location":"features/p2p-network/#session-management","title":"Session Management","text":"<p>Sessions are managed through <code>SessionStore</code> with both TTL-based expiration and explicit invalidation.</p>"},{"location":"features/p2p-network/#invalidation-reasons","title":"Invalidation Reasons","text":"Reason Trigger <code>logout</code> Peer explicitly logs out <code>reputation_drop</code> Peer reputation drops below <code>minTrustScore</code> <code>repeated_failures</code> N consecutive tool execution failures <code>manual_revoke</code> Owner manually revokes via CLI <code>security_event</code> Automatic security event handler"},{"location":"features/p2p-network/#security-event-handler","title":"Security Event Handler","text":"<p>The <code>SecurityEventHandler</code> monitors peer behavior and automatically invalidates sessions when:</p> <ul> <li>A peer's reputation drops below the configured <code>minTrustScore</code></li> <li>A peer exceeds the consecutive failure threshold</li> <li>A security event is triggered externally</li> </ul>"},{"location":"features/p2p-network/#cli","title":"CLI","text":"<pre><code>lango p2p session list                          # List active sessions\nlango p2p session revoke --peer-did &lt;did&gt;       # Revoke specific peer\nlango p2p session revoke-all                    # Revoke all sessions\n</code></pre>"},{"location":"features/p2p-network/#knowledge-firewall","title":"Knowledge Firewall","text":"<p>The knowledge firewall enforces access control for peer queries. The default policy is deny-all -- explicit rules must be added to allow access.</p>"},{"location":"features/p2p-network/#acl-rules","title":"ACL Rules","text":"<p>Each rule specifies:</p> Field Description <code>peerDid</code> Peer DID this rule applies to (<code>\"*\"</code> for all peers) <code>action</code> <code>\"allow\"</code> or <code>\"deny\"</code> <code>tools</code> Tool name patterns (supports <code>*</code> wildcard, empty = all tools) <code>rateLimit</code> Maximum requests per minute (0 = unlimited)"},{"location":"features/p2p-network/#response-sanitization","title":"Response Sanitization","text":"<p>All responses to peer queries are automatically sanitized:</p> <ul> <li>Absolute file paths are redacted</li> <li>Sensitive fields (passwords, tokens, private keys) are stripped</li> <li>Internal IDs and database paths are removed</li> </ul>"},{"location":"features/p2p-network/#zk-attestation","title":"ZK Attestation","text":"<p>When <code>p2p.zkAttestation</code> is enabled, responses include a zero-knowledge proof that the response was generated by the claimed agent without revealing internal state.</p>"},{"location":"features/p2p-network/#approval-pipeline","title":"Approval Pipeline","text":"<p>Inbound P2P tool invocations pass through a three-stage gate before execution:</p> <pre><code>flowchart TD\n    A[Incoming Tool Request] --&gt; B{Firewall ACL}\n    B -- Deny --&gt; X[Reject]\n    B -- Allow --&gt; C{Reputation Check}\n    C -- Below minTrustScore --&gt; X\n    C -- Pass --&gt; D{Owner Approval}\n    D -- Denied --&gt; X\n    D -- Approved --&gt; E[Execute Tool]\n    E --&gt; F[Sanitize Response]\n    F --&gt; G[Return Result]\n\n    D -. \"Auto-approve shortcut\" .-&gt; E\n    style X fill:#ef4444,color:#fff\n    style E fill:#22c55e,color:#fff</code></pre>"},{"location":"features/p2p-network/#stage-1-firewall-acl","title":"Stage 1: Firewall ACL","text":"<p>The Knowledge Firewall evaluates static allow/deny rules by peer DID and tool name pattern. Requests that don't match any allow rule are rejected immediately.</p>"},{"location":"features/p2p-network/#stage-2-reputation-check","title":"Stage 2: Reputation Check","text":"<p>If a reputation checker is configured, the peer's trust score is verified against <code>minTrustScore</code> (default: 0.3). New peers with no history (score = 0) are allowed through. Peers with a score above 0 but below the threshold are rejected.</p>"},{"location":"features/p2p-network/#stage-3-owner-approval","title":"Stage 3: Owner Approval","text":"<p>The local agent owner is prompted to approve or deny the tool invocation. This stage supports several auto-approval shortcuts:</p> Condition Behavior Paid tool, price &lt; <code>autoApproveBelow</code> Auto-approved if within spending limits (<code>maxPerTx</code>, <code>maxDaily</code>) <code>autoApproveKnownPeers: true</code> Previously authenticated peers skip handshake approval Free tool Always requires interactive owner approval <p>When auto-approval conditions are not met, the request falls back to the composite approval provider (Telegram inline keyboard, Discord button, Slack interactive message, or terminal prompt).</p>"},{"location":"features/p2p-network/#tool-execution-sandbox","title":"Tool Execution Sandbox","text":"<p>Inbound P2P tool invocations can run in an isolated sandbox to prevent malicious tool code from accessing process memory (passphrases, private keys, session tokens).</p>"},{"location":"features/p2p-network/#isolation-modes","title":"Isolation Modes","text":"Mode Backend Isolation Level Overhead Subprocess <code>os/exec</code> Process-level ~10ms Container Docker SDK Container-level (namespaces, cgroups) ~50-100ms"},{"location":"features/p2p-network/#container-runtime-probe-chain","title":"Container Runtime Probe Chain","text":"<p>When container mode is enabled, the executor probes available runtimes in order:</p> <ol> <li>Docker -- Full Docker SDK integration with OOM detection, label-based cleanup (<code>lango.sandbox=true</code>)</li> <li>gVisor -- Stub for future implementation</li> <li>Native -- Falls back to subprocess executor</li> </ol>"},{"location":"features/p2p-network/#container-pool","title":"Container Pool","text":"<p>An optional pre-warmed container pool reduces cold-start latency. Configure <code>poolSize</code> (default: 0 = disabled) and <code>poolIdleTimeout</code> (default: 5m).</p>"},{"location":"features/p2p-network/#configuration","title":"Configuration","text":"<pre><code>{\n  \"p2p\": {\n    \"toolIsolation\": {\n      \"enabled\": true,\n      \"timeoutPerTool\": \"30s\",\n      \"maxMemoryMB\": 512,\n      \"container\": {\n        \"enabled\": true,\n        \"runtime\": \"auto\",\n        \"image\": \"lango-sandbox:latest\",\n        \"networkMode\": \"none\",\n        \"readOnlyRootfs\": true,\n        \"poolSize\": 3\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"features/p2p-network/#cli_1","title":"CLI","text":"<pre><code>lango p2p sandbox status    # Show sandbox runtime status\nlango p2p sandbox test      # Run smoke test\nlango p2p sandbox cleanup   # Remove orphaned containers\n</code></pre>"},{"location":"features/p2p-network/#discovery","title":"Discovery","text":"<p>Agent discovery uses GossipSub for decentralized agent card propagation:</p> <ol> <li>Each agent publishes its Agent Card periodically on the <code>/lango/agentcard/1.0.0</code> topic</li> <li>Cards include: name, description, DID, multiaddrs, capabilities, pricing, and ZK credentials</li> <li>Peers can search for agents by capability tag using <code>FindByCapability</code></li> <li>ZK credentials on cards are verified before acceptance</li> </ol>"},{"location":"features/p2p-network/#agent-card-structure","title":"Agent Card Structure","text":"<pre><code>{\n  \"name\": \"my-agent\",\n  \"description\": \"Research assistant\",\n  \"did\": \"did:lango:02abc...\",\n  \"multiaddrs\": [\"/ip4/1.2.3.4/tcp/9000\"],\n  \"capabilities\": [\"research\", \"code-review\"],\n  \"pricing\": {\n    \"currency\": \"USDC\",\n    \"perQuery\": \"0.01\"\n  },\n  \"peerId\": \"QmAbc...\"\n}\n</code></pre>"},{"location":"features/p2p-network/#credential-revocation","title":"Credential Revocation","text":"<p>The gossip discovery system supports credential revocation to prevent compromised or retired agents from being discovered.</p>"},{"location":"features/p2p-network/#revocation-mechanisms","title":"Revocation Mechanisms","text":"<ul> <li><code>RevokeDID(did)</code> -- Adds a DID to the local revocation set. Revoked DIDs are rejected during agent card validation.</li> <li><code>IsRevoked(did)</code> -- Checks whether a DID has been revoked.</li> <li><code>maxCredentialAge</code> -- Credentials older than this duration (measured from <code>IssuedAt</code>) are rejected even if not explicitly revoked.</li> </ul>"},{"location":"features/p2p-network/#credential-validation","title":"Credential Validation","text":"<p>When processing incoming agent cards via GossipSub, three checks are applied:</p> <ol> <li>Expiration -- <code>ExpiresAt</code> must be in the future</li> <li>Staleness -- <code>IssuedAt + maxCredentialAge</code> must be in the future</li> <li>Revocation -- The agent's DID must not be in the revocation set</li> </ol> <p>Configure <code>maxCredentialAge</code> in the ZKP settings:</p> <pre><code>{\n  \"p2p\": {\n    \"zkp\": {\n      \"maxCredentialAge\": \"24h\"\n    }\n  }\n}\n</code></pre>"},{"location":"features/p2p-network/#zk-circuits","title":"ZK Circuits","text":"<p>When ZK features are enabled, Lango uses four zero-knowledge circuits:</p> Circuit Purpose Public Inputs Identity Prove DID ownership without revealing the private key DID hash Membership Prove membership in an authorized peer set Merkle root Range Prove a value falls within a range (e.g., reputation score) Min, Max bounds Attestation Prove response authenticity with freshness guarantees AgentID hash, MinTimestamp, MaxTimestamp Capability Prove authorized capability with agent binding CapabilityHash, AgentTestBinding"},{"location":"features/p2p-network/#attestation-freshness","title":"Attestation Freshness","text":"<p>The Attestation circuit includes <code>MinTimestamp</code> and <code>MaxTimestamp</code> public inputs with range assertions, ensuring proofs are fresh and cannot be replayed outside the validity window.</p>"},{"location":"features/p2p-network/#structured-attestation-data","title":"Structured Attestation Data","text":"<p>Attestation proofs are returned as structured <code>AttestationData</code>:</p> <pre><code>{\n  \"proof\": \"&lt;base64-encoded-proof&gt;\",\n  \"publicInputs\": [\"&lt;agent-id-hash&gt;\", \"&lt;min-ts&gt;\", \"&lt;max-ts&gt;\"],\n  \"circuitId\": \"attestation\",\n  \"scheme\": \"plonk\"\n}\n</code></pre>"},{"location":"features/p2p-network/#srs-configuration","title":"SRS Configuration","text":"<p>Configure the proving scheme and SRS (Structured Reference String) source:</p> Setting Values Description <code>p2p.zkp.provingScheme</code> <code>\"plonk\"</code>, <code>\"groth16\"</code> ZKP proving scheme <code>p2p.zkp.srsMode</code> <code>\"unsafe\"</code>, <code>\"file\"</code> SRS generation mode <code>p2p.zkp.srsPath</code> file path Path to SRS file (when <code>srsMode = \"file\"</code>) <p>Production SRS</p> <p>The <code>\"unsafe\"</code> SRS mode uses a deterministic setup suitable for development. For production deployments, use <code>\"file\"</code> mode with an SRS generated from a trusted ceremony.</p>"},{"location":"features/p2p-network/#configuration_1","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 P2P Network</p> <pre><code>{\n  \"p2p\": {\n    \"enabled\": true,\n    \"listenAddrs\": [\"/ip4/0.0.0.0/tcp/9000\"],\n    \"bootstrapPeers\": [],\n    \"keyDir\": \"~/.lango/p2p\",\n    \"enableRelay\": false,\n    \"enableMdns\": true,\n    \"maxPeers\": 50,\n    \"handshakeTimeout\": \"30s\",\n    \"sessionTokenTtl\": \"1h\",\n    \"autoApproveKnownPeers\": false,\n    \"firewallRules\": [\n      {\n        \"peerDid\": \"*\",\n        \"action\": \"allow\",\n        \"tools\": [\"search_*\"],\n        \"rateLimit\": 10\n      }\n    ],\n    \"gossipInterval\": \"30s\",\n    \"zkHandshake\": false,\n    \"zkAttestation\": false,\n    \"requireSignedChallenge\": false,\n    \"zkp\": {\n      \"proofCacheDir\": \"~/.lango/zkp\",\n      \"provingScheme\": \"plonk\",\n      \"srsMode\": \"unsafe\",\n      \"srsPath\": \"\",\n      \"maxCredentialAge\": \"24h\"\n    },\n    \"toolIsolation\": {\n      \"enabled\": false,\n      \"timeoutPerTool\": \"30s\",\n      \"maxMemoryMB\": 512,\n      \"container\": {\n        \"enabled\": false,\n        \"runtime\": \"auto\",\n        \"image\": \"lango-sandbox:latest\",\n        \"networkMode\": \"none\",\n        \"poolSize\": 0\n      }\n    }\n  }\n}\n</code></pre> <p>See the Configuration Reference for all P2P settings.</p>"},{"location":"features/p2p-network/#rest-api","title":"REST API","text":"<p>When the gateway is running (<code>lango serve</code>), read-only P2P endpoints are available for monitoring and external integrations:</p> Endpoint Description <code>GET /api/p2p/status</code> Peer ID, listen addresses, connected peer count <code>GET /api/p2p/peers</code> List of connected peers with multiaddresses <code>GET /api/p2p/identity</code> Local DID (<code>did:lango:...</code>) and peer ID <code>GET /api/p2p/reputation</code> Peer trust score and exchange history <code>GET /api/p2p/pricing</code> Tool pricing (single or all tools) <pre><code># Check node status\ncurl http://localhost:18789/api/p2p/status\n\n# List connected peers\ncurl http://localhost:18789/api/p2p/peers\n\n# Get DID identity\ncurl http://localhost:18789/api/p2p/identity\n\n# Query peer reputation\ncurl \"http://localhost:18789/api/p2p/reputation?peer_did=did:lango:02abc...\"\n\n# Get tool pricing\ncurl http://localhost:18789/api/p2p/pricing\ncurl \"http://localhost:18789/api/p2p/pricing?tool=knowledge_search\"\n</code></pre> <p>These endpoints query the running server's persistent P2P node. They are public (no authentication) and expose only node metadata. See the HTTP API Reference for response format details.</p>"},{"location":"features/p2p-network/#cli-commands","title":"CLI Commands","text":"<p>The CLI commands create ephemeral P2P nodes for one-off operations, independent of the running server:</p> <pre><code>lango p2p status               # Show node status\nlango p2p peers                # List connected peers\nlango p2p connect &lt;multiaddr&gt;  # Connect to a peer\nlango p2p disconnect &lt;peer-id&gt; # Disconnect from a peer\nlango p2p firewall list        # List firewall rules\nlango p2p firewall add         # Add a firewall rule\nlango p2p discover             # Discover agents\nlango p2p identity             # Show local identity\nlango p2p reputation --peer-did &lt;did&gt;  # Query trust score\nlango p2p pricing              # Show tool pricing\nlango p2p session list                          # List active sessions\nlango p2p session revoke --peer-did &lt;did&gt;       # Revoke peer session\nlango p2p session revoke-all                    # Revoke all sessions\nlango p2p sandbox status                        # Show sandbox status\nlango p2p sandbox test                          # Run sandbox smoke test\nlango p2p sandbox cleanup                       # Remove orphaned containers\n</code></pre> <p>See the P2P CLI Reference for detailed command documentation.</p>"},{"location":"features/p2p-network/#paid-value-exchange","title":"Paid Value Exchange","text":"<p>Lango supports paid P2P tool invocations via the Payment Gate. When pricing is enabled, remote peers must pay in USDC before invoking tools.</p>"},{"location":"features/p2p-network/#payment-gate-flow","title":"Payment Gate Flow","text":"<ol> <li>Price Query \u2014 The caller queries the provider's pricing via <code>p2p_price_query</code> or <code>GET /api/p2p/pricing</code></li> <li>Price Quote \u2014 The provider returns a <code>PriceQuoteResult</code> with the tool price in USDC</li> <li>Payment \u2014 The caller sends USDC via <code>p2p_pay</code> to the provider's wallet address</li> <li>Tool Invocation \u2014 After payment confirmation, the caller invokes the tool via <code>p2p_query</code></li> </ol>"},{"location":"features/p2p-network/#auto-approval-for-small-amounts","title":"Auto-Approval for Small Amounts","text":"<p>When <code>payment.limits.autoApproveBelow</code> is set, small payments are auto-approved without user confirmation. The auto-approval check evaluates three conditions:</p> <ol> <li>Threshold \u2014 the payment amount is strictly below <code>autoApproveBelow</code></li> <li>Per-transaction limit \u2014 the amount does not exceed <code>maxPerTx</code></li> <li>Daily limit \u2014 the cumulative daily spend (including this payment) does not exceed <code>maxDaily</code></li> </ol> <p>If any condition fails, the system falls back to interactive approval via the configured channel (Telegram, Discord, Slack, or terminal).</p> <p>This applies to both outbound payments (<code>p2p_pay</code>, <code>payment_send</code>) and inbound paid tool invocations where the owner's approval pipeline checks the tool price against the spending limiter.</p>"},{"location":"features/p2p-network/#usdc-registry","title":"USDC Registry","text":"<p>Payment settlements use on-chain USDC transfers. The system supports multiple chains via the <code>contracts.LookupUSDC()</code> registry. Wallet addresses are derived from peer DIDs.</p>"},{"location":"features/p2p-network/#configuration_2","title":"Configuration","text":"<pre><code>{\n  \"p2p\": {\n    \"pricing\": {\n      \"enabled\": true,\n      \"perQuery\": \"0.10\",\n      \"toolPrices\": {\n        \"knowledge_search\": \"0.25\",\n        \"browser_navigate\": \"0.50\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"features/p2p-network/#reputation-system","title":"Reputation System","text":"<p>The reputation system tracks peer behavior across exchanges and computes a trust score.</p>"},{"location":"features/p2p-network/#trust-score-formula","title":"Trust Score Formula","text":"<pre><code>score = successes / (successes + failures\u00d72 + timeouts\u00d71.5 + 1.0)\n</code></pre> <p>The score ranges from 0.0 to 1.0. The <code>minTrustScore</code> configuration (default: 0.3) sets the threshold for accepting requests from peers.</p>"},{"location":"features/p2p-network/#exchange-tracking","title":"Exchange Tracking","text":"<p>Each peer interaction is recorded: - Success \u2014 Tool invocation completed normally - Failure \u2014 Tool invocation returned an error - Timeout \u2014 Tool invocation timed out</p>"},{"location":"features/p2p-network/#querying-reputation","title":"Querying Reputation","text":"<ul> <li>CLI: <code>lango p2p reputation --peer-did &lt;did&gt;</code></li> <li>Agent Tool: <code>p2p_reputation</code> with <code>peer_did</code> parameter</li> <li>REST API: <code>GET /api/p2p/reputation?peer_did=&lt;did&gt;</code></li> </ul> <p>New peers with no reputation record are given the benefit of the doubt (trusted by default).</p>"},{"location":"features/p2p-network/#owner-shield","title":"Owner Shield","text":"<p>The Owner Shield prevents owner PII from leaking through P2P responses. When configured, it sanitizes all outgoing P2P responses to remove:</p> <ul> <li>Owner name, email, and phone number</li> <li>Custom extra terms (e.g., company name, address)</li> <li>Conversation history (when <code>blockConversations</code> is true, which is the default)</li> </ul>"},{"location":"features/p2p-network/#configuration_3","title":"Configuration","text":"<pre><code>{\n  \"p2p\": {\n    \"ownerProtection\": {\n      \"ownerName\": \"Alice\",\n      \"ownerEmail\": \"alice@example.com\",\n      \"ownerPhone\": \"+1234567890\",\n      \"extraTerms\": [\"Acme Corp\"],\n      \"blockConversations\": true\n    }\n  }\n}\n</code></pre>"},{"location":"features/skills/","title":"Skill System","text":"<p>The Skill System extends Lango's capabilities through file-based skill definitions. Skills are Markdown files (<code>SKILL.md</code>) that define reusable behaviors, scripts, templates, and multi-step workflows -- without writing Go code.</p>"},{"location":"features/skills/#skill-types","title":"Skill Types","text":"Type Description Definition instruction Reference documents that guide agent reasoning Markdown content in the body composite Multi-step tool chains executed sequentially JSON step definitions script Shell scripts executed in a sandboxed environment <code>sh</code>/<code>bash</code> code block template Go templates rendered with parameters <code>template</code> code block"},{"location":"features/skills/#skillmd-format","title":"SKILL.md Format","text":"<p>Every skill is defined in a <code>SKILL.md</code> file with YAML frontmatter and a Markdown body:</p> <pre><code>---\nname: my-skill\ndescription: What this skill does\ntype: instruction\nstatus: active\ncreated_by: user\nrequires_approval: false\nallowed-tools: exec file_read\n---\n\nThe skill content goes here. For instruction skills,\nthis entire body is the reference document.\n</code></pre>"},{"location":"features/skills/#frontmatter-fields","title":"Frontmatter Fields","text":"Field Required Default Description <code>name</code> Yes -- Unique skill identifier <code>description</code> No -- Description shown to the agent <code>type</code> No <code>instruction</code> Skill type: <code>instruction</code>, <code>composite</code>, <code>script</code>, <code>template</code> <code>status</code> No <code>active</code> Lifecycle status: <code>draft</code>, <code>active</code>, <code>disabled</code> <code>created_by</code> No -- Creator attribution <code>requires_approval</code> No <code>false</code> Whether execution requires user approval <code>allowed-tools</code> No -- Space-separated list of pre-approved tools"},{"location":"features/skills/#instruction-skills","title":"Instruction Skills","text":"<p>The Markdown body is stored as the skill content. When invoked, the agent receives this as a reference document:</p> <pre><code>---\nname: coding-guidelines\ndescription: Project coding standards and conventions\ntype: instruction\n---\n\n## Variable Naming\n- Use camelCase for local variables\n- Use PascalCase for exported functions\n...\n</code></pre>"},{"location":"features/skills/#script-skills","title":"Script Skills","text":"<p>Shell scripts are defined in an <code>sh</code> or <code>bash</code> code block:</p> <p><pre><code>---\nname: system-info\ndescription: Gather system information\ntype: script\n---\n\n```sh\necho \"OS: $(uname -s)\"\necho \"CPU: $(nproc) cores\"\necho \"Memory: $(free -h | awk '/Mem:/{print $2}')\"\n</code></pre> <pre><code>!!! warning \"Script Safety\"\n\n    Scripts are validated against dangerous patterns before execution. The following patterns are blocked:\n\n    | Pattern | Threat |\n    |---|---|\n    | `rm -rf /` | Filesystem destruction |\n    | Fork bomb (`:(){ ...\\|...&amp; };:`) | Resource exhaustion |\n    | `curl\\|sh` or `wget\\|sh` | Remote code execution |\n    | `&gt; /dev/sd*` | Disk overwrite |\n    | `mkfs.*` | Filesystem formatting |\n    | `dd if=` | Raw disk write |\n\n    Pattern blocking provides a basic safety net but is not a comprehensive sandbox. Review imported skills before enabling them, especially scripts from untrusted sources.\n\n### Composite Skills\n\nMulti-step tool chains are defined as JSON blocks:\n\n```markdown\n---\nname: deploy\ndescription: Deploy the application\ntype: composite\nrequires_approval: true\n---\n\n### Step 1\n\n```json\n{\n  \"tool\": \"exec\",\n  \"params\": {\"command\": \"make build\"}\n}\n</code></pre></p>"},{"location":"features/skills/#step-2","title":"Step 2","text":"<p><pre><code>{\n  \"tool\": \"exec\",\n  \"params\": {\"command\": \"make deploy\"}\n}\n</code></pre> <pre><code>### Template Skills\n\nGo templates with parameter substitution:\n\n```markdown\n---\nname: greeting\ndescription: Generate a greeting message\ntype: template\n---\n\n```template\nHello, {{.name}}! Welcome to {{.project}}.\n</code></pre></p>"},{"location":"features/skills/#parameters","title":"Parameters","text":"<p><pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\"type\": \"string\", \"description\": \"User's name\"},\n    \"project\": {\"type\": \"string\", \"description\": \"Project name\"}\n  }\n}\n</code></pre> <pre><code>## Skill Lifecycle\n\nSkills progress through three statuses:\n</code></pre> draft \u2192 active \u2192 disabled <pre><code>- **Draft** -- Created but not loaded into the agent\n- **Active** -- Loaded and available as an agent tool (prefixed `skill_`)\n- **Disabled** -- Retained in storage but not loaded\n\n## Importing Skills\n\nSkills can be imported from external sources when `skill.allowImport` is enabled.\n\n### From URLs\n\nImport a single skill from a raw URL:\n</code></pre> Use the skill_import tool to import from https://example.com/skills/my-skill/SKILL.md <pre><code>### From GitHub Repositories\n\nImport skills from GitHub repositories. Each subdirectory containing a `SKILL.md` file is treated as a skill:\n</code></pre> Import skills from https://github.com/owner/repo <pre><code>The importer supports:\n\n- **Git clone** (preferred) -- Shallow clone with resource file support (`scripts/`, `references/`, `assets/`)\n- **GitHub API fallback** -- When `git` is not available, uses the GitHub Contents API\n\n### Bulk Import\n\nImport all skills from a repository directory at once:\n</code></pre> Import all skills from https://github.com/owner/repo/tree/main/skills <pre><code>Bulk import respects the `maxBulkImport` limit (default: 50) and runs with configurable concurrency (default: 5).\n\n## Default Skills\n\nLango ships with **30 embedded default skills** that are deployed to `~/.lango/skills/` on first run. Existing skills are never overwritten, so user customizations are preserved.\n\n| Category | Skills |\n|---|---|\n| **Agent** | `agent-list`, `agent-status` |\n| **Config** | `config-create`, `config-delete`, `config-list`, `config-use`, `config-validate` |\n| **Cron** | `cron-add`, `cron-delete`, `cron-history`, `cron-list`, `cron-pause`, `cron-resume` |\n| **Graph** | `graph-clear`, `graph-query`, `graph-stats`, `graph-status` |\n| **Memory** | `memory-clear`, `memory-list`, `memory-status` |\n| **Security** | `secrets-list`, `security-status` |\n| **Server** | `serve`, `version`, `doctor` |\n| **Workflow** | `workflow-cancel`, `workflow-history`, `workflow-list`, `workflow-run`, `workflow-status` |\n\n## Storage\n\nSkills are stored as Markdown files in the skills directory (default: `~/.lango/skills/`). Each skill gets its own subdirectory:\n</code></pre> ~/.lango/skills/   my-skill/     SKILL.md     scripts/     references/     assets/ <pre><code>Resource directories (`scripts/`, `references/`, `assets/`) are automatically imported alongside the skill definition.\n\n## Configuration\n\n&gt; **Settings:** `lango settings` \u2192 Skill\n\n```json\n{\n  \"skill\": {\n    \"enabled\": true,\n    \"skillsDir\": \"~/.lango/skills\",\n    \"allowImport\": true,\n    \"maxBulkImport\": 50,\n    \"importConcurrency\": 5,\n    \"importTimeout\": \"2m\"\n  }\n}\n</code></pre></p> Key Type Default Description <code>enabled</code> <code>bool</code> <code>false</code> Enable the skill system <code>skillsDir</code> <code>string</code> <code>~/.lango/skills</code> Directory containing skill files <code>allowImport</code> <code>bool</code> <code>false</code> Enable importing skills from URLs and GitHub <code>maxBulkImport</code> <code>int</code> <code>50</code> Maximum skills in a single bulk import <code>importConcurrency</code> <code>int</code> <code>5</code> Concurrent HTTP requests during import <code>importTimeout</code> <code>duration</code> <code>2m</code> Overall timeout for import operations"},{"location":"features/skills/#agent-integration","title":"Agent Integration","text":"<p>Active skills are registered as agent tools with the <code>skill_</code> prefix. For example, a skill named <code>deploy</code> becomes the tool <code>skill_deploy</code>.</p> <p>The agent uses the skill description to decide when to invoke it. For instruction skills, the agent receives the full reference document when the tool is called.</p> <p>Skills also feed into the Knowledge System as Layer 3 (Skill Patterns), making them available during context retrieval.</p>"},{"location":"features/skills/#related","title":"Related","text":"<ul> <li>Knowledge System -- Skills appear in context layer 3</li> <li>Tool Approval -- Skills with <code>requires_approval: true</code></li> </ul>"},{"location":"features/system-prompts/","title":"System Prompts","text":"<p>Lango ships with production-quality default prompts embedded directly in the binary. No configuration is needed to get started -- the agent works out of the box with sensible defaults for identity, safety, conversation rules, and tool usage.</p>"},{"location":"features/system-prompts/#built-in-prompt-sections","title":"Built-in Prompt Sections","text":"<p>The system prompt is assembled from four prioritized sections. Lower priority numbers appear first in the final prompt.</p> File Section Priority Description <code>AGENTS.md</code> Identity 100 Agent name, role, tool capabilities, knowledge system <code>SAFETY.md</code> Safety 200 Secret protection, destructive operation confirmation, PII handling <code>CONVERSATION_RULES.md</code> Conversation Rules 300 Anti-repetition rules, channel limits, consistency <code>TOOL_USAGE.md</code> Tool Usage 400 Per-tool guidelines for exec, filesystem, browser, crypto, secrets, skills <p>The prompt builder sorts all sections by priority and joins their rendered content into a single system prompt string.</p>"},{"location":"features/system-prompts/#customizing-prompts","title":"Customizing Prompts","text":"<p>To override the built-in defaults, create a directory with <code>.md</code> files matching the section names and set <code>agent.promptsDir</code> in your configuration.</p> <pre><code>mkdir -p ~/.lango/prompts\necho \"You are a helpful coding assistant.\" &gt; ~/.lango/prompts/AGENTS.md\n</code></pre> <p>Settings: <code>lango settings</code> \u2192 Agent</p> <pre><code>{\n  \"agent\": {\n    \"promptsDir\": \"~/.lango/prompts\"\n  }\n}\n</code></pre>"},{"location":"features/system-prompts/#precedence","title":"Precedence","text":"<p>The system resolves prompts in the following order (first match wins):</p> <ol> <li><code>promptsDir</code> (directory) -- files from the configured prompts directory override matching built-in sections</li> <li>Built-in defaults -- embedded prompts compiled into the binary</li> </ol> <p>When a file in the prompts directory matches a known filename (e.g., <code>SAFETY.md</code>), it replaces the corresponding built-in section entirely (last-writer-wins). Unknown <code>.md</code> files are added as custom sections with priority 900+.</p>"},{"location":"features/system-prompts/#adding-custom-sections","title":"Adding Custom Sections","text":"<p>Any <code>.md</code> file placed in the prompts directory that does not match a known section name is automatically added as a custom section:</p> <pre><code>echo \"Always respond in formal English.\" &gt; ~/.lango/prompts/STYLE_GUIDE.md\n</code></pre> <p>This creates a section with:</p> <ul> <li>ID: <code>custom_style_guide</code></li> <li>Title: <code>STYLE GUIDE</code> (derived from filename, underscores become spaces)</li> <li>Priority: 900+ (appended after all built-in sections)</li> </ul> <p>Multiple custom sections are ordered by filesystem read order within the 900+ range.</p>"},{"location":"features/system-prompts/#per-agent-customization","title":"Per-Agent Customization","text":"<p>In multi-agent mode, each sub-agent can have its own prompt overrides. Create an <code>agents/&lt;name&gt;/</code> subdirectory inside your prompts directory.</p>"},{"location":"features/system-prompts/#supported-per-agent-files","title":"Supported Per-Agent Files","text":"File Section Priority Behavior <code>IDENTITY.md</code> Agent Identity 150 Replaces the default role description for this agent <code>SAFETY.md</code> Safety 200 Overrides shared safety guidelines for this agent <code>CONVERSATION_RULES.md</code> Conversation Rules 300 Overrides shared conversation rules for this agent <code>*.md</code> (other) Custom 900+ Additional custom sections for this agent <p>The per-agent identity section (priority 150) sits between the global identity (100) and safety (200), allowing fine-grained layering.</p>"},{"location":"features/system-prompts/#directory-layout","title":"Directory Layout","text":"<pre><code>~/.lango/prompts/\n  AGENTS.md                    # Global identity (priority 100)\n  SAFETY.md                    # Global safety (priority 200)\n  CONVERSATION_RULES.md        # Global conversation rules (priority 300)\n  TOOL_USAGE.md                # Global tool usage (priority 400)\n  STYLE_GUIDE.md               # Custom section (priority 900)\n  agents/\n    operator/\n      IDENTITY.md              # Operator-specific identity (priority 150)\n      SAFETY.md                # Operator-specific safety override\n    navigator/\n      IDENTITY.md              # Navigator-specific identity\n    planner/\n      IDENTITY.md              # Planner-specific identity\n      PLANNING_RULES.md        # Custom section for planner only\n</code></pre>"},{"location":"features/system-prompts/#how-per-agent-loading-works","title":"How Per-Agent Loading Works","text":"<ol> <li>The shared prompt builder is created from the global prompts directory (or built-in defaults)</li> <li>For each sub-agent, the builder is cloned</li> <li>Per-agent files from <code>agents/&lt;name&gt;/</code> are loaded and override matching sections in the clone</li> <li>Each agent ends up with its own tailored system prompt</li> </ol> <p>This means per-agent overrides only affect that specific agent -- other agents continue using the shared base prompts.</p>"},{"location":"features/system-prompts/#architecture","title":"Architecture","text":"<p>The prompt system is implemented in <code>internal/prompt/</code>:</p> <ul> <li><code>section.go</code> -- defines <code>SectionID</code> constants and the <code>PromptSection</code> interface</li> <li><code>builder.go</code> -- <code>Builder</code> assembles sections, supports <code>Add</code>, <code>Remove</code>, <code>Clone</code>, and <code>Build</code></li> <li><code>defaults.go</code> -- <code>DefaultBuilder()</code> loads the four built-in sections from embedded files</li> <li><code>loader.go</code> -- <code>LoadFromDir()</code> and <code>LoadAgentFromDir()</code> handle file-based overrides</li> </ul>"},{"location":"gateway/","title":"Gateway","text":"<p>Lango includes a built-in HTTP and WebSocket server that provides a network gateway for agent interaction. The gateway enables web clients and external services to communicate with the agent over standard protocols.</p> <ul> <li> <p> HTTP API</p> <p>RESTful endpoints for health checks, agent cards, authentication, and chat interaction.</p> <p> Learn more</p> </li> <li> <p> WebSocket</p> <p>Real-time streaming with per-session event scoping for live agent responses.</p> <p> Learn more</p> </li> </ul>"},{"location":"gateway/#related","title":"Related","text":"<ul> <li>Configuration -- Server configuration reference</li> <li>Security -- Authentication and access control</li> </ul>"},{"location":"gateway/http-api/","title":"HTTP API","text":"<p>Lango exposes an HTTP API for health monitoring, agent discovery, authentication, and chat interaction.</p>"},{"location":"gateway/http-api/#server-configuration","title":"Server Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Server</p> <pre><code>{\n  \"server\": {\n    \"host\": \"localhost\",\n    \"port\": 18789,\n    \"httpEnabled\": true\n  }\n}\n</code></pre> Key Type Default Description <code>server.host</code> <code>string</code> <code>localhost</code> Bind address for the HTTP server <code>server.port</code> <code>int</code> <code>18789</code> Port number <code>server.httpEnabled</code> <code>bool</code> <code>true</code> Enable the HTTP server"},{"location":"gateway/http-api/#endpoints","title":"Endpoints","text":""},{"location":"gateway/http-api/#health-check","title":"Health Check","text":"<pre><code>GET /health\n</code></pre> <p>Returns the server health status. Use this for monitoring, load balancer probes, and Docker health checks.</p> <pre><code>curl http://localhost:18789/health\n</code></pre>"},{"location":"gateway/http-api/#agent-card-a2a","title":"Agent Card (A2A)","text":"<pre><code>GET /.well-known/agent.json\n</code></pre> <p>Returns the agent's A2A agent card when the A2A protocol is enabled (<code>a2a.enabled: true</code>). This endpoint follows the Agent-to-Agent protocol specification for remote agent discovery.</p>"},{"location":"gateway/http-api/#authentication","title":"Authentication","text":"<p>Authentication endpoints are available when OIDC is configured. See Authentication for details on the OAuth login flow and token management.</p>"},{"location":"gateway/http-api/#chat","title":"Chat","text":"<p>The main chat endpoint accepts user messages and returns agent responses. When WebSocket is enabled, responses are streamed in real time via WebSocket events alongside the standard HTTP response.</p>"},{"location":"gateway/http-api/#p2p-network","title":"P2P Network","text":"<p>When P2P networking is enabled (<code>p2p.enabled: true</code>), the gateway exposes read-only endpoints for querying the running node's state. These endpoints are public (no authentication required) and return only node metadata.</p>"},{"location":"gateway/http-api/#get-apip2pstatus","title":"<code>GET /api/p2p/status</code>","text":"<p>Returns the local node's peer ID, listen addresses, and connected peer count.</p> <pre><code>curl http://localhost:18789/api/p2p/status\n</code></pre> <pre><code>{\n  \"peerId\": \"12D3KooW...\",\n  \"listenAddrs\": [\"/ip4/0.0.0.0/tcp/9000\"],\n  \"connectedPeers\": 2,\n  \"mdnsEnabled\": true\n}\n</code></pre>"},{"location":"gateway/http-api/#get-apip2ppeers","title":"<code>GET /api/p2p/peers</code>","text":"<p>Returns the list of currently connected peers with their IDs and multiaddresses.</p> <pre><code>curl http://localhost:18789/api/p2p/peers\n</code></pre> <pre><code>{\n  \"peers\": [\n    {\n      \"peerId\": \"12D3KooW...\",\n      \"addrs\": [\"/ip4/172.20.0.3/tcp/9002\"]\n    }\n  ],\n  \"count\": 1\n}\n</code></pre>"},{"location":"gateway/http-api/#get-apip2pidentity","title":"<code>GET /api/p2p/identity</code>","text":"<p>Returns the local DID derived from the wallet and the libp2p peer ID.</p> <pre><code>curl http://localhost:18789/api/p2p/identity\n</code></pre> <pre><code>{\n  \"did\": \"did:lango:02abc...\",\n  \"peerId\": \"12D3KooW...\"\n}\n</code></pre> <p>If no identity provider is configured, <code>did</code> is <code>null</code>.</p>"},{"location":"gateway/http-api/#get-apip2preputation","title":"<code>GET /api/p2p/reputation</code>","text":"<p>Returns the trust score and exchange history for a peer. The <code>peer_did</code> query parameter is required.</p> <pre><code>curl \"http://localhost:18789/api/p2p/reputation?peer_did=did:lango:02abc...\"\n</code></pre> <pre><code>{\n  \"peerDid\": \"did:lango:02abc...\",\n  \"trustScore\": 0.85,\n  \"successfulExchanges\": 42,\n  \"failedExchanges\": 3,\n  \"timeoutCount\": 1,\n  \"firstSeen\": \"2026-02-20T10:00:00Z\",\n  \"lastInteraction\": \"2026-02-24T14:30:00Z\"\n}\n</code></pre> <p>If the reputation system is not enabled or the peer has no history, the response indicates the default state (new peers are trusted by default).</p>"},{"location":"gateway/http-api/#get-apip2ppricing","title":"<code>GET /api/p2p/pricing</code>","text":"<p>Returns tool pricing configuration. Use the optional <code>tool</code> query parameter to query a specific tool's price.</p> <pre><code># Get all tool pricing\ncurl http://localhost:18789/api/p2p/pricing\n</code></pre> <pre><code>{\n  \"enabled\": true,\n  \"currency\": \"USDC\",\n  \"perQuery\": \"0.10\",\n  \"toolPrices\": {\n    \"knowledge_search\": \"0.25\",\n    \"browser_navigate\": \"0.50\"\n  }\n}\n</code></pre> <pre><code># Get pricing for a specific tool\ncurl \"http://localhost:18789/api/p2p/pricing?tool=knowledge_search\"\n</code></pre> <pre><code>{\n  \"tool\": \"knowledge_search\",\n  \"price\": \"0.25\",\n  \"currency\": \"USDC\"\n}\n</code></pre> <p>Note</p> <p>These REST endpoints query the running server's persistent P2P node. The CLI commands (<code>lango p2p status</code>, etc.) create ephemeral nodes for one-off operations. For monitoring and automation, prefer the REST API.</p>"},{"location":"gateway/http-api/#related","title":"Related","text":"<ul> <li>WebSocket -- Real-time streaming events</li> <li>Authentication -- OIDC and OAuth configuration</li> <li>A2A Protocol -- Agent-to-Agent discovery</li> </ul>"},{"location":"gateway/websocket/","title":"WebSocket","text":"<p>Lango supports WebSocket connections for real-time streaming of agent responses. Clients receive incremental updates as the agent processes a request.</p>"},{"location":"gateway/websocket/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Server</p> <pre><code>{\n  \"server\": {\n    \"wsEnabled\": true,\n    \"allowedOrigins\": [\n      \"http://localhost:3000\",\n      \"https://your-app.example.com\"\n    ]\n  }\n}\n</code></pre> Key Type Default Description <code>server.wsEnabled</code> <code>bool</code> <code>true</code> Enable WebSocket support <code>server.allowedOrigins</code> <code>[]string</code> <code>[]</code> Allowed CORS origins (empty = allow all) <p>CORS in Production</p> <p>Always set <code>server.allowedOrigins</code> explicitly in production to restrict which domains can establish WebSocket connections.</p>"},{"location":"gateway/websocket/#events","title":"Events","text":"Event Payload Description <code>agent.thinking</code> <code>{sessionKey}</code> Sent before agent execution begins <code>agent.chunk</code> <code>{sessionKey, chunk}</code> Streamed text chunk during LLM generation <code>agent.done</code> <code>{sessionKey}</code> Sent after agent execution completes"},{"location":"gateway/websocket/#event-scoping","title":"Event Scoping","text":"<p>Events are scoped to the requesting user's session. A client only receives events for its own session, not events from other users or sessions.</p>"},{"location":"gateway/websocket/#backward-compatibility","title":"Backward Compatibility","text":"<p>WebSocket streaming is additive. The full agent response is still returned in the standard RPC result. Clients that do not use WebSocket continue to work without modification.</p>"},{"location":"gateway/websocket/#related","title":"Related","text":"<ul> <li>HTTP API -- REST endpoints and server configuration</li> <li>Security -- Authentication and access control</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Get Lango up and running in minutes.</p>"},{"location":"getting-started/#overview","title":"Overview","text":"<p>Setting up Lango involves three steps:</p> <ol> <li>Installation -- Build the binary from source</li> <li>Quick Start -- Run the onboard wizard and start the server</li> <li>Configuration -- Understand profiles and config management</li> </ol>"},{"location":"getting-started/#requirements-at-a-glance","title":"Requirements at a Glance","text":"Requirement Minimum Go 1.25+ CGO Enabled (required for SQLite) OS Linux, macOS AI Provider At least one API key (OpenAI, Anthropic, Gemini, or Ollama) <p>Tip</p> <p>If you just want to try Lango quickly, follow the Quick Start guide -- it takes about 2 minutes.</p>"},{"location":"getting-started/configuration/","title":"Configuration Basics","text":"<p>Lango stores all configuration in encrypted SQLite profiles. API keys, tokens, and settings are encrypted at rest using AES-256-GCM.</p>"},{"location":"getting-started/configuration/#how-configuration-works","title":"How Configuration Works","text":"<p>Configuration is stored in <code>~/.lango/lango.db</code> as encrypted profiles. Each profile contains a complete set of settings -- provider credentials, channel tokens, feature flags, and more.</p> <p>Encryption</p> <p>All configuration data is encrypted with a passphrase you set on first run. The passphrase is required every time you start Lango or access config commands.</p>"},{"location":"getting-started/configuration/#guided-setup","title":"Guided Setup","text":"<p>For initial setup or quick changes, use the onboard wizard:</p> <pre><code>lango onboard\n</code></pre> <p>This walks you through provider, agent, channel, security, and validation steps. See Quick Start for details.</p>"},{"location":"getting-started/configuration/#full-editor","title":"Full Editor","text":"<p>For access to every configuration option:</p> <pre><code>lango settings\n</code></pre> <p>This opens an interactive TUI editor where you can browse and modify all settings.</p>"},{"location":"getting-started/configuration/#config-cli-commands","title":"Config CLI Commands","text":"<p>Manage profiles from the command line:</p>"},{"location":"getting-started/configuration/#list-profiles","title":"List Profiles","text":"<pre><code>lango config list\n</code></pre> <p>Shows all profiles with their name, active status, version, and timestamps.</p>"},{"location":"getting-started/configuration/#create-a-profile","title":"Create a Profile","text":"<pre><code>lango config create &lt;name&gt;\n</code></pre> <p>Creates a new profile with default configuration values.</p>"},{"location":"getting-started/configuration/#switch-profiles","title":"Switch Profiles","text":"<pre><code>lango config use &lt;name&gt;\n</code></pre> <p>Sets the specified profile as active. The active profile is loaded when you run <code>lango serve</code>.</p>"},{"location":"getting-started/configuration/#delete-a-profile","title":"Delete a Profile","text":"<pre><code>lango config delete &lt;name&gt;\n</code></pre> <p>Permanently deletes a profile. Prompts for confirmation unless <code>--force</code> is passed.</p> <pre><code>lango config delete &lt;name&gt; --force\n</code></pre>"},{"location":"getting-started/configuration/#import-configuration","title":"Import Configuration","text":"<pre><code>lango config import &lt;file.json&gt; --profile &lt;name&gt;\n</code></pre> <p>Imports a plaintext JSON configuration file, encrypts it, and stores it as a profile.</p> <p>Warning</p> <p>The source JSON file is deleted after import for security. Make sure you have a backup if needed.</p>"},{"location":"getting-started/configuration/#export-configuration","title":"Export Configuration","text":"<pre><code>lango config export &lt;name&gt;\n</code></pre> <p>Exports a profile as plaintext JSON to stdout. Requires passphrase verification.</p> <p>Warning</p> <p>The exported output contains sensitive values (API keys, tokens) in plaintext. Handle with care.</p>"},{"location":"getting-started/configuration/#validate-configuration","title":"Validate Configuration","text":"<pre><code>lango config validate\n</code></pre> <p>Validates the active profile against required fields and configuration rules. Run this after making changes to catch errors before starting the server.</p>"},{"location":"getting-started/configuration/#summary","title":"Summary","text":"Task Command First-time setup <code>lango onboard</code> Edit all settings <code>lango settings</code> List profiles <code>lango config list</code> Create profile <code>lango config create &lt;name&gt;</code> Switch profile <code>lango config use &lt;name&gt;</code> Delete profile <code>lango config delete &lt;name&gt;</code> Import JSON <code>lango config import &lt;file&gt;</code> Export JSON <code>lango config export &lt;name&gt;</code> Validate <code>lango config validate</code>"},{"location":"getting-started/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start -- Run the onboard wizard</li> <li>CLI Reference -- Full command documentation</li> <li>Security -- Encryption and secrets management details</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"Requirement Details Go 1.25 or later CGO Must be enabled (<code>CGO_ENABLED=1</code>). Required by the <code>sqlite3</code> and <code>sqlite-vec</code> drivers. C compiler <code>gcc</code> or <code>clang</code> (needed by CGO) Git For cloning the repository <p>Why CGO?</p> <p>Lango uses SQLite for encrypted configuration storage and <code>sqlite-vec</code> for vector similarity search. Both require CGO-enabled builds. The Makefile sets <code>CGO_ENABLED=1</code> automatically.</p>"},{"location":"getting-started/installation/#build-from-source","title":"Build from Source","text":"<pre><code>git clone https://github.com/langoai/lango.git\ncd lango\nmake build\n</code></pre> <p>The binary is written to <code>bin/lango</code>. To install it into your <code>$GOPATH/bin</code>:</p> <pre><code>make install\n</code></pre>"},{"location":"getting-started/installation/#go-install","title":"Go Install","text":"<p>You can also install directly with <code>go install</code>:</p> <pre><code>CGO_ENABLED=1 go install github.com/langoai/lango/cmd/lango@latest\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code>lango version\n</code></pre> <p>You should see output like:</p> <pre><code>lango v0.2.1\n</code></pre>"},{"location":"getting-started/installation/#optional-browser-tools","title":"Optional: Browser Tools","text":"<p>Some tools (browser automation) require a Chromium-based browser.</p> <p>Chromium Dependency</p> <p>If you plan to use browser automation tools, ensure a Chromium-based browser (Chrome, Chromium, or Edge) is installed on the system. Lango uses it via the Chrome DevTools Protocol for web page interaction.</p>"},{"location":"getting-started/installation/#platform-specific-builds","title":"Platform-Specific Builds","text":"<p>The Makefile provides cross-compilation targets:</p> <pre><code># Linux amd64\nmake build-linux\n\n# macOS arm64 (Apple Silicon)\nmake build-darwin\n\n# All platforms\nmake build-all\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Once installed, proceed to the Quick Start to configure and launch your agent.</p>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Get your agent running in three steps.</p>"},{"location":"getting-started/quickstart/#step-1-install","title":"Step 1: Install","text":"<pre><code>git clone https://github.com/langoai/lango.git\ncd lango\nmake build\n</code></pre> <p>See Installation for detailed instructions and prerequisites.</p>"},{"location":"getting-started/quickstart/#step-2-onboard","title":"Step 2: Onboard","text":"<p>Run the guided setup wizard:</p> <pre><code>./bin/lango onboard\n</code></pre> <p>The wizard walks you through five steps:</p>"},{"location":"getting-started/quickstart/#1-provider-setup","title":"1. Provider Setup","text":"<p>Choose an AI provider and enter your API credentials.</p> Provider What You Need OpenAI API key Anthropic API key Gemini API key Ollama Local Ollama server URL"},{"location":"getting-started/quickstart/#2-agent-config","title":"2. Agent Config","text":"<p>Configure your agent's model settings:</p> <ul> <li>Model -- Select which model to use (e.g., <code>gpt-4o</code>, <code>claude-sonnet-4-20250514</code>)</li> <li>Max Tokens -- Maximum response length</li> <li>Temperature -- Creativity level (0.0 = deterministic, 1.0 = creative)</li> </ul>"},{"location":"getting-started/quickstart/#3-channel-setup","title":"3. Channel Setup","text":"<p>Connect at least one messaging channel:</p> <ul> <li>Telegram -- Bot token from @BotFather</li> <li>Discord -- Bot token from the Discord Developer Portal</li> <li>Slack -- Bot token and App token from the Slack API dashboard</li> </ul>"},{"location":"getting-started/quickstart/#4-security-auth","title":"4. Security &amp; Auth","text":"<p>Configure security features:</p> <ul> <li>Privacy Interceptor -- Filter sensitive content from AI requests</li> <li>PII Protection -- Automatically detect and redact personally identifiable information</li> </ul>"},{"location":"getting-started/quickstart/#5-test-config","title":"5. Test Config","text":"<p>The wizard validates your configuration by checking:</p> <ul> <li>Provider connectivity</li> <li>Channel authentication</li> <li>Configuration consistency</li> </ul> <p>Tip</p> <p>You can re-run <code>lango onboard</code> at any time to update your configuration. It loads your existing settings as defaults.</p>"},{"location":"getting-started/quickstart/#step-3-serve","title":"Step 3: Serve","text":"<p>Start the agent server:</p> <pre><code>./bin/lango serve\n</code></pre> <p>Your agent is now running and connected to your configured channels. Send a message through Telegram, Discord, or Slack to start a conversation.</p> <p>Health Check</p> <p>Verify the server is running:</p> <pre><code>lango health\n</code></pre> <p>Or with curl:</p> <pre><code>curl http://localhost:18789/health\n</code></pre>"},{"location":"getting-started/quickstart/#beyond-the-wizard","title":"Beyond the Wizard","text":""},{"location":"getting-started/quickstart/#full-configuration-editor","title":"Full Configuration Editor","text":"<p>For access to all configuration options beyond what the onboard wizard covers:</p> <pre><code>lango settings\n</code></pre> <p>This opens an interactive TUI editor with every available setting.</p>"},{"location":"getting-started/quickstart/#validate-configuration","title":"Validate Configuration","text":"<p>Check your configuration for errors without starting the server:</p> <pre><code>lango config validate\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Basics -- Learn about profiles and config management</li> <li>CLI Reference -- Full command documentation</li> <li>Features -- Explore AI providers, channels, knowledge system, and more</li> </ul>"},{"location":"payments/","title":"Payments","text":"<p>Lango includes a blockchain payment system for USDC transactions on Base L2, with support for the X402 auto-pay protocol.</p> <p>Experimental</p> <p>The payments system is under active development. APIs, configuration keys, and behavior may change between releases. Enable it explicitly via <code>payment.enabled</code>.</p> <ul> <li> <p> USDC Payments</p> <p>Send and receive USDC on Base L2 with wallet management, spending limits, and transaction history.</p> <p> Learn more</p> </li> <li> <p> X402 Protocol</p> <p>Automatic HTTP 402 payment handling using Coinbase's X402 Go SDK with EIP-3009 off-chain signatures.</p> <p> Learn more</p> </li> </ul>"},{"location":"payments/#related","title":"Related","text":"<ul> <li>Security -- Authentication and access control</li> <li>Configuration -- General configuration reference</li> </ul>"},{"location":"payments/usdc/","title":"USDC Payments","text":"<p>Lango provides a blockchain payment system for USDC on Base L2 (EVM). The agent can send USDC, check balances, view transaction history, and manage wallets through built-in payment tools.</p> <p>Experimental</p> <p>The payments system is under active development. Enable it with <code>payment.enabled: true</code>.</p>"},{"location":"payments/usdc/#payment-tools","title":"Payment Tools","text":"Tool Description Safety Level <code>payment_send</code> Send USDC to recipient Dangerous <code>payment_balance</code> Check wallet USDC balance Safe <code>payment_history</code> View recent transactions Safe <code>payment_limits</code> View spending limits and daily usage Safe <code>payment_wallet_info</code> Show wallet address and network info Safe <code>payment_create_wallet</code> Create new blockchain wallet Dangerous <code>payment_x402_fetch</code> HTTP request with automatic X402 payment Dangerous <p>Tool Approval</p> <p>Tools marked Dangerous require explicit user approval before execution unless auto-approve policies are configured. See Tool Approval for details.</p>"},{"location":"payments/usdc/#wallet-providers","title":"Wallet Providers","text":"Provider Description <code>local</code> Default. Private key derived from encrypted secrets stored on disk. <code>rpc</code> Remote signer. Delegates signing to an external RPC endpoint. <code>composite</code> Tries <code>rpc</code> first, falls back to <code>local</code> if unavailable."},{"location":"payments/usdc/#cli-examples","title":"CLI Examples","text":"<p>Check wallet balance:</p> <pre><code>lango payment balance\n</code></pre> <p>View recent transactions:</p> <pre><code>lango payment history --limit 10\n</code></pre> <p>View spending limits and daily usage:</p> <pre><code>lango payment limits\n</code></pre> <p>Show wallet address and network info:</p> <pre><code>lango payment info\n</code></pre> <p>Send USDC to a recipient:</p> <pre><code>lango payment send --to 0x1234...abcd --amount 0.50 --purpose \"API access\"\n</code></pre> <p>Skip confirmation prompt with <code>--force</code>:</p> <pre><code>lango payment send --to 0x1234...abcd --amount 0.50 --purpose \"API access\" --force\n</code></pre> <p>JSON output for scripting:</p> <pre><code>lango payment balance --json\n</code></pre>"},{"location":"payments/usdc/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Payment</p> <pre><code>{\n  \"payment\": {\n    \"enabled\": true,\n    \"walletProvider\": \"local\",\n    \"network\": {\n      \"chainId\": 84532,\n      \"rpcUrl\": \"https://sepolia.base.org\",\n      \"usdcContract\": \"0x...\"\n    },\n    \"limits\": {\n      \"maxPerTx\": 10.0,\n      \"maxDaily\": 100.0,\n      \"autoApproveBelow\": 0.10\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>payment.enabled</code> <code>bool</code> <code>false</code> Enable the payment system <code>payment.walletProvider</code> <code>string</code> <code>local</code> Wallet provider: <code>local</code>, <code>rpc</code>, or <code>composite</code> <code>payment.network.chainId</code> <code>int</code> <code>84532</code> Chain ID (<code>84532</code> = Base Sepolia, <code>8453</code> = Base mainnet) <code>payment.network.rpcUrl</code> <code>string</code> -- RPC endpoint URL for the target network <code>payment.network.usdcContract</code> <code>string</code> -- USDC token contract address <code>payment.limits.maxPerTx</code> <code>float64</code> <code>10.0</code> Maximum USDC per transaction <code>payment.limits.maxDaily</code> <code>float64</code> <code>100.0</code> Maximum USDC per 24-hour rolling window <code>payment.limits.autoApproveBelow</code> <code>float64</code> <code>0.10</code> Auto-approve threshold (no confirmation prompt) <p>P2P Integration</p> <p>The <code>autoApproveBelow</code> threshold also applies to P2P payment flows:</p> <ul> <li>Outbound: <code>p2p_pay</code> and <code>payment_send</code> transactions below the threshold are auto-approved without user confirmation.</li> <li>Inbound: When a remote peer invokes a paid tool, the owner's approval pipeline checks the tool price against the spending limiter. If the price is below <code>autoApproveBelow</code> and within daily limits, the invocation is auto-approved.</li> </ul> <p>See P2P Network \u2014 Approval Pipeline for the full inbound gate flow.</p> <p>Testnet First</p> <p>Start with Base Sepolia (<code>chainId: 84532</code>) for testing. Switch to Base mainnet (<code>chainId: 8453</code>) only after verifying your configuration. See the Production Checklist for mainnet deployment guidance.</p>"},{"location":"payments/usdc/#related","title":"Related","text":"<ul> <li>X402 Protocol -- Automatic HTTP 402 payment handling</li> <li>Production Checklist -- Mainnet deployment guidance</li> <li>Tool Approval -- Approval policies for dangerous tools</li> </ul>"},{"location":"payments/x402/","title":"X402 Protocol","text":"<p>Lango integrates the official Coinbase X402 Go SDK for automatic HTTP 402 payment handling. When a server responds with <code>402 Payment Required</code>, the SDK intercepts the response, creates a signed payment, and retries the request automatically.</p> <p>Experimental</p> <p>X402 support is under active development. Enable it with <code>payment.x402.autoIntercept: true</code>.</p>"},{"location":"payments/x402/#how-it-works","title":"How It Works","text":"<p>When <code>payment.x402.autoIntercept</code> is enabled, the following flow occurs:</p> <pre><code>1. Agent makes HTTP request via payment_x402_fetch tool\n       \u2502\n2. Server returns 402 with PAYMENT-REQUIRED header (Base64 JSON)\n       \u2502\n3. SDK's PaymentRoundTripper intercepts 402\n       \u2502\n4. SDK creates EIP-3009 transferWithAuthorization, signs with EIP-712\n       \u2502\n5. SDK retries request with PAYMENT-SIGNATURE header\n       \u2502\n6. Server verifies signature and returns content\n</code></pre> <p>The entire flow is transparent to the agent -- it simply receives the final response content after payment is processed.</p>"},{"location":"payments/x402/#key-features","title":"Key Features","text":""},{"location":"payments/x402/#eip-3009-off-chain-signatures","title":"EIP-3009 Off-Chain Signatures","text":"<p>Payments use <code>transferWithAuthorization</code> (EIP-3009), which allows token transfers via off-chain signatures. The token holder signs a message authorizing the transfer without needing an on-chain approval transaction first.</p>"},{"location":"payments/x402/#caip-2-network-identifiers","title":"CAIP-2 Network Identifiers","text":"<p>The X402 protocol uses CAIP-2 chain identifiers in the format <code>eip155:&lt;chainID&gt;</code>. This provides a standardized way to identify blockchain networks across different protocols.</p>"},{"location":"payments/x402/#spending-limit-enforcement","title":"Spending Limit Enforcement","text":"<p>Before creating a payment, the SDK invokes the <code>BeforePaymentCreationHook</code> to enforce spending limits. If the payment would exceed the configured <code>maxPerTx</code> or <code>maxDaily</code> limits, it is rejected before any signature is created.</p>"},{"location":"payments/x402/#lazy-client-initialization","title":"Lazy Client Initialization","text":"<p>The X402 client is initialized lazily on first use, not at startup. This avoids unnecessary wallet setup if the agent never encounters a 402 response.</p>"},{"location":"payments/x402/#audit-trail","title":"Audit Trail","text":"<p>Every X402 payment creates a <code>PaymentTx</code> record with <code>payment_method=\"x402_v2\"</code>, providing a full audit trail of automated payments.</p>"},{"location":"payments/x402/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Payment</p> <pre><code>{\n  \"payment\": {\n    \"enabled\": true,\n    \"x402\": {\n      \"autoIntercept\": true,\n      \"maxAutoPayAmount\": 1.0\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>payment.x402.autoIntercept</code> <code>bool</code> <code>false</code> Enable automatic HTTP 402 interception <code>payment.x402.maxAutoPayAmount</code> <code>float64</code> <code>1.0</code> Maximum USDC per auto-payment <p>Spending Safety</p> <p>Set <code>maxAutoPayAmount</code> conservatively. This limit is enforced per-request and works alongside the global <code>limits.maxPerTx</code> and <code>limits.maxDaily</code> limits.</p>"},{"location":"payments/x402/#related","title":"Related","text":"<ul> <li>USDC Payments -- Wallet management and payment tools</li> <li>Production Checklist -- Mainnet deployment guidance</li> </ul>"},{"location":"security/","title":"Security","text":"<p>Lango provides multiple layers of security to protect sensitive data flowing between users, agents, and AI providers.</p>"},{"location":"security/#security-layers","title":"Security Layers","text":"Layer Purpose Details Encryption &amp; Secrets Protect data at rest and in transit AES-256-GCM encryption, key registry, secret management PII Redaction Strip personal information before it reaches AI providers Regex patterns + optional NER via Microsoft Presidio Tool Approval Control which tools agents can execute Policy-based approval workflows with channel notifications Authentication Secure gateway access OIDC login flow, session management, CORS controls Hardware Keyring Secure passphrase storage Hardware-backed passphrase via Touch ID (macOS Secure Enclave) or TPM 2.0 (Linux) Database Encryption Protect data at rest SQLCipher transparent encryption for the application database Cloud KMS / HSM Hardware-backed cryptography AWS KMS, GCP KMS, Azure Key Vault, PKCS#11 HSM integration P2P Session Management Peer session lifecycle Session listing, explicit invalidation, security-event-based revocation P2P Tool Sandbox Execution isolation Subprocess and container-based isolation for remote tool invocations P2P Auth Hardening Signed challenge protocol ECDSA signed challenges, nonce replay protection, timestamp validation"},{"location":"security/#architecture","title":"Architecture","text":"<pre><code>graph LR\n    User --&gt;|input| Interceptor\n    Interceptor --&gt;|PII redacted| Agent\n    Agent --&gt;|tool call| Approval[Tool Approval]\n    Approval --&gt;|approved| Tool\n    Tool --&gt;|secret ref| RefStore[Secret RefStore]\n    RefStore --&gt;|resolved| Execution\n    Agent --&gt;|output| Scanner[Output Scanner]\n    Scanner --&gt;|secrets masked| User</code></pre> <p>The security interceptor sits between the user and the AI agent. It:</p> <ol> <li>Redacts PII from user input before forwarding to the AI provider</li> <li>Gates tool execution behind an approval workflow for sensitive operations</li> <li>Scans agent output to replace any leaked secret values with <code>[SECRET:name]</code> placeholders</li> </ol> <p>Enable the Interceptor</p> <p>The security interceptor is disabled by default. Enable it in your configuration:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"enabled\": true,\n      \"redactPii\": true,\n      \"approvalPolicy\": \"dangerous\"\n    }\n  }\n}\n</code></pre>"},{"location":"security/#encryption-modes","title":"Encryption Modes","text":"<p>Lango supports three encryption modes depending on your deployment:</p> <ul> <li>Local Mode (default) -- AES-256-GCM with passphrase-derived keys via PBKDF2. Suitable for development and single-user setups.</li> <li>RPC Mode (production) -- Delegates cryptographic operations to a hardware-backed companion app or external signer. Keys never leave secure hardware.</li> <li>Cloud KMS Mode (enterprise) -- Delegates to managed key services (AWS KMS, GCP KMS, Azure Key Vault) or on-premises HSM via PKCS#11. Automatic fallback to local mode when KMS is unavailable.</li> </ul> <p>See Encryption &amp; Secrets for full details.</p>"},{"location":"security/#quick-links","title":"Quick Links","text":"<ul> <li>Encryption &amp; Secrets -- Key derivation, secret storage, output scanning, companion app</li> <li>PII Redaction -- Builtin patterns, custom regex, Presidio integration</li> <li>Tool Approval -- Approval policies, sensitive/exempt tools, notifications</li> <li>Authentication -- OIDC providers, session management, CORS configuration</li> <li>Hardware Keyring -- Secure passphrase storage via Touch ID / TPM</li> <li>Database Encryption -- SQLCipher transparent database encryption</li> <li>Cloud KMS / HSM -- AWS, GCP, Azure, PKCS#11 integration</li> </ul>"},{"location":"security/authentication/","title":"Authentication","text":"<p>Lango supports OIDC (OpenID Connect) authentication for the gateway server. When configured, protected routes require a valid session cookie before granting access.</p>"},{"location":"security/authentication/#auth-endpoints","title":"Auth Endpoints","text":"Method Path Description <code>GET</code> <code>/auth/login/{provider}</code> Initiate OIDC login flow <code>GET</code> <code>/auth/callback/{provider}</code> OIDC callback (returns JSON with session key) <code>POST</code> <code>/auth/logout</code> Clear session and cookie"},{"location":"security/authentication/#login-flow","title":"Login Flow","text":"<pre><code>sequenceDiagram\n    participant Browser\n    participant Lango as Lango Gateway\n    participant IdP as OIDC Provider\n\n    Browser-&gt;&gt;Lango: GET /auth/login/google\n    Lango-&gt;&gt;Lango: Generate state, set oauth_state cookie\n    Lango--&gt;&gt;Browser: 302 Redirect to IdP\n    Browser-&gt;&gt;IdP: Authorize\n    IdP--&gt;&gt;Browser: 302 Redirect with code + state\n    Browser-&gt;&gt;Lango: GET /auth/callback/google?code=...&amp;state=...\n    Lango-&gt;&gt;IdP: Exchange code for token\n    IdP--&gt;&gt;Lango: ID Token + Access Token\n    Lango-&gt;&gt;Lango: Verify ID token, create session\n    Lango--&gt;&gt;Browser: JSON {\"status\":\"authenticated\",\"sessionKey\":\"...\"}</code></pre> <p>The callback returns a JSON response (not a redirect), making it suitable for both browser and programmatic clients:</p> <pre><code>{\n  \"status\": \"authenticated\",\n  \"sessionKey\": \"sess_abc123...\"\n}\n</code></pre> <p>A <code>lango_session</code> cookie is also set automatically with HttpOnly, Secure (when HTTPS), and SameSite=Lax flags.</p>"},{"location":"security/authentication/#logout","title":"Logout","text":"<pre><code>curl -X POST http://localhost:18789/auth/logout \\\n  -b \"lango_session=sess_abc123...\"\n</code></pre> <p>Returns:</p> <pre><code>{\n  \"status\": \"logged_out\"\n}\n</code></pre> <p>The session is deleted from the store and the cookie is cleared.</p>"},{"location":"security/authentication/#protected-routes","title":"Protected Routes","text":"<p>When OIDC is configured, the following routes require a valid <code>lango_session</code> cookie:</p> Route Description <code>/ws</code> WebSocket connection <code>/status</code> Agent status endpoint <p>No OIDC = Open Access</p> <p>When no OIDC providers are configured, all routes are accessible without authentication. This is the default development mode behavior.</p> <p>Unauthenticated requests to protected routes receive:</p> <pre><code>{\"error\": \"authentication required\"}\n</code></pre> <p>with HTTP status <code>401 Unauthorized</code>.</p>"},{"location":"security/authentication/#websocket-cors","title":"WebSocket CORS","text":"<p>The <code>allowedOrigins</code> setting controls which origins can establish WebSocket connections:</p> Configuration Behavior <code>[]</code> (empty) Same-origin only (default) <code>[\"https://example.com\"]</code> Only the listed origins <code>[\"*\"]</code> Allow all origins <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"server\": {\n    \"allowedOrigins\": [\n      \"https://app.example.com\",\n      \"https://admin.example.com\"\n    ]\n  }\n}\n</code></pre> <p>Wildcard Origins</p> <p>Setting <code>allowedOrigins: [\"*\"]</code> allows any website to establish WebSocket connections to your Lango instance. Do not use this in production.</p> <p>When no <code>Origin</code> header is present in the request (same-origin requests), the connection is always allowed regardless of configuration.</p>"},{"location":"security/authentication/#rate-limiting","title":"Rate Limiting","text":"<p>Auth endpoints are throttled to a maximum of 10 concurrent requests to prevent abuse. Excess requests are queued until a slot becomes available.</p> <p>This applies to:</p> <ul> <li><code>/auth/login/{provider}</code></li> <li><code>/auth/callback/{provider}</code></li> <li><code>/auth/logout</code></li> </ul>"},{"location":"security/authentication/#configuration","title":"Configuration","text":""},{"location":"security/authentication/#single-provider","title":"Single Provider","text":"<p>Settings: <code>lango settings</code> \u2192 Auth</p> <pre><code>{\n  \"auth\": {\n    \"providers\": {\n      \"google\": {\n        \"issuerUrl\": \"https://accounts.google.com\",\n        \"clientId\": \"your-client-id.apps.googleusercontent.com\",\n        \"clientSecret\": \"your-client-secret\",\n        \"redirectUrl\": \"https://your-domain.com/auth/callback/google\",\n        \"scopes\": [\n          \"openid\",\n          \"email\",\n          \"profile\"\n        ]\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"security/authentication/#multiple-providers","title":"Multiple Providers","text":"<p>Settings: <code>lango settings</code> \u2192 Auth</p> <pre><code>{\n  \"auth\": {\n    \"providers\": {\n      \"google\": {\n        \"issuerUrl\": \"https://accounts.google.com\",\n        \"clientId\": \"google-client-id\",\n        \"clientSecret\": \"google-client-secret\",\n        \"redirectUrl\": \"https://your-domain.com/auth/callback/google\",\n        \"scopes\": [\"openid\", \"email\", \"profile\"]\n      },\n      \"github\": {\n        \"issuerUrl\": \"https://token.actions.githubusercontent.com\",\n        \"clientId\": \"github-client-id\",\n        \"clientSecret\": \"github-client-secret\",\n        \"redirectUrl\": \"https://your-domain.com/auth/callback/github\",\n        \"scopes\": [\"openid\", \"email\"]\n      }\n    }\n  }\n}\n</code></pre> <p>Each provider is registered under a unique name (e.g., <code>google</code>, <code>github</code>) which maps to the <code>{provider}</code> path parameter in auth endpoints.</p>"},{"location":"security/authentication/#configuration-reference","title":"Configuration Reference","text":"Key Type Description <code>auth.providers.&lt;id&gt;.issuerUrl</code> string OIDC issuer URL (e.g., <code>https://accounts.google.com</code>) <code>auth.providers.&lt;id&gt;.clientId</code> string OAuth 2.0 client ID <code>auth.providers.&lt;id&gt;.clientSecret</code> string OAuth 2.0 client secret <code>auth.providers.&lt;id&gt;.redirectUrl</code> string Callback URL registered with the provider <code>auth.providers.&lt;id&gt;.scopes</code> list OAuth scopes to request (must include <code>openid</code>) <p>Redirect URL</p> <p>The redirect URL must exactly match what is registered with your OIDC provider. For local development, use <code>http://localhost:18789/auth/callback/{provider}</code>.</p>"},{"location":"security/encryption/","title":"Encryption &amp; Secrets","text":"<p>Lango encrypts all sensitive data using AES-256-GCM and manages cryptographic keys through a registry backed by the Ent ORM. Two security modes are available depending on your deployment.</p>"},{"location":"security/encryption/#security-modes","title":"Security Modes","text":""},{"location":"security/encryption/#local-mode-default","title":"Local Mode (Default)","text":"<p>Local mode derives encryption keys from a user-provided passphrase using PBKDF2 (100,000 iterations, SHA-256, 16-byte salt). All cryptographic operations happen in-process.</p> InteractiveHeadless <p>During onboarding (<code>lango onboard</code>) or first startup, Lango prompts for a passphrase:</p> <pre><code>Enter encryption passphrase (min 8 characters): ********\nConfirm passphrase: ********\n</code></pre> <p>For CI/CD or server deployments, set the passphrase via environment variable:</p> <pre><code>export LANGO_PASSPHRASE=\"your-secure-passphrase\"\nlango serve\n</code></pre> <p>Passphrase Recovery</p> <p>There is no passphrase recovery mechanism. If you lose your passphrase, all encrypted data (secrets, wallet keys, session data) becomes permanently inaccessible. Back up your passphrase in a secure location.</p> <p>Key Derivation Parameters:</p> Parameter Value Algorithm PBKDF2 Hash SHA-256 Key Size 256 bits (32 bytes) Salt Size 128 bits (16 bytes) Iterations 100,000 Cipher AES-256-GCM Nonce Size 96 bits (12 bytes) <p>Passphrase Migration:</p> <p>To change your passphrase without losing data:</p> <pre><code>lango security migrate-passphrase\n</code></pre> <p>This re-encrypts all secrets and keys under the new passphrase.</p>"},{"location":"security/encryption/#rpc-mode-production","title":"RPC Mode (Production)","text":"<p>RPC mode delegates all cryptographic operations (sign, encrypt, decrypt) to an external signer -- typically a hardware-backed companion app or HSM. Private keys never leave the secure hardware boundary.</p> <pre><code>sequenceDiagram\n    participant Agent\n    participant RPCProvider\n    participant Companion as Companion App / HSM\n\n    Agent-&gt;&gt;RPCProvider: Encrypt(keyID, plaintext)\n    RPCProvider-&gt;&gt;Companion: encrypt.request (JSON-RPC)\n    Companion--&gt;&gt;RPCProvider: encrypt.response (ciphertext)\n    RPCProvider--&gt;&gt;Agent: ciphertext</code></pre> <p>Each RPC request has a 30-second timeout. If the companion is unreachable, the Composite Provider automatically falls back to local mode (if configured).</p> <p>Configure RPC mode:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"signer\": {\n      \"provider\": \"rpc\",\n      \"rpcUrl\": \"https://companion.local:8443\",\n      \"keyId\": \"primary-signing-key\"\n    }\n  }\n}\n</code></pre>"},{"location":"security/encryption/#cloud-kms-mode","title":"Cloud KMS Mode","text":"<p>Cloud KMS mode delegates cryptographic operations to a managed key service. Four backends are supported:</p> Backend Provider Build Tag Key Types AWS KMS <code>aws-kms</code> <code>kms_aws</code> ECDSA_SHA_256 signing, SYMMETRIC_DEFAULT encrypt/decrypt GCP Cloud KMS <code>gcp-kms</code> <code>kms_gcp</code> AsymmetricSign SHA-256, symmetric encrypt/decrypt Azure Key Vault <code>azure-kv</code> <code>kms_azure</code> ES256 signing, RSA-OAEP encrypt/decrypt PKCS#11 HSM <code>pkcs11</code> <code>kms_pkcs11</code> CKM_ECDSA signing, CKM_AES_GCM encrypt/decrypt <p>Build with the appropriate tag to include the Cloud SDK dependency:</p> <pre><code># Single provider\ngo build -tags kms_aws ./cmd/lango\n\n# All providers\ngo build -tags kms_all ./cmd/lango\n</code></pre> <p>Without a build tag, the provider returns a stub error at runtime.</p> <p>The CompositeCryptoProvider wraps any KMS backend with automatic local fallback when <code>kms.fallbackToLocal</code> is enabled. KMS calls include exponential backoff retry logic for transient errors (throttling, network timeouts) and a health checker with a 30-second probe cache.</p> <p>Configure Cloud KMS:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"signer\": {\n      \"provider\": \"aws-kms\"\n    },\n    \"kms\": {\n      \"region\": \"us-east-1\",\n      \"keyId\": \"arn:aws:kms:us-east-1:123456789012:key/example-key\",\n      \"fallbackToLocal\": true,\n      \"timeoutPerOperation\": \"5s\",\n      \"maxRetries\": 3\n    }\n  }\n}\n</code></pre> <p>For Azure Key Vault, also specify the vault URL:</p> <pre><code>{\n  \"security\": {\n    \"signer\": { \"provider\": \"azure-kv\" },\n    \"kms\": {\n      \"keyId\": \"my-signing-key\",\n      \"azure\": {\n        \"vaultUrl\": \"https://myvault.vault.azure.net\"\n      }\n    }\n  }\n}\n</code></pre> <p>For PKCS#11 HSM:</p> <pre><code>{\n  \"security\": {\n    \"signer\": { \"provider\": \"pkcs11\" },\n    \"kms\": {\n      \"pkcs11\": {\n        \"modulePath\": \"/usr/lib/softhsm/libsofthsm2.so\",\n        \"slotId\": 0,\n        \"keyLabel\": \"lango-signing-key\"\n      }\n    }\n  }\n}\n</code></pre> <p>PKCS#11 PIN</p> <p>Set the PIN via <code>LANGO_PKCS11_PIN</code> environment variable instead of storing it in configuration.</p>"},{"location":"security/encryption/#secret-management","title":"Secret Management","text":"<p>Agents manage encrypted secrets through tool workflows. Secrets are stored in the Ent database with AES-256-GCM encryption and referenced by name -- plaintext values never appear in logs or agent output.</p>"},{"location":"security/encryption/#how-it-works","title":"How It Works","text":"<ol> <li>A secret is stored via CLI or tool call with a name and value</li> <li>The value is encrypted using the default encryption key from the Key Registry</li> <li>The agent receives a reference token (<code>{{secret:name}}</code>) instead of the plaintext</li> <li>When a tool needs the actual value, the RefStore resolves the token just before execution</li> <li>The output scanner replaces any leaked values with <code>[SECRET:name]</code> placeholders</li> </ol> <pre><code>User: \"Store my API key: sk-abc123\"\nAgent stores \u2192 {{secret:api_key}}\nTool uses   \u2192 RefStore resolves {{secret:api_key}} \u2192 sk-abc123\nOutput      \u2192 Scanner replaces sk-abc123 \u2192 [SECRET:api_key]\n</code></pre>"},{"location":"security/encryption/#output-scanning","title":"Output Scanning","text":"<p>The secret scanner monitors all agent output for plaintext secret values. When a match is found, it replaces the value with a safe placeholder:</p> <pre><code>Agent output: \"Connected using key sk-abc123\"\nScanned output: \"Connected using key [SECRET:api_key]\"\n</code></pre> <p>This prevents accidental secret leakage through chat messages, logs, or tool output.</p>"},{"location":"security/encryption/#hardware-keyring-integration","title":"Hardware Keyring Integration","text":"<p>Lango can store the master passphrase using hardware-backed security, eliminating the need for keyfiles or interactive prompts on every startup. Only hardware-backed backends are supported to prevent same-UID attacks.</p> <p>Passphrase Source Priority:</p> <ol> <li>Hardware keyring (Touch ID / TPM when available and a passphrase is stored)</li> <li>Keyfile (<code>~/.lango/keyfile</code> or <code>LANGO_KEYFILE</code> path)</li> <li>Interactive prompt (terminal input)</li> <li>Stdin (piped input for CI/CD)</li> </ol> <p>Supported Hardware Backends:</p> Platform Backend Security Level macOS Touch ID (Secure Enclave) Biometric Linux TPM 2.0 sealed storage Hardware <p>Manage via CLI:</p> <pre><code>lango security keyring store    # Store passphrase in hardware backend\nlango security keyring status   # Check hardware keyring availability\nlango security keyring clear    # Remove stored passphrase\n</code></pre> <p>No Hardware Backend</p> <p>On systems without Touch ID or TPM 2.0, the keyring commands are unavailable. Use keyfile or interactive prompt instead.</p>"},{"location":"security/encryption/#database-encryption","title":"Database Encryption","text":"<p>Lango supports transparent database encryption using SQLCipher PRAGMA-based encryption. When enabled, the entire application database (<code>~/.lango/lango.db</code>) is encrypted at rest.</p> <p>How it works:</p> <ol> <li>After <code>sql.Open</code>, the bootstrap process issues <code>PRAGMA key = '&lt;passphrase&gt;'</code> to unlock the database</li> <li><code>PRAGMA cipher_page_size</code> is set according to configuration (default: 4096)</li> <li>All subsequent reads and writes are transparently encrypted/decrypted</li> </ol> <p>Configure:</p> <pre><code>{\n  \"security\": {\n    \"dbEncryption\": {\n      \"enabled\": true,\n      \"cipherPageSize\": 4096\n    }\n  }\n}\n</code></pre> <p>Migration commands:</p> <pre><code># Encrypt an existing plaintext database\nlango security db-migrate\n\n# Decrypt back to plaintext\nlango security db-decrypt\n</code></pre> <p>Build Dependency</p> <p>Database encryption requires <code>libsqlcipher-dev</code> at build time. The <code>mattn/go-sqlite3</code> driver is retained for <code>sqlite-vec</code> compatibility, with PRAGMA-based encryption instead of a separate <code>go-sqlcipher</code> driver.</p>"},{"location":"security/encryption/#key-registry","title":"Key Registry","text":"<p>The Key Registry is an Ent-backed store that manages encryption and signing keys. Each key has a type, a name, and an optional remote key ID (for RPC mode).</p> <p>Key Types:</p> Type Purpose <code>encryption</code> AES-256-GCM encryption/decryption <code>signing</code> HMAC-SHA256 signing (local) or remote signature (RPC) <p>The registry tracks key metadata including creation time and last-used timestamp, enabling key rotation auditing.</p>"},{"location":"security/encryption/#wallet-key-security","title":"Wallet Key Security","text":"<p>When blockchain payments are enabled, wallet private keys are managed through the same security infrastructure:</p> Mode Storage Signing Local Derived from passphrase, stored encrypted In-process ECDSA RPC Keys remain on companion/hardware signer Remote signing via RPC <p>Spending Limits provide an additional safety layer:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"payment\": {\n    \"limits\": {\n      \"maxPerTx\": \"1.00\",\n      \"maxDaily\": \"10.00\"\n    }\n  }\n}\n</code></pre>"},{"location":"security/encryption/#companion-app-discovery","title":"Companion App Discovery","text":"<p>Experimental</p> <p>Companion app discovery is an experimental feature and may change in future releases.</p> <p>Lango can auto-discover companion apps on the local network using mDNS:</p> <ul> <li>Service type: <code>_lango-companion._tcp</code></li> <li>Discovery: Automatic on startup when RPC mode is configured</li> <li>Fallback: Manual configuration via <code>security.signer.rpcUrl</code></li> </ul> <p>If mDNS discovery fails, configure the companion URL explicitly:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"signer\": {\n      \"provider\": \"rpc\",\n      \"rpcUrl\": \"https://192.168.1.100:8443\"\n    }\n  }\n}\n</code></pre>"},{"location":"security/encryption/#cli-commands","title":"CLI Commands","text":""},{"location":"security/encryption/#security-status","title":"Security Status","text":"<pre><code>lango security status\n</code></pre> <p>Displays the current security configuration: encryption mode, key count, secret count, and companion connection status.</p>"},{"location":"security/encryption/#passphrase-migration","title":"Passphrase Migration","text":"<pre><code>lango security migrate-passphrase\n</code></pre> <p>Re-encrypts all secrets and keys under a new passphrase. Prompts for both old and new passphrase.</p>"},{"location":"security/encryption/#secret-management_1","title":"Secret Management","text":"<pre><code># List all secrets (metadata only, no values)\nlango security secrets list\n\n# Store a secret\nlango security secrets set &lt;name&gt; &lt;value&gt;\n\n# Delete a secret\nlango security secrets delete &lt;name&gt;\n</code></pre> <p>Secret Names</p> <p>Use descriptive, namespaced names for secrets: <code>openai/api-key</code>, <code>telegram/bot-token</code>, <code>wallet/private-key</code>. This makes it easier to manage secrets across integrations.</p>"},{"location":"security/encryption/#configuration-reference","title":"Configuration Reference","text":"<p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"enabled\": true,\n      \"redactPii\": true,\n      \"approvalPolicy\": \"dangerous\"\n    },\n    \"signer\": {\n      \"provider\": \"local\",\n      \"rpcUrl\": \"\",\n      \"keyId\": \"\"\n    },\n    \"dbEncryption\": {\n      \"enabled\": false,\n      \"cipherPageSize\": 4096\n    },\n    \"kms\": {\n      \"region\": \"\",\n      \"keyId\": \"\",\n      \"fallbackToLocal\": true,\n      \"timeoutPerOperation\": \"5s\",\n      \"maxRetries\": 3,\n      \"azure\": {\n        \"vaultUrl\": \"\"\n      },\n      \"pkcs11\": {\n        \"modulePath\": \"\",\n        \"slotId\": 0,\n        \"keyLabel\": \"\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"security/pii-redaction/","title":"PII Redaction","text":"<p>Lango includes a privacy interceptor that sits between the user and the AI provider. It detects and redacts personally identifiable information (PII) from user input before it reaches the LLM, preventing accidental exposure of sensitive data.</p>"},{"location":"security/pii-redaction/#how-it-works","title":"How It Works","text":"<pre><code>graph LR\n    User[User Input] --&gt; Detector[PII Detector]\n    Detector --&gt; Regex[Regex Engine]\n    Detector --&gt; Presidio[Presidio NER]\n    Regex --&gt; Merger[Merge &amp; Deduplicate]\n    Presidio --&gt; Merger\n    Merger --&gt; Redactor[Redactor]\n    Redactor --&gt;|\"[REDACTED]\"| Agent[AI Agent]</code></pre> <ol> <li>User input enters the security interceptor</li> <li>The PII Detector runs all enabled detection engines (regex, Presidio)</li> <li>Overlapping matches are merged, preferring higher-confidence results</li> <li>Matched regions are replaced with <code>[REDACTED]</code></li> <li>The sanitized input is forwarded to the AI agent</li> </ol>"},{"location":"security/pii-redaction/#builtin-patterns","title":"Builtin Patterns","text":"<p>Lango ships with 13 builtin regex patterns across four categories:</p>"},{"location":"security/pii-redaction/#contact","title":"Contact","text":"Pattern Name Default Description Email <code>email</code> Enabled Standard email addresses US Phone <code>us_phone</code> Enabled US phone format (123-456-7890) Korean Mobile <code>kr_mobile</code> Enabled Korean mobile (010-1234-5678) Korean Landline <code>kr_landline</code> Enabled Korean landline (02-123-4567) International Phone <code>intl_phone</code> Disabled International format (+1-234-567-8901)"},{"location":"security/pii-redaction/#identity","title":"Identity","text":"Pattern Name Default Description Korean RRN <code>kr_rrn</code> Enabled Resident Registration Number (6+7 digits) US SSN <code>us_ssn</code> Enabled Social Security Number (123-45-6789) Korean Driver License <code>kr_driver</code> Disabled Driver license (12-34-567890-12) Passport <code>passport</code> Disabled Passport number (1-2 letters + 7-8 digits)"},{"location":"security/pii-redaction/#financial","title":"Financial","text":"Pattern Name Default Description Credit Card <code>credit_card</code> Enabled Major card networks, Luhn-validated Korean Bank Account <code>kr_bank_account</code> Disabled Korean bank account format IBAN <code>iban</code> Disabled International Bank Account Number"},{"location":"security/pii-redaction/#network","title":"Network","text":"Pattern Name Default Description IPv4 <code>ipv4</code> Disabled IPv4 addresses (192.168.1.1) <p>Luhn Validation</p> <p>Credit card matches are validated using the Luhn algorithm. A regex match that fails the checksum is discarded, reducing false positives from random digit sequences.</p>"},{"location":"security/pii-redaction/#pattern-customization","title":"Pattern Customization","text":""},{"location":"security/pii-redaction/#disabling-builtin-patterns","title":"Disabling Builtin Patterns","text":"<p>Use <code>piiDisabledPatterns</code> to disable specific builtin patterns by name:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"enabled\": true,\n      \"redactPii\": true,\n      \"piiDisabledPatterns\": [\n        \"ipv4\",\n        \"kr_landline\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"security/pii-redaction/#adding-custom-patterns","title":"Adding Custom Patterns","text":"<p>Use <code>piiCustomPatterns</code> to add your own regex patterns:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"piiCustomPatterns\": {\n        \"company_id\": \"\\\\bEMP-\\\\d{6}\\\\b\",\n        \"internal_code\": \"\\\\bINT-[A-Z]{3}-\\\\d{4}\\\\b\"\n      }\n    }\n  }\n}\n</code></pre> <p>Custom patterns are categorized as <code>custom</code> and always enabled. Each pattern must be a valid Go regex.</p> <p>Testing Patterns</p> <p>Test your regex patterns with Go's <code>regexp</code> package before adding them to configuration. Invalid patterns are silently skipped with a warning log.</p>"},{"location":"security/pii-redaction/#presidio-integration","title":"Presidio Integration","text":"<p>For more advanced PII detection beyond regex, Lango integrates with Microsoft Presidio -- an NER-based (Named Entity Recognition) PII detection engine.</p>"},{"location":"security/pii-redaction/#setup","title":"Setup","text":"<p>Start Presidio alongside Lango using Docker Compose:</p> <pre><code>docker compose --profile presidio up -d\n</code></pre> <p>This starts the Presidio analyzer service on port 5002.</p>"},{"location":"security/pii-redaction/#how-it-works_1","title":"How It Works","text":"<p>When Presidio is enabled, Lango creates a Composite Detector that runs both engines:</p> <ol> <li>Regex Detector -- fast, deterministic pattern matching</li> <li>Presidio Detector -- NER-based entity recognition via HTTP API</li> </ol> <p>Results are merged and deduplicated. When matches overlap, the higher-confidence result wins. Presidio scores vary by confidence level, while regex matches always have a score of 1.0.</p>"},{"location":"security/pii-redaction/#supported-entity-types","title":"Supported Entity Types","text":"<p>Presidio detects a wide range of entity types including:</p> <ul> <li><code>EMAIL_ADDRESS</code>, <code>PHONE_NUMBER</code>, <code>PERSON</code>, <code>LOCATION</code></li> <li><code>CREDIT_CARD</code>, <code>IBAN_CODE</code>, <code>US_BANK_NUMBER</code></li> <li><code>US_SSN</code>, <code>US_PASSPORT</code>, <code>US_DRIVER_LICENSE</code></li> <li><code>IP_ADDRESS</code>, <code>URL</code>, <code>DATE_TIME</code></li> <li><code>UK_NHS</code>, <code>SG_NRIC_FIN</code>, <code>AU_ABN</code>, <code>AU_TFN</code>, <code>IN_PAN</code>, <code>IN_AADHAAR</code></li> <li>And more (see Presidio documentation)</li> </ul>"},{"location":"security/pii-redaction/#graceful-degradation","title":"Graceful Degradation","text":"<p>If the Presidio service is unreachable, the detector silently falls back to regex-only detection. No errors are surfaced to the user -- the system degrades gracefully.</p>"},{"location":"security/pii-redaction/#configuration","title":"Configuration","text":"<p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"enabled\": true,\n      \"redactPii\": true,\n      \"presidio\": {\n        \"enabled\": true,\n        \"url\": \"http://localhost:5002\",\n        \"scoreThreshold\": 0.7,\n        \"language\": \"en\"\n      }\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>presidio.enabled</code> bool <code>false</code> Enable Presidio NER integration <code>presidio.url</code> string <code>\"\"</code> Presidio analyzer base URL <code>presidio.scoreThreshold</code> float <code>0.7</code> Minimum confidence score for results <code>presidio.language</code> string <code>\"en\"</code> Language hint for Presidio analysis"},{"location":"security/pii-redaction/#full-configuration-reference","title":"Full Configuration Reference","text":"<p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"enabled\": true,\n      \"redactPii\": true,\n      \"piiRegexPatterns\": [\n        \"\\\\bCUSTOM-\\\\d+\\\\b\"\n      ],\n      \"piiDisabledPatterns\": [\n        \"ipv4\",\n        \"kr_bank_account\"\n      ],\n      \"piiCustomPatterns\": {\n        \"employee_id\": \"\\\\bEMP-\\\\d{6}\\\\b\"\n      },\n      \"presidio\": {\n        \"enabled\": false,\n        \"url\": \"http://localhost:5002\",\n        \"scoreThreshold\": 0.7,\n        \"language\": \"en\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"security/tool-approval/","title":"Tool Approval","text":"<p>Lango provides an approval workflow for sensitive tool executions. When an agent attempts to call a tool that requires approval, the execution is paused until a human approves or the request times out.</p>"},{"location":"security/tool-approval/#approval-policies","title":"Approval Policies","text":"<p>The <code>approvalPolicy</code> setting determines which tools require human approval before execution:</p> Policy Behavior <code>dangerous</code> Requires approval for tools marked as dangerous-level (default) <code>all</code> Requires approval for every tool call <code>configured</code> Requires approval only for tools listed in <code>sensitiveTools</code> <code>none</code> Disables approval entirely -- all tools execute immediately <p>Policy: none</p> <p>Setting <code>approvalPolicy: none</code> disables all safety checks for tool execution. Only use this in fully trusted, isolated environments.</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"enabled\": true,\n      \"approvalPolicy\": \"dangerous\"\n    }\n  }\n}\n</code></pre>"},{"location":"security/tool-approval/#sensitive-tools","title":"Sensitive Tools","text":"<p>When using <code>approvalPolicy: configured</code>, you must explicitly list which tools require approval:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"approvalPolicy\": \"configured\",\n      \"sensitiveTools\": [\n        \"exec\",\n        \"browser\",\n        \"filesystem\",\n        \"wallet_send\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"security/tool-approval/#exempt-tools","title":"Exempt Tools","text":"<p>Tools listed in <code>exemptTools</code> are exempt from approval regardless of the active policy. This is useful when a broad policy like <code>all</code> is active but certain safe tools should always execute immediately:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"approvalPolicy\": \"all\",\n      \"exemptTools\": [\n        \"knowledge_search\",\n        \"memory_recall\"\n      ]\n    }\n  }\n}\n</code></pre> <p>Exempt Overrides Policy</p> <p><code>exemptTools</code> takes precedence over both the approval policy and <code>sensitiveTools</code>. A tool listed in both <code>sensitiveTools</code> and <code>exemptTools</code> will be exempt.</p>"},{"location":"security/tool-approval/#approval-timeout","title":"Approval Timeout","text":"<p>The <code>approvalTimeoutSec</code> setting controls how long the system waits for human approval before the tool call is rejected:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"approvalTimeoutSec\": 30\n    }\n  }\n}\n</code></pre> <p>If the timeout expires without approval, the tool call is denied and the agent receives an error.</p>"},{"location":"security/tool-approval/#notification-channel","title":"Notification Channel","text":"<p>Configure which messaging channel receives approval notifications. When a tool requires approval, a notification is sent to the specified channel with details about the pending tool call:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"notifyChannel\": \"telegram\"\n    }\n  }\n}\n</code></pre> <p>The notification includes:</p> <ul> <li>Tool name</li> <li>Input parameters (with secrets masked)</li> <li>Requesting session ID</li> <li>Approve/deny action buttons (channel-dependent)</li> </ul>"},{"location":"security/tool-approval/#headless-auto-approve","title":"Headless Auto-Approve","text":"<p>For CI/CD or automated deployments where no human is available to approve, enable headless auto-approve:</p> <p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"headlessAutoApprove\": true\n    }\n  }\n}\n</code></pre> <p>Security Risk</p> <p>Headless auto-approve bypasses the approval workflow entirely. Use only in controlled environments where the agent's tool access is already restricted by other means.</p>"},{"location":"security/tool-approval/#configuration-reference","title":"Configuration Reference","text":"<p>Settings: <code>lango settings</code> \u2192 Security</p> <pre><code>{\n  \"security\": {\n    \"interceptor\": {\n      \"enabled\": true,\n      \"approvalPolicy\": \"dangerous\",\n      \"sensitiveTools\": [\n        \"exec\",\n        \"browser\"\n      ],\n      \"exemptTools\": [\n        \"knowledge_search\"\n      ],\n      \"approvalTimeoutSec\": 30,\n      \"notifyChannel\": \"telegram\",\n      \"headlessAutoApprove\": false\n    }\n  }\n}\n</code></pre> Key Type Default Description <code>approvalPolicy</code> string <code>\"dangerous\"</code> Which tools require approval <code>sensitiveTools</code> list <code>[]</code> Tool names requiring approval (<code>configured</code> policy) <code>exemptTools</code> list <code>[]</code> Tool names exempt from approval <code>approvalTimeoutSec</code> int <code>30</code> Seconds to wait for approval <code>notifyChannel</code> string <code>\"\"</code> Channel for approval notifications <code>headlessAutoApprove</code> bool <code>false</code> Auto-approve all tools in headless mode"}]}